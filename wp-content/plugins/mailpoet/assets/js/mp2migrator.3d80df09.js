!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var installedModules={};__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=0)}([function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(2),__webpack_require__(3)],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(mp,jQuery){"use strict";var MailPoet=mp;MailPoet.MP2Migrator={fatal_error:"",is_logging:!1,startLogger:function(){MailPoet.MP2Migrator.is_logging=!0,clearTimeout(MailPoet.MP2Migrator.displayLogs_timeout),clearTimeout(MailPoet.MP2Migrator.updateProgressbar_timeout),clearTimeout(MailPoet.MP2Migrator.update_wordpress_info_timeout),setTimeout(MailPoet.MP2Migrator.updateDisplay,1e3)},stopLogger:function(){MailPoet.MP2Migrator.is_logging=!1},updateDisplay:function(){MailPoet.MP2Migrator.displayLogs(),MailPoet.MP2Migrator.updateProgressbar()},displayLogs:function(){jQuery.ajax({url:window.mailpoet_mp2_migrator.log_file_url,cache:!1}).done(function(result){jQuery("#logger").html(""),result.split("\n").forEach(function(resultRow){var row=resultRow;"[ERROR]"===row.substr(0,7)||"[WARNING]"===row.substr(0,9)||row.toLowerCase()===MailPoet.I18n.t("import_stopped_by_user").toLowerCase()?row='<span class="error_msg">'+row+"</span>":row.toLowerCase()===MailPoet.I18n.t("import_complete").toLowerCase()&&(jQuery("#import-actions").hide(),jQuery("#upgrade-completed").show()),jQuery("#logger").append(row+"<br />\n")}),jQuery("#logger").append('<span class="error_msg">'+MailPoet.MP2Migrator.fatal_error+"</span><br />\n")}).always(function(){MailPoet.MP2Migrator.is_logging&&(MailPoet.MP2Migrator.displayLogs_timeout=setTimeout(MailPoet.MP2Migrator.displayLogs,1e3))})},updateProgressbar:function(){jQuery.ajax({url:window.mailpoet_mp2_migrator.progress_url,cache:!1,dataType:"json"}).always(function(result){var progress=0;void 0!==result.total&&0!==Number(result.total)&&(progress=Math.round(Number(result.current)/Number(result.total)*100)),jQuery("#progressbar").progressbar("option","value",progress),jQuery("#progresslabel").html(progress+"%"),0!==Number(result.current)&&(jQuery("#skip-import").hide(),jQuery("#progressbar").show(),jQuery("#logger-container").show()),MailPoet.MP2Migrator.is_logging&&(MailPoet.MP2Migrator.updateProgressbar_timeout=setTimeout(MailPoet.MP2Migrator.updateProgressbar,1e3))})},startImport:function(){return MailPoet.MP2Migrator.fatal_error="",MailPoet.MP2Migrator.startLogger(),MailPoet.MP2Migrator.import_button_label=jQuery("#import").val(),jQuery("#import").val(MailPoet.I18n.t("importing")).attr("disabled","disabled"),jQuery("#skip-import").hide(),jQuery("#stop-import").show(),MailPoet.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"MP2Migrator",action:"import",data:{}}).always(function(){MailPoet.MP2Migrator.stopLogger(),MailPoet.MP2Migrator.updateDisplay(),MailPoet.MP2Migrator.reactivateImportButton()}).done(function(response){response&&(MailPoet.MP2Migrator.fatal_error=response.data)}).fail(function(response){response.errors.length>0&&MailPoet.Notice.error(response.errors.map(function(error){return error.message}),{scroll:!0})}),!1},reactivateImportButton:function(){jQuery("#import").val(MailPoet.MP2Migrator.import_button_label).removeAttr("disabled"),jQuery("#stop-import").hide()},stopImport:function(){return jQuery("#stop-import").attr("disabled","disabled"),MailPoet.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"MP2Migrator",action:"stopImport",data:{}}).always(function(){jQuery("#stop-import").removeAttr("disabled"),MailPoet.MP2Migrator.reactivateImportButton(),MailPoet.MP2Migrator.updateDisplay()}).fail(function(response){response.errors.length>0&&MailPoet.Notice.error(response.errors.map(function(error){return error.message}),{scroll:!0})}),MailPoet.MP2Migrator.stopLogger(),!1},skipImport:function(){return MailPoet.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"MP2Migrator",action:"skipImport",data:{}}).done(function(){MailPoet.MP2Migrator.gotoWelcomePage()}).fail(function(response){response.errors.length>0&&MailPoet.Notice.error(response.errors.map(function(error){return error.message}),{scroll:!0})}),!1},gotoWelcomePage:function(){return window.location.href="admin.php?page=mailpoet-welcome-wizard",!1}},jQuery(function(){jQuery("#progressbar").progressbar({value:0}),jQuery("#import").click(function(){MailPoet.MP2Migrator.startImport()}),jQuery("#stop-import").click(function(){MailPoet.MP2Migrator.stopImport()}),jQuery("#skip-import").click(function(){MailPoet.MP2Migrator.skipImport()}),jQuery("#goto-welcome").click(function(){MailPoet.MP2Migrator.gotoWelcomePage()}),MailPoet.MP2Migrator.updateDisplay()})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(module,exports){module.exports=MailPoet},function(module,exports){module.exports=jQuery}]);