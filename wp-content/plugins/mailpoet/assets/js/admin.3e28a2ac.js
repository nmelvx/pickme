webpackJsonp([2],{188:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function Tabs(props){var tabLinks=tabs.map(function(tab){var tabClasses=(0,_classnames2.default)("nav-tab",{"nav-tab-active":props.tab===tab.name});return _react2.default.createElement(_reactRouterDom.Link,{key:"tab-"+tab.name,className:tabClasses,to:tab.link},tab.label)});return _react2.default.createElement("h2",{className:"nav-tab-wrapper"},tabLinks)}var _propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_reactRouterDom=__webpack_require__(7),_classnames=__webpack_require__(8),_classnames2=_interopRequireDefault(_classnames),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),tabs=[{name:"knowledgeBase",label:_mailpoet2.default.I18n.t("tabKnowledgeBaseTitle"),link:"/knowledgeBase"},{name:"systemStatus",label:_mailpoet2.default.I18n.t("tabSystemStatusTitle"),link:"/systemStatus"},{name:"systemInfo",label:_mailpoet2.default.I18n.t("tabSystemInfoTitle"),link:"/systemInfo"},{name:"yourPrivacy",label:_mailpoet2.default.I18n.t("tabYourPrivacyTitle"),link:"/yourPrivacy"}];Tabs.propTypes={tab:_propTypes2.default.string},Tabs.defaultProps={tab:"knowledgeBase"},module.exports=Tabs},292:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function confirmAlert(props){_reactDom2.default.render(_react2.default.createElement(ConfirmAlert,props),document.getElementById("mailpoet_confirm_alert_holder"))}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.default=confirmAlert;var _mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(11),_reactDom2=_interopRequireDefault(_reactDom),ConfirmAlert=function(_React$Component){function ConfirmAlert(props){_classCallCheck(this,ConfirmAlert);var _this=_possibleConstructorReturn(this,(ConfirmAlert.__proto__||Object.getPrototypeOf(ConfirmAlert)).call(this,props));return _this.componentWillUpdate=function(){_this.state.show||_this.setState({show:!0})},_this.onClose=function(){_this.setState({show:!1})},_this.onConfirm=function(){_this.onClose(),_this.props.onConfirm()},_this.state={show:!0},_this}return _inherits(ConfirmAlert,_React$Component),_createClass(ConfirmAlert,[{key:"render",value:function(){var _props=this.props,title=_props.title,message=_props.message,confirmLabel=_props.confirmLabel,cancelLabel=_props.cancelLabel;return this.state.show&&_react2.default.createElement("div",{className:"mailpoet_modal_overlay"},_react2.default.createElement("div",{className:"mailpoet_popup",tabIndex:"-1"},_react2.default.createElement("div",{className:"mailpoet_popup_wrapper"},_react2.default.createElement("button",{className:"mailpoet_modal_close",onClick:this.onClose}),title&&_react2.default.createElement("div",{className:"mailpoet_popup_title"},_react2.default.createElement("h2",null,title)),_react2.default.createElement("div",{className:"mailpoet_popup_body clearfix"},_react2.default.createElement("p",{className:"mailpoet_hp_email_label"},message),_react2.default.createElement("button",{className:"button button-secondary",onClick:this.onClose},cancelLabel),_react2.default.createElement("button",{className:"button button-primary",onClick:this.onConfirm},confirmLabel)))))}}]),ConfirmAlert}(_react2.default.Component);ConfirmAlert.propTypes={title:_propTypes2.default.string,message:_propTypes2.default.string.isRequired,cancelLabel:_propTypes2.default.string,confirmLabel:_propTypes2.default.string,onConfirm:_propTypes2.default.func.isRequired},ConfirmAlert.defaultProps={title:_mailpoet2.default.I18n.t("confirmTitle"),cancelLabel:_mailpoet2.default.I18n.t("cancelLabel"),confirmLabel:_mailpoet2.default.I18n.t("confirmLabel")}},293:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_underscore=__webpack_require__(4),_underscore2=_interopRequireDefault(_underscore),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_select=__webpack_require__(263),_select2=_interopRequireDefault(_select),_common=__webpack_require__(269),intervalField={name:"intervalType",values:_common.intervalValues},timeOfDayField={name:"timeOfDay",values:_common.timeOfDayValues},weekDayField={name:"weekDay",values:_common.weekDayValues},monthDayField={name:"monthDay",values:_common.monthDayValues},nthWeekDayField={name:"nthWeekDay",values:_common.nthWeekDayValues},NotificationScheduling=function(_React$Component){function NotificationScheduling(){var _ref,_temp,_this,_ret;_classCallCheck(this,NotificationScheduling);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=_possibleConstructorReturn(this,(_ref=NotificationScheduling.__proto__||Object.getPrototypeOf(NotificationScheduling)).call.apply(_ref,[this].concat(args))),_this.getCurrentValue=function(){return _this.props.item[_this.props.field.name]||{}},_this.handleValueChange=function(name,value){var oldValue=_this.getCurrentValue(),newValue={};return newValue[name]=value,_this.props.onValueChange({target:{name:_this.props.field.name,value:_underscore2.default.extend({},oldValue,newValue)}})},_this.handleIntervalChange=function(event){return _this.handleValueChange("intervalType",event.target.value)},_this.handleTimeOfDayChange=function(event){return _this.handleValueChange("timeOfDay",event.target.value)},_this.handleWeekDayChange=function(event){return _this.handleValueChange("weekDay",event.target.value)},_this.handleMonthDayChange=function(event){return _this.handleValueChange("monthDay",event.target.value)},_this.handleNthWeekDayChange=function(event){return _this.handleValueChange("nthWeekDay",event.target.value)},_ret=_temp,_possibleConstructorReturn(_this,_ret)}return _inherits(NotificationScheduling,_React$Component),_createClass(NotificationScheduling,[{key:"render",value:function(){var value=this.getCurrentValue(),timeOfDaySelection=void 0,weekDaySelection=void 0,monthDaySelection=void 0,nthWeekDaySelection=void 0;return"immediately"!==value.intervalType&&(timeOfDaySelection=_react2.default.createElement(_select2.default,{field:timeOfDayField,item:this.getCurrentValue(),onValueChange:this.handleTimeOfDayChange})),"weekly"!==value.intervalType&&"nthWeekDay"!==value.intervalType||(weekDaySelection=_react2.default.createElement(_select2.default,{field:weekDayField,item:this.getCurrentValue(),onValueChange:this.handleWeekDayChange})),"monthly"===value.intervalType&&(monthDaySelection=_react2.default.createElement(_select2.default,{field:monthDayField,item:this.getCurrentValue(),onValueChange:this.handleMonthDayChange})),"nthWeekDay"===value.intervalType&&(nthWeekDaySelection=_react2.default.createElement(_select2.default,{field:nthWeekDayField,item:this.getCurrentValue(),onValueChange:this.handleNthWeekDayChange})),_react2.default.createElement("div",null,_react2.default.createElement(_select2.default,{field:intervalField,item:this.getCurrentValue(),onValueChange:this.handleIntervalChange,automationId:"newsletter_interval_type"}),nthWeekDaySelection,monthDaySelection,weekDaySelection,timeOfDaySelection)}}]),NotificationScheduling}(_react2.default.Component);NotificationScheduling.propTypes={item:_propTypes2.default.object.isRequired,field:_propTypes2.default.shape({name:_propTypes2.default.string}).isRequired,onValueChange:_propTypes2.default.func.isRequired},module.exports=NotificationScheduling},295:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),KeyValueTable=function(props){return _react2.default.createElement("table",{className:"widefat fixed",style:{maxWidth:props.max_width}},_react2.default.createElement("tbody",null,props.rows.map(function(row){return _react2.default.createElement("tr",{key:"row_"+row.key},_react2.default.createElement("td",{className:"row-title"},row.key),_react2.default.createElement("td",null,row.value))})))};KeyValueTable.propTypes={max_width:_propTypes2.default.string,rows:_propTypes2.default.arrayOf(_propTypes2.default.shape({key:_propTypes2.default.string.isRequired,value:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number,_propTypes2.default.element]).isRequired})).isRequired},KeyValueTable.defaultProps={max_width:"auto"},module.exports=KeyValueTable},296:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),TasksListDataRow=function(props){return _react2.default.createElement("tr",null,_react2.default.createElement("td",{className:"column column-primary"},props.task.id),_react2.default.createElement("td",{className:"column"},props.task.type),_react2.default.createElement("td",{className:"column"},props.task.newsletter?_react2.default.createElement("a",{href:props.task.newsletter.preview_url,"data-newsletter-id":props.task.newsletter.newsletter_id,"data-queue-id":props.task.newsletter.queue_id,target:"_blank"},props.task.newsletter.subject||_mailpoet2.default.I18n.t("preview")):_mailpoet2.default.I18n.t("none")),_react2.default.createElement("td",{className:"column"},props.task.priority),props.show_scheduled_at?_react2.default.createElement("td",{className:"column-date"},_react2.default.createElement("abbr",null,_mailpoet2.default.Date.format(1e3*props.task.scheduled_at))):null,_react2.default.createElement("td",{className:"column-date"},_react2.default.createElement("abbr",null,_mailpoet2.default.Date.format(1e3*props.task.updated_at))))};TasksListDataRow.propTypes={show_scheduled_at:_propTypes2.default.bool,task:_propTypes2.default.shape({id:_propTypes2.default.number.isRequired,type:_propTypes2.default.string.isRequired,priority:_propTypes2.default.number.isRequired,updated_at:_propTypes2.default.number.isRequired,scheduled_at:_propTypes2.default.number,status:_propTypes2.default.string,newsletter:_propTypes2.default.shape({newsletter_id:_propTypes2.default.number.isRequired,queue_id:_propTypes2.default.number.isRequired,preview_url:_propTypes2.default.string.isRequired,subject:_propTypes2.default.string})}).isRequired},TasksListDataRow.defaultProps={show_scheduled_at:!1,task:{newsletter:null}},module.exports=TasksListDataRow},390:function(module,exports,__webpack_require__){"use strict";__webpack_require__(391),__webpack_require__(395),__webpack_require__(423),__webpack_require__(427),__webpack_require__(429),__webpack_require__(431),__webpack_require__(441),__webpack_require__(443),__webpack_require__(444),__webpack_require__(447),__webpack_require__(448),__webpack_require__(457),__webpack_require__(459)},391:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(11),_reactDom2=_interopRequireDefault(_reactDom),_reactRouterDom=__webpack_require__(7),_list=__webpack_require__(392),_list2=_interopRequireDefault(_list),_form=__webpack_require__(393),_form2=_interopRequireDefault(_form),container=document.getElementById("subscribers_container");container&&_reactDom2.default.render(_react2.default.createElement(_reactRouterDom.HashRouter,null,_react2.default.createElement(_reactRouterDom.Switch,null,_react2.default.createElement(_reactRouterDom.Route,{path:"/new",component:_form2.default}),_react2.default.createElement(_reactRouterDom.Route,{path:"/edit/:id",component:_form2.default}),_react2.default.createElement(_reactRouterDom.Route,{path:"*",component:_list2.default}))),container)},392:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_reactRouterDom=__webpack_require__(7),_jquery=__webpack_require__(5),_jquery2=_interopRequireDefault(_jquery),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_classnames=__webpack_require__(8),_classnames2=_interopRequireDefault(_classnames),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_listing=__webpack_require__(23),_listing2=_interopRequireDefault(_listing),_selection=__webpack_require__(283),_selection2=_interopRequireDefault(_selection),columns=[{name:"email",label:_mailpoet2.default.I18n.t("subscriber"),sortable:!0},{name:"status",label:_mailpoet2.default.I18n.t("status"),sortable:!0},{name:"segments",label:_mailpoet2.default.I18n.t("lists")},{name:"created_at",label:_mailpoet2.default.I18n.t("subscribedOn"),sortable:!0},{name:"updated_at",label:_mailpoet2.default.I18n.t("lastModifiedOn"),sortable:!0}],messages={onTrash:function(response){var count=Number(response.meta.count),message=null;message=1===count?_mailpoet2.default.I18n.t("oneSubscriberTrashed"):_mailpoet2.default.I18n.t("multipleSubscribersTrashed").replace("%$1d",count.toLocaleString()),_mailpoet2.default.Notice.success(message)},onDelete:function(response){var count=Number(response.meta.count),message=null;message=1===count?_mailpoet2.default.I18n.t("oneSubscriberDeleted"):_mailpoet2.default.I18n.t("multipleSubscribersDeleted").replace("%$1d",count.toLocaleString()),_mailpoet2.default.Notice.success(message)},onRestore:function(response){var count=Number(response.meta.count),message=null;message=1===count?_mailpoet2.default.I18n.t("oneSubscriberRestored"):_mailpoet2.default.I18n.t("multipleSubscribersRestored").replace("%$1d",count.toLocaleString()),_mailpoet2.default.Notice.success(message)},onNoItemsFound:function(group){return"bounced"===group&&!window.mailpoet_premium_active&&!window.mss_active&&_react2.default.createElement("div",null,_react2.default.createElement("p",null,_mailpoet2.default.I18n.t("bouncedSubscribersHelp")),_react2.default.createElement("p",null,_react2.default.createElement("a",{href:"admin.php?page=mailpoet-premium",className:"button-primary"},_mailpoet2.default.I18n.t("bouncedSubscribersPremiumButtonText"))))}},bulkActions=[{name:"moveToList",label:_mailpoet2.default.I18n.t("moveToList"),onSelect:function(){var field={id:"move_to_segment",name:"move_to_segment",endpoint:"segments",filter:function(segment){return!(segment.deleted_at||"default"!==segment.type)}};return _react2.default.createElement(_selection2.default,{field:field})},getData:function(){return{segment_id:Number((0,_jquery2.default)("#move_to_segment").val())}},onSuccess:function(response){_mailpoet2.default.Notice.success(_mailpoet2.default.I18n.t("multipleSubscribersMovedToList").replace("%$1d",Number(response.meta.count).toLocaleString()).replace("%$2s",response.meta.segment))}},{name:"addToList",label:_mailpoet2.default.I18n.t("addToList"),onSelect:function(){var field={id:"add_to_segment",name:"add_to_segment",endpoint:"segments",filter:function(segment){return!(segment.deleted_at||"default"!==segment.type)}};return _react2.default.createElement(_selection2.default,{field:field})},getData:function(){return{segment_id:Number((0,_jquery2.default)("#add_to_segment").val())}},onSuccess:function(response){_mailpoet2.default.Notice.success(_mailpoet2.default.I18n.t("multipleSubscribersAddedToList").replace("%$1d",Number(response.meta.count).toLocaleString()).replace("%$2s",response.meta.segment))}},{name:"removeFromList",label:_mailpoet2.default.I18n.t("removeFromList"),onSelect:function(){var field={id:"remove_from_segment",name:"remove_from_segment",endpoint:"segments",filter:function(segment){return!("default"!==segment.type)}};return _react2.default.createElement(_selection2.default,{field:field})},getData:function(){return{segment_id:Number((0,_jquery2.default)("#remove_from_segment").val())}},onSuccess:function(response){_mailpoet2.default.Notice.success(_mailpoet2.default.I18n.t("multipleSubscribersRemovedFromList").replace("%$1d",Number(response.meta.count).toLocaleString()).replace("%$2s",response.meta.segment))}},{name:"removeFromAllLists",label:_mailpoet2.default.I18n.t("removeFromAllLists"),onSuccess:function(response){_mailpoet2.default.Notice.success(_mailpoet2.default.I18n.t("multipleSubscribersRemovedFromAllLists").replace("%$1d",Number(response.meta.count).toLocaleString()))}},{name:"sendConfirmationEmail",label:_mailpoet2.default.I18n.t("resendConfirmationEmail"),onSuccess:function(response){_mailpoet2.default.Notice.success(_mailpoet2.default.I18n.t("multipleConfirmationEmailsSent").replace("%$1d",Number(response.meta.count).toLocaleString()))}},{name:"trash",label:_mailpoet2.default.I18n.t("moveToTrash"),onSuccess:messages.onTrash}],itemActions=[{name:"edit",label:_mailpoet2.default.I18n.t("edit"),link:function(subscriber){return _react2.default.createElement(_reactRouterDom.Link,{to:"/edit/"+subscriber.id},_mailpoet2.default.I18n.t("edit"))}},{name:"trash",display:function(subscriber){return 0===Number(subscriber.wp_user_id)}}],SubscriberList=function(_React$Component){function SubscriberList(){var _ref,_temp,_this,_ret;_classCallCheck(this,SubscriberList);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=_possibleConstructorReturn(this,(_ref=SubscriberList.__proto__||Object.getPrototypeOf(SubscriberList)).call.apply(_ref,[this].concat(args))),_this.getSegmentFromId=function(segmentId){var result=!1;return window.mailpoet_segments.forEach(function(segment){segment.id===segmentId&&(result=segment)}),result},_this.renderItem=function(subscriber,actions){var rowClasses=(0,_classnames2.default)("manage-column","column-primary","has-row-actions","column-username"),status="";switch(subscriber.status){case"subscribed":status=_mailpoet2.default.I18n.t("subscribed");break;case"unconfirmed":status=_mailpoet2.default.I18n.t("unconfirmed");break;case"unsubscribed":status=_mailpoet2.default.I18n.t("unsubscribed");break;case"bounced":status=_mailpoet2.default.I18n.t("bounced");break;default:status="Invalid"}var segments=!1;if(subscriber.subscriptions.length>0){var subscribedSegments=[];subscriber.subscriptions.forEach(function(subscription){var segment=_this.getSegmentFromId(subscription.segment_id);!1!==segment&&"subscribed"===subscription.status&&subscribedSegments.push(segment.name)}),segments=_react2.default.createElement("span",null,subscribedSegments.join(", "))}return _react2.default.createElement("div",null,_react2.default.createElement("td",{className:rowClasses},_react2.default.createElement("strong",null,_react2.default.createElement(_reactRouterDom.Link,{className:"row-title",to:"/edit/"+subscriber.id},subscriber.email)),_react2.default.createElement("p",{style:{margin:0}},subscriber.first_name," ",subscriber.last_name),actions),_react2.default.createElement("td",{className:"column","data-colname":_mailpoet2.default.I18n.t("status")},status),_react2.default.createElement("td",{className:"column","data-colname":_mailpoet2.default.I18n.t("lists")},segments),_react2.default.createElement("td",{className:"column-date","data-colname":_mailpoet2.default.I18n.t("subscribedOn")},_react2.default.createElement("abbr",null,_mailpoet2.default.Date.format(subscriber.created_at))),_react2.default.createElement("td",{className:"column-date","data-colname":_mailpoet2.default.I18n.t("lastModifiedOn")},_react2.default.createElement("abbr",null,_mailpoet2.default.Date.format(subscriber.updated_at))))},_ret=_temp,_possibleConstructorReturn(_this,_ret)}return _inherits(SubscriberList,_React$Component),_createClass(SubscriberList,[{key:"render",value:function(){return _react2.default.createElement("div",null,_react2.default.createElement("h1",{className:"title"},_mailpoet2.default.I18n.t("pageTitle")," ",_react2.default.createElement(_reactRouterDom.Link,{className:"page-title-action",to:"/new"},_mailpoet2.default.I18n.t("new")),_react2.default.createElement("a",{className:"page-title-action",href:"?page=mailpoet-import#step1"},_mailpoet2.default.I18n.t("import")),_react2.default.createElement("a",{id:"mailpoet_export_button",className:"page-title-action",href:"?page=mailpoet-export"},_mailpoet2.default.I18n.t("export"))),_react2.default.createElement(_listing2.default,{limit:window.mailpoet_listing_per_page,location:this.props.location,params:this.props.match.params,endpoint:"subscribers",onRenderItem:this.renderItem,columns:columns,bulk_actions:bulkActions,item_actions:itemActions,messages:messages,sort_by:"created_at",sort_order:"desc"}))}}]),SubscriberList}(_react2.default.Component);SubscriberList.propTypes={location:_propTypes2.default.object.isRequired,match:_propTypes2.default.shape({params:_propTypes2.default.object}).isRequired},module.exports=SubscriberList},393:function(module,exports,__webpack_require__){"use strict";(function(global){global.MailPoetLib||(global.MailPoetLib={}),module.exports=global.MailPoetLib.Form=__webpack_require__(394)}).call(exports,__webpack_require__(6))},394:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function beforeFormContent(subscriber){if(Number(subscriber.wp_user_id)>0)return _react2.default.createElement("p",{className:"description"},(0,_reactStringReplace2.default)(_mailpoet2.default.I18n.t("WPUserEditNotice"),/\[link\](.*?)\[\/link\]/g,function(match,i){return _react2.default.createElement("a",{key:i,href:"user-edit.php?user_id="+subscriber.wp_user_id},match)}))}function afterFormContent(){return _react2.default.createElement("p",{className:"description"},_react2.default.createElement("strong",null,_mailpoet2.default.I18n.t("tip"))," ",_mailpoet2.default.I18n.t("customFieldsTip"))}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_reactRouterDom=__webpack_require__(7),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_form=__webpack_require__(187),_form2=_interopRequireDefault(_form),_reactStringReplace=__webpack_require__(22),_reactStringReplace2=_interopRequireDefault(_reactStringReplace),fields=[{name:"email",label:_mailpoet2.default.I18n.t("email"),type:"text",disabled:function(subscriber){return Number(subscriber.wp_user_id>0)}},{name:"first_name",label:_mailpoet2.default.I18n.t("firstname"),type:"text",disabled:function(subscriber){return Number(subscriber.wp_user_id>0)}},{name:"last_name",label:_mailpoet2.default.I18n.t("lastname"),type:"text",disabled:function(subscriber){return Number(subscriber.wp_user_id>0)}},{name:"status",label:_mailpoet2.default.I18n.t("status"),type:"select",values:{subscribed:_mailpoet2.default.I18n.t("subscribed"),unconfirmed:_mailpoet2.default.I18n.t("unconfirmed"),unsubscribed:_mailpoet2.default.I18n.t("unsubscribed"),bounced:_mailpoet2.default.I18n.t("bounced")},filter:function(subscriber,value){return!(Number(subscriber.wp_user_id)>0&&"unconfirmed"===value)}},{name:"segments",label:_mailpoet2.default.I18n.t("lists"),type:"selection",placeholder:_mailpoet2.default.I18n.t("selectList"),tip:_mailpoet2.default.I18n.t("welcomeEmailTip"),api_version:window.mailpoet_api_version,endpoint:"segments",multiple:!0,selected:function(subscriber){return!1===Array.isArray(subscriber.subscriptions)?null:subscriber.subscriptions.filter(function(subscription){return"subscribed"===subscription.status}).map(function(subscription){return subscription.segment_id})},filter:function(segment){return!segment.deleted_at&&"default"===segment.type},getLabel:function(segment){return segment.name+" ("+segment.subscribers+")"},getSearchLabel:function(segment,subscriber){var label="";return void 0!==subscriber.subscriptions&&subscriber.subscriptions.forEach(function(subscription){if(segment.id===subscription.segment_id&&(label=segment.name,"unsubscribed"===subscription.status)){var unsubscribedAt=_mailpoet2.default.Date.format(subscription.updated_at);label+=" (%$1s)".replace("%$1s",_mailpoet2.default.I18n.t("unsubscribedOn").replace("%$1s",unsubscribedAt))}}),label}}];(window.mailpoet_custom_fields||[]).forEach(function(customField){var field={name:"cf_"+customField.id,label:customField.name,type:customField.type};switch(customField.params&&(field.params=customField.params),customField.params.values&&(field.values=customField.params.values),customField.type){case"date":field.year_placeholder=_mailpoet2.default.I18n.t("year"),field.month_placeholder=_mailpoet2.default.I18n.t("month"),field.day_placeholder=_mailpoet2.default.I18n.t("day");break;case"select":field.placeholder="-";break;default:field.placeholder=""}fields.push(field)});var messages={onUpdate:function(){_mailpoet2.default.Notice.success(_mailpoet2.default.I18n.t("subscriberUpdated"))},onCreate:function(){_mailpoet2.default.Notice.success(_mailpoet2.default.I18n.t("subscriberAdded")),_mailpoet2.default.trackEvent("Subscribers > Add new",{"MailPoet Free version":window.mailpoet_version})}},SubscriberForm=function(_React$Component){function SubscriberForm(){return _classCallCheck(this,SubscriberForm),_possibleConstructorReturn(this,(SubscriberForm.__proto__||Object.getPrototypeOf(SubscriberForm)).apply(this,arguments))}return _inherits(SubscriberForm,_React$Component),_createClass(SubscriberForm,[{key:"render",value:function(){return _react2.default.createElement("div",null,_react2.default.createElement("h1",{className:"title"},_mailpoet2.default.I18n.t("subscriber"),_react2.default.createElement(_reactRouterDom.Link,{className:"page-title-action",to:"/"},_mailpoet2.default.I18n.t("backToList"))),_react2.default.createElement(_form2.default,{endpoint:"subscribers",fields:fields,params:this.props.match.params,messages:messages,beforeFormContent:beforeFormContent,afterFormContent:afterFormContent}))}}]),SubscriberForm}(_react2.default.Component);SubscriberForm.propTypes={match:_propTypes2.default.shape({params:_propTypes2.default.shape({id:_propTypes2.default.string}).isRequired}).isRequired},module.exports=SubscriberForm},395:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(11),_reactDom2=_interopRequireDefault(_reactDom),_reactRouterDom=__webpack_require__(7),_wpJsHooks=__webpack_require__(13),_wpJsHooks2=_interopRequireDefault(_wpJsHooks),_underscore=__webpack_require__(4),_underscore2=_interopRequireDefault(_underscore),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_types=__webpack_require__(396),_types2=_interopRequireDefault(_types),_templates=__webpack_require__(397),_templates2=_interopRequireDefault(_templates),_send=__webpack_require__(402),_send2=_interopRequireDefault(_send),_congratulate=__webpack_require__(411),_congratulate2=_interopRequireDefault(_congratulate),_standard=__webpack_require__(416),_standard2=_interopRequireDefault(_standard),_notification=__webpack_require__(417),_notification2=_interopRequireDefault(_notification),_welcome=__webpack_require__(418),_welcome2=_interopRequireDefault(_welcome),_events_list=__webpack_require__(290),_events_list2=_interopRequireDefault(_events_list),_standard3=__webpack_require__(419),_standard4=_interopRequireDefault(_standard3),_welcome3=__webpack_require__(420),_welcome4=_interopRequireDefault(_welcome3),_notification3=__webpack_require__(421),_notification4=_interopRequireDefault(_notification3),_notification_history=__webpack_require__(422),_notification_history2=_interopRequireDefault(_notification_history);((function(_React$Component){function App(){return _classCallCheck(this,App),_possibleConstructorReturn(this,(App.__proto__||Object.getPrototypeOf(App)).apply(this,arguments))}return _inherits(App,_React$Component),_createClass(App,[{key:"render",value:function(){return this.props.children}}]),App})(_react2.default.Component)).propTypes={children:_propTypes2.default.element.isRequired};var container=document.getElementById("newsletters_container");if(container){var routes=[{path:"/standard/(.*)?",component:_standard4.default},{path:"/welcome/(.*)?",component:_welcome4.default},{path:"/notification/history/:parent_id/(.*)?",component:_notification_history2.default},{path:"/notification/(.*)?",component:_notification4.default},{path:"/new/standard",component:_standard2.default},{path:"/new/notification",component:_notification2.default},{path:"/new/welcome",component:_welcome2.default},{path:"/new",component:_types2.default},{name:"template",path:"/template/:id",component:_templates2.default},{path:"/send/congratulate/:id",component:_congratulate2.default},{path:"/send/:id",component:_send2.default}];routes=_wpJsHooks2.default.applyFilters("mailpoet_newsletters_before_router",[].concat(_toConsumableArray(routes),_toConsumableArray(function(){return window.mailpoet_automatic_emails?_underscore2.default.map(window.mailpoet_automatic_emails,function(automaticEmail){return{path:"new/"+automaticEmail.slug,name:automaticEmail.slug,component:_events_list2.default,data:{email:automaticEmail}}}):null}()))),window.mailpoet_listing=_reactDom2.default.render(_react2.default.createElement(_reactRouterDom.HashRouter,null,_react2.default.createElement(_reactRouterDom.Switch,null,_react2.default.createElement(_reactRouterDom.Route,{exact:!0,path:"/",render:function(){return _react2.default.createElement(_reactRouterDom.Redirect,{to:"/standard"})}}),routes.map(function(route){return _react2.default.createElement(_reactRouterDom.Route,{key:route.path,path:route.path,component:route.component,name:route.name||null,data:route.data||null,render:route.render})}))),container)}},396:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_breadcrumb=__webpack_require__(21),_breadcrumb2=_interopRequireDefault(_breadcrumb),_wpJsHooks=__webpack_require__(13),_wpJsHooks2=_interopRequireDefault(_wpJsHooks),_underscore=__webpack_require__(4),_underscore2=_interopRequireDefault(_underscore),_reactRouterDom=__webpack_require__(7),NewsletterTypes=function(_React$Component){function NewsletterTypes(){var _ref,_temp,_this,_ret;_classCallCheck(this,NewsletterTypes);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=_possibleConstructorReturn(this,(_ref=NewsletterTypes.__proto__||Object.getPrototypeOf(NewsletterTypes)).call.apply(_ref,[this].concat(args))),_this.setupNewsletter=function(type){void 0!==type&&(_this.props.history.push("/new/"+type),_mailpoet2.default.trackEvent("Emails > Type selected",{"MailPoet Free version":window.mailpoet_version,"Email type":type}))},_this.getAutomaticEmails=function(){return window.mailpoet_automatic_emails?_underscore2.default.map(window.mailpoet_automatic_emails,function(automaticEmail){var email=automaticEmail,onClick=_underscore2.default.partial(_this.setupNewsletter,automaticEmail.slug);return email.action=function(){return _react2.default.createElement("div",null,_react2.default.createElement("a",{className:"button button-primary",onClick:onClick,role:"button",tabIndex:0},_mailpoet2.default.I18n.t("setUp")))}(),email}):[]},_this.createNewsletter=function(type){_mailpoet2.default.trackEvent("Emails > Type selected",{"MailPoet Free version":window.mailpoet_version,"Email type":type}),_mailpoet2.default.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"create",data:{type:type,subject:_mailpoet2.default.I18n.t("draftNewsletterTitle")}}).done(function(response){_this.props.history.push("/template/"+response.data.id)}).fail(function(response){response.errors.length>0&&_mailpoet2.default.Notice.error(response.errors.map(function(error){return error.message}),{scroll:!0})})},_ret=_temp,_possibleConstructorReturn(_this,_ret)}return _inherits(NewsletterTypes,_React$Component),_createClass(NewsletterTypes,[{key:"render",value:function(){var createStandardNewsletter=_underscore2.default.partial(this.createNewsletter,"standard"),createNotificationNewsletter=_underscore2.default.partial(this.setupNewsletter,"notification"),createWelcomeNewsletter=_underscore2.default.partial(this.setupNewsletter,"welcome"),defaultTypes=[{slug:"standard",title:_mailpoet2.default.I18n.t("regularNewsletterTypeTitle"),description:_mailpoet2.default.I18n.t("regularNewsletterTypeDescription"),action:function(){return _react2.default.createElement("a",{className:"button button-primary","data-automation-id":"create_standard",onClick:createStandardNewsletter,role:"button",tabIndex:0},_mailpoet2.default.I18n.t("create"))}()},{slug:"welcome",title:_mailpoet2.default.I18n.t("welcomeNewsletterTypeTitle"),description:_mailpoet2.default.I18n.t("welcomeNewsletterTypeDescription"),videoGuide:"https://beta.docs.mailpoet.com/article/254-video-guide-to-welcome-emails",action:function(){return _react2.default.createElement("a",{className:"button button-primary",onClick:createWelcomeNewsletter,"data-automation-id":"create_welcome",onKeyDown:function(event){["keydown","keypress"].includes(event.type)&&["Enter"," "].includes(event.key)&&(event.preventDefault(),createWelcomeNewsletter())},role:"button",tabIndex:0},_mailpoet2.default.I18n.t("setUp"))}()},{slug:"notification",title:_mailpoet2.default.I18n.t("postNotificationNewsletterTypeTitle"),description:_mailpoet2.default.I18n.t("postNotificationNewsletterTypeDescription"),videoGuide:"https://beta.docs.mailpoet.com/article/210-video-guide-to-post-notifications",action:function(){return _react2.default.createElement("a",{className:"button button-primary","data-automation-id":"create_notification",onClick:createNotificationNewsletter,role:"button",tabIndex:0},_mailpoet2.default.I18n.t("setUp"))}()}],types=_wpJsHooks2.default.applyFilters("mailpoet_newsletters_types",[].concat(defaultTypes,_toConsumableArray(this.getAutomaticEmails())),this),badgeClassName=!0===window.mailpoet_is_new_user?"mailpoet_badge mailpoet_badge_video":"mailpoet_badge mailpoet_badge_video mailpoet_badge_video_grey";return _react2.default.createElement("div",null,_react2.default.createElement("h1",null,_mailpoet2.default.I18n.t("pickCampaignType")),_react2.default.createElement(_breadcrumb2.default,{step:"type"}),_react2.default.createElement("ul",{className:"mailpoet_boxes clearfix"},types.map(function(type){return _react2.default.createElement("li",{key:type.slug,"data-type":type.slug,className:"mailpoet_newsletter_types"},_react2.default.createElement("div",null,_react2.default.createElement("div",{className:"mailpoet_thumbnail"},type.thumbnailImage?_react2.default.createElement("img",{src:type.thumbnailImage,alt:""}):null),_react2.default.createElement("div",{className:"mailpoet_description"},_react2.default.createElement("h3",null,type.title," ",type.beta?"("+_mailpoet2.default.I18n.t("beta")+")":""),_react2.default.createElement("p",null,type.description),type.videoGuide&&_react2.default.createElement("a",{className:badgeClassName,href:type.videoGuide,target:"_blank"},_react2.default.createElement("span",{className:"dashicons dashicons-format-video"}),_mailpoet2.default.I18n.t("seeVideoGuide"))),_react2.default.createElement("div",{className:"mailpoet_actions"},type.action)))},this)))}}]),NewsletterTypes}(_react2.default.Component);NewsletterTypes.propTypes={history:_propTypes2.default.shape({push:_propTypes2.default.func.isRequired}).isRequired},module.exports=(0,_reactRouterDom.withRouter)(NewsletterTypes)},397:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_breadcrumb=__webpack_require__(21),_breadcrumb2=_interopRequireDefault(_breadcrumb),_loading=__webpack_require__(398),_loading2=_interopRequireDefault(_loading),_tabs=__webpack_require__(399),_tabs2=_interopRequireDefault(_tabs),_template_box=__webpack_require__(400),_template_box2=_interopRequireDefault(_template_box),_import_template=__webpack_require__(401),_import_template2=_interopRequireDefault(_import_template),_wpJsHooks=__webpack_require__(13),_wpJsHooks2=_interopRequireDefault(_wpJsHooks),_underscore=__webpack_require__(4),_underscore2=_interopRequireDefault(_underscore),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),getEditorUrl=function(id){return"admin.php?page=mailpoet-newsletter-editor&id="+id},templatesCategories=[{name:"standard",label:_mailpoet2.default.I18n.t("tabStandardTitle")},{name:"welcome",label:_mailpoet2.default.I18n.t("tabWelcomeTitle")},{name:"notification",label:_mailpoet2.default.I18n.t("tabNotificationTitle")}];window.mailpoet_woocommerce_active&&templatesCategories.push({name:"woocommerce",label:_mailpoet2.default.I18n.t("tabWoocommerceTitle")}),templatesCategories.push.apply(templatesCategories,[{name:"all",label:_mailpoet2.default.I18n.t("allTemplates")},{name:"recent",label:_mailpoet2.default.I18n.t("recentlySent")},{name:"saved",label:_mailpoet2.default.I18n.t("savedTemplates")}]);var NewsletterTemplates=function(_React$Component){function NewsletterTemplates(props){_classCallCheck(this,NewsletterTemplates);var _this=_possibleConstructorReturn(this,(NewsletterTemplates.__proto__||Object.getPrototypeOf(NewsletterTemplates)).call(this,props));return _this.state={loading:!0,templates:{},emailType:null,selectedTab:""},_this.templates={},_this.addTemplate=_this.addTemplate.bind(_this),_this.afterTemplateDelete=_this.afterTemplateDelete.bind(_this),_this.afterTemplateSelect=_this.afterTemplateSelect.bind(_this),_this.afterTemplateImport=_this.afterTemplateImport.bind(_this),_this}return _inherits(NewsletterTemplates,_React$Component),_createClass(NewsletterTemplates,[{key:"componentWillMount",value:function(){var _this2=this;_mailpoet2.default.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletterTemplates",action:"getAll"}).done(function(response){0===response.data.length&&(response.data=[{name:_mailpoet2.default.I18n.t("mailpoetGuideTemplateTitle"),categories:'["welcome", "notification", "standard", "woocommerce"]',readonly:"1"}]),response.data.forEach(_this2.addTemplate),_this2.sortTemplates()}).fail(function(response){response.errors.length>0&&_mailpoet2.default.Notice.error(response.errors.map(function(error){return error.message}),{scroll:!0})}).always(function(){_this2.selectInitialTab()})}},{key:"addTemplate",value:function(template){var _this3=this,categoriesNames=templatesCategories.map(function(category){return category.name}),categories=void 0;try{categories=JSON.parse(template.categories).filter(function(name){return-1!==categoriesNames.indexOf(name)})}catch(err){categories=[]}0===categories.length&&categories.push("saved"),categories.forEach(function(category){void 0===_this3.templates[category]&&(_this3.templates[category]=[]),_this3.templates[category].unshift(template)})}},{key:"sortTemplates",value:function(){var _this4=this;Object.keys(this.templates).forEach(function(category){_this4.templates[category].sort(function(a,b){return parseInt(a.id,10)<parseInt(b.id,10)?1:-1})})}},{key:"selectInitialTab",value:function(){var _this5=this,emailType=void 0,selectedTab="standard";_mailpoet2.default.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"get",data:{id:this.props.match.params.id}}).done(function(response){emailType=response.data.type,_underscore2.default.findWhere(templatesCategories,{name:response.data.type})&&(selectedTab=response.data.type)}).fail(function(response){response.errors.length>0&&_mailpoet2.default.Notice.error(response.errors.map(function(error){return error.message}),{scroll:!0})}).always(function(){_this5.setState({templates:_this5.templates,emailType:emailType,selectedTab:selectedTab,loading:!1})})}},{key:"afterTemplateDelete",value:function(success,id){var _this6=this;success&&Object.keys(this.templates).forEach(function(category){_this6.templates[category]=_this6.templates[category].filter(function(template){return template.id!==id})}),this.setState({templates:this.templates,loading:!1})}},{key:"afterTemplateSelect",value:function(success,id){success?window.location=getEditorUrl(id):this.setState({loading:!1})}},{key:"afterTemplateImport",value:function(success,template){success&&this.addTemplate(template),this.setState({templates:this.templates,selectedTab:success?"saved":"import",loading:!1})}},{key:"render",value:function(){var _this7=this;if(this.state.loading)return _react2.default.createElement(_loading2.default,null);var tabs=templatesCategories.concat({name:"import",label:_mailpoet2.default.I18n.t("tabImportTitle")}),selectedTab=this.state.selectedTab,content=null;if("import"===selectedTab)content=_react2.default.createElement(_import_template2.default,{beforeImport:function(){return _this7.setState({loading:!0})},afterImport:this.afterTemplateImport});else{var templates=this.state.templates[this.state.selectedTab]||[];templates=0===templates.length?this.state.loading?null:_react2.default.createElement("p",null,_mailpoet2.default.I18n.t("noTemplates")):templates.map(function(template,index){return _react2.default.createElement(_template_box2.default,_extends({key:template.id,index:index,newsletterId:_this7.props.match.params.id,beforeDelete:function(){return _this7.setState({loading:!0})},afterDelete:_this7.afterTemplateDelete,beforeSelect:function(){return _this7.setState({loading:!0})},afterSelect:_this7.afterTemplateSelect},template))}),content=_react2.default.createElement("ul",{className:"mailpoet_boxes clearfix"},templates)}var breadcrumb=_wpJsHooks2.default.applyFilters("mailpoet_newsletters_template_breadcrumb",_react2.default.createElement(_breadcrumb2.default,{step:"template"}),this.state.emailType,"template");return _react2.default.createElement("div",null,_react2.default.createElement("h1",null,_mailpoet2.default.I18n.t("selectTemplateTitle")),breadcrumb,_react2.default.createElement(_tabs2.default,{tabs:tabs,selected:this.state.selectedTab,select:function(name){return _this7.setState({selectedTab:name})}}),content)}}]),NewsletterTemplates}(_react2.default.Component);NewsletterTemplates.propTypes={match:_propTypes2.default.shape({params:_propTypes2.default.shape({id:_propTypes2.default.string}).isRequired}).isRequired},exports.default=NewsletterTemplates},398:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),Loading=function(_React$Component){function Loading(){return _classCallCheck(this,Loading),_possibleConstructorReturn(this,(Loading.__proto__||Object.getPrototypeOf(Loading)).apply(this,arguments))}return _inherits(Loading,_React$Component),_createClass(Loading,[{key:"componentWillMount",value:function(){_mailpoet2.default.Modal.loading(!0)}},{key:"componentWillUnmount",value:function(){_mailpoet2.default.Modal.loading(!1)}},{key:"render",value:function(){return null}}]),Loading}(_react2.default.Component);exports.default=Loading},399:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_reactTooltip=__webpack_require__(158),_reactTooltip2=_interopRequireDefault(_reactTooltip),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_reactStringReplace=__webpack_require__(22),_reactStringReplace2=_interopRequireDefault(_reactStringReplace),tooltipText=(0,_reactStringReplace2.default)(_mailpoet2.default.I18n.t("tooltipTemplateTabs"),/\[link\](.*?)\[\/link\]/g,function(match){return _react2.default.createElement("a",{href:"https://mailpoet.polldaddy.com/s/select-template-feedback",key:"feedback",target:"_blank",rel:"noopener noreferrer"},match)}),Tabs=function(_ref){var tabs=_ref.tabs,selected=_ref.selected,select=_ref.select;return _react2.default.createElement("div",{className:"wp-filter hide-if-no-js"},_react2.default.createElement("ul",{className:"filter-links"},tabs.map(function(_ref2){var name=_ref2.name,label=_ref2.label;return _react2.default.createElement("li",{key:name},_react2.default.createElement("a",{href:"javascript:",className:selected===name?"current":"",onClick:function(){return select(name)}}," ",label))})),_react2.default.createElement("span",{className:"feedback-tooltip newsletter-templates-feedback","data-event":"click","data-tip":!0,"data-for":"feedback-newsletter-templates-tabs"},_mailpoet2.default.I18n.t("feedback")),_react2.default.createElement(_reactTooltip2.default,{globalEventOff:"click",multiline:!0,id:"feedback-newsletter-templates-tabs",efect:"solid",place:"bottom"},_react2.default.createElement("span",{style:{pointerEvents:"all",display:"inline-block"}},tooltipText)))};Tabs.propTypes={selected:_propTypes2.default.string.isRequired,select:_propTypes2.default.func.isRequired,tabs:_propTypes2.default.arrayOf(_propTypes2.default.shape({label:_propTypes2.default.string.isRequired,name:_propTypes2.default.string.isRequired}).isRequired).isRequired},exports.default=Tabs},400:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_confirm_alert=__webpack_require__(292),_confirm_alert2=_interopRequireDefault(_confirm_alert),TemplateBox=function(_React$Component){function TemplateBox(props){_classCallCheck(this,TemplateBox);var _this=_possibleConstructorReturn(this,(TemplateBox.__proto__||Object.getPrototypeOf(TemplateBox)).call(this,props));return _this.onPreview=_this.onPreview.bind(_this),_this.onDelete=_this.onDelete.bind(_this),_this.onSelect=_this.onSelect.bind(_this),_this}return _inherits(TemplateBox,_React$Component),_createClass(TemplateBox,[{key:"onDelete",value:function(){var _props=this.props,id=_props.id,name=_props.name,beforeDelete=_props.beforeDelete,afterDelete=_props.afterDelete,onConfirm=function(){beforeDelete(),_mailpoet2.default.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletterTemplates",action:"delete",data:{id:id}}).done(function(){afterDelete(!0,id)}).fail(function(response){response.errors.length>0&&_mailpoet2.default.Notice.error(response.errors.map(function(error){return error.message}),{scroll:!0}),afterDelete(!1)})};(0,_confirm_alert2.default)({message:_mailpoet2.default.I18n.t("confirmTemplateDeletion").replace("%$1s",name),onConfirm:onConfirm})}},{key:"onPreview",value:function(){_mailpoet2.default.Modal.popup({title:this.props.name,template:'<div class="mailpoet_boxes_preview" style="background-color: {{ body.globalStyles.body.backgroundColor }}"><img src="{{ thumbnail }}" /></div>',data:this.props})}},{key:"onSelect",value:function(){var _props2=this.props,newsletterId=_props2.newsletterId,name=_props2.name,beforeSelect=_props2.beforeSelect,afterSelect=_props2.afterSelect;beforeSelect(),_mailpoet2.default.trackEvent("Emails > Template selected",{"MailPoet Free version":window.mailpoet_version,"Email name":name}),_mailpoet2.default.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"save",data:{id:newsletterId,template_id:this.props.id}}).done(function(response){afterSelect(!0,response.data.id)}).fail(function(response){response.errors.length>0&&_mailpoet2.default.Notice.error(response.errors.map(function(error){return error.message}),{scroll:!0}),afterSelect(!1)})}},{key:"render",value:function(){var _props3=this.props,index=_props3.index,name=_props3.name,thumbnail=_props3.thumbnail,readonly=_props3.readonly,deleteLink=_react2.default.createElement("div",{className:"mailpoet_delete button button-secondary"},_react2.default.createElement("a",{href:"javascript:;",onClick:this.onDelete},_mailpoet2.default.I18n.t("delete"))),preview="";return"string"==typeof thumbnail&&thumbnail.length>0&&(preview=_react2.default.createElement("a",{href:"javascript:;",onClick:this.onPreview},_react2.default.createElement("img",{src:thumbnail,alt:_mailpoet2.default.I18n.t("templatePreview")}),_react2.default.createElement("div",{className:"mailpoet_overlay"},_react2.default.createElement("p",{className:"mailpoet_more_details"},_mailpoet2.default.I18n.t("zoom"))))),_react2.default.createElement("li",{className:"mailpoet_template_boxes","data-automation-id":"select_template_box"},_react2.default.createElement("div",{className:"mailpoet_thumbnail"},preview),_react2.default.createElement("div",{className:"mailpoet_description"},_react2.default.createElement("h3",null,name)),_react2.default.createElement("div",{className:"mailpoet_actions"},"1"!==readonly&&deleteLink,_react2.default.createElement("a",{className:"button button-primary","data-automation-id":"select_template_"+index,onClick:this.onSelect,role:"button",tabIndex:0}," ",_mailpoet2.default.I18n.t("select")," ")))}}]),TemplateBox}(_react2.default.Component);TemplateBox.propTypes={index:_propTypes2.default.number.isRequired,id:_propTypes2.default.string.isRequired,newsletterId:_propTypes2.default.string.isRequired,name:_propTypes2.default.string.isRequired,thumbnail:_propTypes2.default.string.isRequired,readonly:_propTypes2.default.string.isRequired,beforeDelete:_propTypes2.default.func.isRequired,afterDelete:_propTypes2.default.func.isRequired,beforeSelect:_propTypes2.default.func.isRequired,afterSelect:_propTypes2.default.func.isRequired},exports.default=TemplateBox},401:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_underscore=__webpack_require__(4),_underscore2=_interopRequireDefault(_underscore),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_helpTooltip=__webpack_require__(157),_helpTooltip2=_interopRequireDefault(_helpTooltip),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),ImportTemplate=function(_React$Component){function ImportTemplate(props){_classCallCheck(this,ImportTemplate);var _this=_possibleConstructorReturn(this,(ImportTemplate.__proto__||Object.getPrototypeOf(ImportTemplate)).call(this,props));return _this.fileRef=_react2.default.createRef(),_this.handleSubmit=_this.handleSubmit.bind(_this),_this}return _inherits(ImportTemplate,_React$Component),_createClass(ImportTemplate,[{key:"saveTemplate",value:function(_saveTemplate){var template=_saveTemplate,_props=this.props,beforeImport=_props.beforeImport,afterImport=_props.afterImport;_underscore2.default.isUndefined(template.body)||(template.body=JSON.stringify(template.body));try{template.categories=JSON.parse(template.categories)}catch(err){template.categories=[]}-1===template.categories.indexOf("saved")&&template.categories.push("saved"),-1===template.categories.indexOf("standard")&&-1===template.categories.indexOf("welcome")&&-1===template.categories.indexOf("notification")&&template.categories.push("standard"),template.categories=JSON.stringify(template.categories),beforeImport(),_mailpoet2.default.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletterTemplates",action:"save",data:template}).done(function(response){afterImport(!0,response.data)}).fail(function(response){response.errors.length>0&&_mailpoet2.default.Notice.error(response.errors.map(function(error){return error.message}),{scroll:!0}),afterImport(!1)})}},{key:"handleSubmit",value:function(e){var _this2=this;if(e.preventDefault(),_underscore2.default.size(this.fileRef.current.files)<=0)return!1;var file=_underscore2.default.first(this.fileRef.current.files),reader=new FileReader;return reader.onload=function(evt){try{_this2.saveTemplate(JSON.parse(evt.target.result)),_mailpoet2.default.trackEvent("Emails > Template imported",{"MailPoet Free version":window.mailpoet_version})}catch(err){_mailpoet2.default.Notice.error(_mailpoet2.default.I18n.t("templateFileMalformedError"))}},reader.readAsText(file),!0}},{key:"render",value:function(){return _react2.default.createElement("div",null,_react2.default.createElement("h2",null,_mailpoet2.default.I18n.t("importTemplateTitle"),_react2.default.createElement(_helpTooltip2.default,{tooltip:_mailpoet2.default.I18n.t("helpTooltipTemplateUpload"),place:"right",className:"tooltip-help-import-template"})),_react2.default.createElement("form",{onSubmit:this.handleSubmit},_react2.default.createElement("input",{type:"file",placeholder:_mailpoet2.default.I18n.t("selectJsonFileToUpload"),ref:this.fileRef}),_react2.default.createElement("p",{className:"submit"},_react2.default.createElement("input",{className:"button button-primary",type:"submit",value:_mailpoet2.default.I18n.t("upload")}))))}}]),ImportTemplate}(_react2.default.Component);ImportTemplate.propTypes={beforeImport:_propTypes2.default.func.isRequired,afterImport:_propTypes2.default.func.isRequired},exports.default=ImportTemplate},402:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_createReactClass=__webpack_require__(32),_createReactClass2=_interopRequireDefault(_createReactClass),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_underscore=__webpack_require__(4),_underscore2=_interopRequireDefault(_underscore),_breadcrumb=__webpack_require__(21),_breadcrumb2=_interopRequireDefault(_breadcrumb),_form=__webpack_require__(187),_form2=_interopRequireDefault(_form),_standard=__webpack_require__(403),_standard2=_interopRequireDefault(_standard),_notification=__webpack_require__(407),_notification2=_interopRequireDefault(_notification),_welcome=__webpack_require__(408),_welcome2=_interopRequireDefault(_welcome),_helpTooltip=__webpack_require__(157),_helpTooltip2=_interopRequireDefault(_helpTooltip),_jquery=__webpack_require__(5),_jquery2=_interopRequireDefault(_jquery),_thumbnail=__webpack_require__(294),_wpJsHooks=__webpack_require__(13),_wpJsHooks2=_interopRequireDefault(_wpJsHooks),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_reactRouterDom=__webpack_require__(7),NewsletterSend=(0,_createReactClass2.default)({displayName:"NewsletterSend",propTypes:{match:_propTypes2.default.shape({params:_propTypes2.default.shape({id:_propTypes2.default.string}).isRequired}).isRequired,history:_propTypes2.default.shape({push:_propTypes2.default.func.isRequired}).isRequired},getInitialState:function(){return{fields:[],item:{},loading:!0}},componentDidMount:function(){this.loadItem(this.props.match.params.id),(0,_jquery2.default)("#mailpoet_newsletter").parsley()},componentWillReceiveProps:function(props){this.loadItem(props.match.params.id)},getFieldsByNewsletter:function(newsletter){return this.getSubtype(newsletter).getFields(newsletter)},getSendButtonOptions:function(){return this.getSubtype(this.state.item).getSendButtonOptions(this.state.item)},getSubtype:function(newsletter){switch(newsletter.type){case"notification":return _notification2.default;case"welcome":return _welcome2.default;default:return _wpJsHooks2.default.applyFilters("mailpoet_newsletters_send_newsletter_fields",_standard2.default,newsletter)}},isValid:function(){return(0,_jquery2.default)("#mailpoet_newsletter").parsley().isValid()},loadItem:function(id){var _this=this;this.setState({loading:!0}),_mailpoet2.default.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"get",data:{id:id}}).done(function(response){_this.setState({loading:!1,item:response.data,fields:_this.getFieldsByNewsletter(response.data)})}).fail(function(){_this.setState({loading:!1,item:{}},function(){_this.props.history.push("/new")})})},saveTemplate:function(response,done){var _this2=this;(0,_thumbnail.fromUrl)(response.meta.preview_url).then(function(thumbnail){_mailpoet2.default.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletterTemplates",action:"save",data:{newsletter_id:response.data.id,name:response.data.subject,thumbnail:thumbnail,body:JSON.stringify(response.data.body),categories:'["recent"]'}}).then(done).fail(function(err){_this2.showError(err),_this2.setState({loading:!1}),_mailpoet2.default.Modal.loading(!1),done()})}).catch(function(err){_this2.showError({errors:[err]})})},handleSend:function(e){var _this3=this;return e.preventDefault(),this.isValid()?(_mailpoet2.default.Modal.loading(!0),this.saveNewsletter(e).done(function(){_this3.setState({loading:!0})}).done(function(response){switch(response.data.type){case"notification":case"welcome":return _this3.activateNewsletter(response);default:return _this3.sendNewsletter(response)}}).fail(function(err){_this3.showError(err),_this3.setState({loading:!1}),_mailpoet2.default.Modal.loading(!1)})):(0,_jquery2.default)("#mailpoet_newsletter").parsley().validate()},sendNewsletter:function(newsletter){var _this4=this;return _mailpoet2.default.Ajax.post(_wpJsHooks2.default.applyFilters("mailpoet_newsletters_send_server_request_parameters",{api_version:window.mailpoet_api_version,endpoint:"sendingQueue",action:"add",data:{newsletter_id:this.state.item.id}},this.state.item)).done(function(response){_this4.saveTemplate(newsletter,function(){if(window.mailpoet_show_congratulate_after_first_newsletter)return _mailpoet2.default.Modal.loading(!1),void _this4.props.history.push("/send/congratulate/"+_this4.state.item.id);_this4.props.history.push(_wpJsHooks2.default.applyFilters("mailpoet_newsletters_send_server_request_response_redirect","/"+(_this4.state.item.type||""),_this4.state.item));var customResponse=_wpJsHooks2.default.applyFilters("mailpoet_newsletters_send_server_request_response",_this4.state.item,response);_underscore2.default.isFunction(customResponse)?customResponse():"scheduled"===response.data.status?(_mailpoet2.default.Notice.success(_mailpoet2.default.I18n.t("newsletterHasBeenScheduled")),_mailpoet2.default.trackEvent("Emails > Newsletter sent",{scheduled:!0,"MailPoet Free version":window.mailpoet_version})):(_mailpoet2.default.Notice.success(_mailpoet2.default.I18n.t("newsletterBeingSent")),_mailpoet2.default.trackEvent("Emails > Newsletter sent",{scheduled:!1,"MailPoet Free version":window.mailpoet_version})),_mailpoet2.default.Modal.loading(!1)})}).fail(function(err){_this4.showError(err),_this4.setState({loading:!1}),_mailpoet2.default.Modal.loading(!1)})},activateNewsletter:function(newsletter){var _this5=this;return _mailpoet2.default.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"setStatus",data:{id:this.props.match.params.id,status:"active"}}).done(function(response){_this5.saveTemplate(newsletter,function(){if(window.mailpoet_show_congratulate_after_first_newsletter)return _mailpoet2.default.Modal.loading(!1),void _this5.props.history.push("/send/congratulate/"+_this5.state.item.id);_this5.props.history.push("/"+(_this5.state.item.type||""));var opts=_this5.state.item.options;"welcome"===response.data.type?(_mailpoet2.default.Notice.success(_mailpoet2.default.I18n.t("welcomeEmailActivated")),_mailpoet2.default.trackEvent("Emails > Welcome email activated",{"MailPoet Free version":window.mailpoet_version,"List type":opts.event,Delay:opts.afterTimeNumber+" "+opts.afterTimeType})):"notification"===response.data.type&&(_mailpoet2.default.Notice.success(_mailpoet2.default.I18n.t("postNotificationActivated")),_mailpoet2.default.trackEvent("Emails > Post notifications activated",{"MailPoet Free version":window.mailpoet_version,Frequency:opts.intervalType})),_mailpoet2.default.Modal.loading(!1)})}).fail(function(err){_this5.showError(err),_this5.setState({loading:!1}),_mailpoet2.default.Modal.loading(!1)})},handleResume:function(e){var _this6=this;return e.preventDefault(),this.isValid()?this.saveNewsletter(e).done(function(){_this6.setState({loading:!0})}).done(function(){_mailpoet2.default.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"sendingQueue",action:"resume",data:{newsletter_id:_this6.state.item.id}}).done(function(){_this6.props.history.push("/"+(_this6.state.item.type||"")),_mailpoet2.default.Notice.success(_mailpoet2.default.I18n.t("newsletterSendingHasBeenResumed"))}).fail(function(response){response.errors.length>0&&_mailpoet2.default.Notice.error(response.errors.map(function(error){return error.message}),{scroll:!0})})}).fail(function(err){_this6.showError(err)}).always(function(){_this6.setState({loading:!1})}):(0,_jquery2.default)("#mailpoet_newsletter").parsley().validate(),!1},handleSave:function(e){var _this7=this;e.preventDefault(),this.saveNewsletter(e).done(function(){_mailpoet2.default.Notice.success(_mailpoet2.default.I18n.t("newsletterUpdated"))}).done(function(){_this7.props.history.push("/"+(_this7.state.item.type||""))}).fail(function(err){_this7.showError(err)})},handleRedirectToDesign:function(e){var _this8=this;e.preventDefault();var redirectTo=e.target.href;this.saveNewsletter(e).done(function(){_mailpoet2.default.Notice.success(_mailpoet2.default.I18n.t("newsletterUpdated"))}).done(function(){window.location=redirectTo}).fail(function(err){_this8.showError(err)})},saveNewsletter:function(){var data=this.state.item;data.queue=void 0,this.setState({loading:!0});var IGNORED_NEWSLETTER_PROPERTIES=["preheader","body","created_at","deleted_at","hash","status","updated_at","type"],newsletterData=_underscore2.default.omit(data,IGNORED_NEWSLETTER_PROPERTIES);return _mailpoet2.default.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"save",data:newsletterData})},showError:function(response){response.errors.length>0&&_mailpoet2.default.Notice.error(response.errors.map(function(error){return error.message}),{scroll:!0})},handleFormChange:function(e){var item=this.state.item;return item[e.target.name]=e.target.value,this.setState({item:item}),!0},render:function(){var isPaused="sending"===this.state.item.status&&this.state.item.queue&&"paused"===this.state.item.queue.status,fields=this.state.fields.map(function(field){var newField=field;return"segments"!==field.name&&"options"!==field.name||(newField.disabled=isPaused),newField}),sendButtonOptions=this.getSendButtonOptions(),breadcrumb=_wpJsHooks2.default.applyFilters("mailpoet_newsletters_send_breadcrumb",_react2.default.createElement(_breadcrumb2.default,{step:"send"}),this.state.item.type,"send");return _react2.default.createElement("div",null,_react2.default.createElement("h1",null,_mailpoet2.default.I18n.t("finalNewsletterStep")),breadcrumb,_react2.default.createElement(_form2.default,{id:"mailpoet_newsletter",fields:fields,automationId:"newsletter_send_form",item:this.state.item,loading:this.state.loading,onChange:this.handleFormChange,onSubmit:this.handleSave},_react2.default.createElement("p",{className:"submit"},isPaused?_react2.default.createElement("input",{className:"button button-primary",type:"button",onClick:this.handleResume,value:_mailpoet2.default.I18n.t("resume")}):_react2.default.createElement("input",_extends({className:"button button-primary",type:"button",onClick:this.handleSend,value:_mailpoet2.default.I18n.t("send")},sendButtonOptions))," ",_react2.default.createElement("input",{className:"button button-secondary",type:"submit",value:_mailpoet2.default.I18n.t("saveDraftAndClose")})," ",_mailpoet2.default.I18n.t("orSimply")," ",_react2.default.createElement("a",{href:"?page=mailpoet-newsletter-editor&id="+this.props.match.params.id,onClick:this.handleRedirectToDesign},_mailpoet2.default.I18n.t("goBackToDesign")),"."),!isPaused&&sendButtonOptions.disabled&&"disabled"===sendButtonOptions.disabled&&_react2.default.createElement(_helpTooltip2.default,{tooltip:_mailpoet2.default.I18n.t("helpTooltipSendEmail"),tooltipId:"helpTooltipSendEmail"})))}});module.exports=(0,_reactRouterDom.withRouter)(NewsletterSend)},403:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_underscore=__webpack_require__(4),_underscore2=_interopRequireDefault(_underscore),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_wpJsHooks=__webpack_require__(13),_wpJsHooks2=_interopRequireDefault(_wpJsHooks),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_date_time=__webpack_require__(404),_date_time2=_interopRequireDefault(_date_time),currentTime=window.mailpoet_current_time||"00:00",defaultDateTime=window.mailpoet_current_date+" 00:00:00",timeOfDayItems=window.mailpoet_schedule_time_of_day,dateDisplayFormat=window.mailpoet_date_display_format,dateStorageFormat=window.mailpoet_date_storage_format,StandardScheduling=function(_React$Component){function StandardScheduling(){var _ref,_temp,_this,_ret;_classCallCheck(this,StandardScheduling);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=_possibleConstructorReturn(this,(_ref=StandardScheduling.__proto__||Object.getPrototypeOf(StandardScheduling)).call.apply(_ref,[this].concat(args))),_this.getCurrentValue=function(){var schedulingOptions={isScheduled:"0",scheduledAt:defaultDateTime};return _underscore2.default.defaults(_this.props.item[_this.props.field.name]||{},schedulingOptions)},_this.getDateValidation=function(){return{"data-parsley-required":!0,"data-parsley-required-message":_mailpoet2.default.I18n.t("noScheduledDateError"),"data-parsley-errors-container":"#mailpoet_scheduling"}},_this.isScheduled=function(){return"1"===_this.getCurrentValue().isScheduled},_this.handleCheckboxChange=function(event){var changeEvent=event;return changeEvent.target.value=event.target.checked?"1":"0",_this.handleValueChange(changeEvent)},_this.handleValueChange=function(event){var oldValue=_this.getCurrentValue(),newValue={};return newValue[event.target.name]=event.target.value,_this.props.onValueChange({target:{name:_this.props.field.name,value:_underscore2.default.extend({},oldValue,newValue)}})},_ret=_temp,_possibleConstructorReturn(_this,_ret)}return _inherits(StandardScheduling,_React$Component),_createClass(StandardScheduling,[{key:"render",value:function(){var schedulingOptions=void 0;return this.isScheduled()&&(schedulingOptions=_react2.default.createElement("span",{id:"mailpoet_scheduling"},_react2.default.createElement(_date_time2.default,{name:"scheduledAt",value:this.getCurrentValue().scheduledAt,onChange:this.handleValueChange,disabled:this.props.field.disabled,dateValidation:this.getDateValidation(),defaultDateTime:defaultDateTime,timeOfDayItems:timeOfDayItems,dateDisplayFormat:dateDisplayFormat,dateStorageFormat:dateStorageFormat})," ",_react2.default.createElement("span",null,_mailpoet2.default.I18n.t("websiteTimeIs")," ",_react2.default.createElement("code",null,currentTime)))),_react2.default.createElement("div",null,_react2.default.createElement("input",{type:"checkbox",value:"1",checked:this.isScheduled(),disabled:this.props.field.disabled,name:"isScheduled",onChange:this.handleCheckboxChange}),schedulingOptions)}}]),StandardScheduling}(_react2.default.Component);StandardScheduling.propTypes={item:_propTypes2.default.object,field:_propTypes2.default.shape({name:_propTypes2.default.string.isRequired,disabled:_propTypes2.default.bool}).isRequired,onValueChange:_propTypes2.default.func.isRequired},StandardScheduling.defaultProps={item:{}};var fields=[{name:"subject",label:_mailpoet2.default.I18n.t("subjectLine"),tip:_mailpoet2.default.I18n.t("subjectLineTip"),type:"text",validation:{"data-parsley-required":!0,"data-parsley-required-message":_mailpoet2.default.I18n.t("emptySubjectLineError")}},{name:"segments",label:_mailpoet2.default.I18n.t("segments"),tip:_mailpoet2.default.I18n.t("segmentsTip"),type:"selection",placeholder:_mailpoet2.default.I18n.t("selectSegmentPlaceholder"),id:"mailpoet_segments",api_version:window.mailpoet_api_version,endpoint:"segments",multiple:!0,filter:function(segment){return!segment.deleted_at},getLabel:function(segment){return segment.name+" ("+parseInt(segment.subscribers,10).toLocaleString()+")"},transformChangedValue:function(segmentIds){var allSegments=this.getItems();return _underscore2.default.map(segmentIds,function(id){return _underscore2.default.find(allSegments,function(segment){return segment.id===id})})},validation:{"data-parsley-required":!0,"data-parsley-required-message":_mailpoet2.default.I18n.t("noSegmentsSelectedError")}},{name:"sender",label:_mailpoet2.default.I18n.t("sender"),tip:_mailpoet2.default.I18n.t("senderTip"),fields:[{name:"sender_name",type:"text",placeholder:_mailpoet2.default.I18n.t("senderNamePlaceholder"),validation:{"data-parsley-required":!0}},{name:"sender_address",type:"text",placeholder:_mailpoet2.default.I18n.t("senderAddressPlaceholder"),validation:{"data-parsley-required":!0,"data-parsley-type":"email"}}]},{name:"reply-to",label:_mailpoet2.default.I18n.t("replyTo"),tip:_mailpoet2.default.I18n.t("replyToTip"),inline:!0,fields:[{name:"reply_to_name",type:"text",placeholder:_mailpoet2.default.I18n.t("replyToNamePlaceholder")},{name:"reply_to_address",type:"text",placeholder:_mailpoet2.default.I18n.t("replyToAddressPlaceholder"),validation:{"data-parsley-type":"email"}}]},{name:"options",label:_mailpoet2.default.I18n.t("scheduleIt"),type:"reactComponent",component:StandardScheduling}];fields=_wpJsHooks2.default.applyFilters("mailpoet_newsletters_3rd_step_fields",fields),module.exports={getFields:function(){return fields},getSendButtonOptions:function(newsletter){var newsletterOptions=newsletter||{},isScheduled="object"===_typeof(newsletterOptions.options)&&"1"===newsletterOptions.options.isScheduled,options={value:isScheduled?_mailpoet2.default.I18n.t("schedule"):_mailpoet2.default.I18n.t("send")};return"sent"!==newsletterOptions.status&&"sending"!==newsletterOptions.status||(options.disabled="disabled"),options}}},404:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_date_text=__webpack_require__(405),_date_text2=_interopRequireDefault(_date_text),_time_select=__webpack_require__(406),_time_select2=_interopRequireDefault(_time_select),DateTime=function(_React$Component){function DateTime(props){_classCallCheck(this,DateTime);var _this=_possibleConstructorReturn(this,(DateTime.__proto__||Object.getPrototypeOf(DateTime)).call(this,props));return _initialiseProps.call(_this),_this.state=_this.buildStateFromProps(props),_this}return _inherits(DateTime,_React$Component),_createClass(DateTime,[{key:"componentWillReceiveProps",value:function(nextProps){this.setState(this.buildStateFromProps(nextProps))}},{key:"render",value:function(){return _react2.default.createElement("span",null,_react2.default.createElement(_date_text2.default,{name:"date",value:this.state.date,onChange:this.handleChange,displayFormat:this.props.dateDisplayFormat,storageFormat:this.props.dateStorageFormat,disabled:this.props.disabled,validation:this.props.dateValidation}),_react2.default.createElement(_time_select2.default,{name:"time",value:this.state.time,onChange:this.handleChange,disabled:this.props.disabled,validation:this.props.timeValidation,timeOfDayItems:this.props.timeOfDayItems}))}}]),DateTime}(_react2.default.Component),_initialiseProps=function(){var _this2=this;this.getDateTime=function(){return[_this2.state.date,_this2.state.time].join(_this2.DATE_TIME_SEPARATOR)},this.DATE_TIME_SEPARATOR=" ",this.buildStateFromProps=function(props){var value=props.value||_this2.props.defaultDateTime,_value$split=value.split(_this2.DATE_TIME_SEPARATOR),_value$split2=_slicedToArray(_value$split,2);return{date:_value$split2[0],time:_value$split2[1]}},this.handleChange=function(event){var newState={};newState[event.target.name]=event.target.value,_this2.setState(newState,_this2.propagateChange)},this.propagateChange=function(){_this2.props.onChange&&_this2.props.onChange({target:{name:_this2.props.name||"",value:_this2.getDateTime()}})}};DateTime.propTypes={defaultDateTime:_propTypes2.default.string.isRequired,dateDisplayFormat:_propTypes2.default.string.isRequired,dateStorageFormat:_propTypes2.default.string.isRequired,onChange:_propTypes2.default.func,name:_propTypes2.default.string,disabled:_propTypes2.default.bool,dateValidation:_propTypes2.default.object.isRequired,timeValidation:_propTypes2.default.any,timeOfDayItems:_propTypes2.default.objectOf(_propTypes2.default.string).isRequired},DateTime.defaultProps={onChange:void 0,name:"",disabled:!1,timeValidation:void 0},module.exports=DateTime},405:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_jquery=__webpack_require__(5),_jquery2=_interopRequireDefault(_jquery),_underscore=__webpack_require__(4),_underscore2=_interopRequireDefault(_underscore),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),datepickerTranslations={closeText:_mailpoet2.default.I18n.t("close"),currentText:_mailpoet2.default.I18n.t("today"),nextText:_mailpoet2.default.I18n.t("next"),prevText:_mailpoet2.default.I18n.t("previous"),monthNames:[_mailpoet2.default.I18n.t("january"),_mailpoet2.default.I18n.t("february"),_mailpoet2.default.I18n.t("march"),_mailpoet2.default.I18n.t("april"),_mailpoet2.default.I18n.t("may"),_mailpoet2.default.I18n.t("june"),_mailpoet2.default.I18n.t("july"),_mailpoet2.default.I18n.t("august"),_mailpoet2.default.I18n.t("september"),_mailpoet2.default.I18n.t("october"),_mailpoet2.default.I18n.t("november"),_mailpoet2.default.I18n.t("december")],monthNamesShort:[_mailpoet2.default.I18n.t("januaryShort"),_mailpoet2.default.I18n.t("februaryShort"),_mailpoet2.default.I18n.t("marchShort"),_mailpoet2.default.I18n.t("aprilShort"),_mailpoet2.default.I18n.t("mayShort"),_mailpoet2.default.I18n.t("juneShort"),_mailpoet2.default.I18n.t("julyShort"),_mailpoet2.default.I18n.t("augustShort"),_mailpoet2.default.I18n.t("septemberShort"),_mailpoet2.default.I18n.t("octoberShort"),_mailpoet2.default.I18n.t("novemberShort"),_mailpoet2.default.I18n.t("decemberShort")],dayNames:[_mailpoet2.default.I18n.t("sunday"),_mailpoet2.default.I18n.t("monday"),_mailpoet2.default.I18n.t("tuesday"),_mailpoet2.default.I18n.t("wednesday"),_mailpoet2.default.I18n.t("thursday"),_mailpoet2.default.I18n.t("friday"),_mailpoet2.default.I18n.t("saturday")],dayNamesShort:[_mailpoet2.default.I18n.t("sundayShort"),_mailpoet2.default.I18n.t("mondayShort"),_mailpoet2.default.I18n.t("tuesdayShort"),_mailpoet2.default.I18n.t("wednesdayShort"),_mailpoet2.default.I18n.t("thursdayShort"),_mailpoet2.default.I18n.t("fridayShort"),_mailpoet2.default.I18n.t("saturdayShort")],dayNamesMin:[_mailpoet2.default.I18n.t("sundayMin"),_mailpoet2.default.I18n.t("mondayMin"),_mailpoet2.default.I18n.t("tuesdayMin"),_mailpoet2.default.I18n.t("wednesdayMin"),_mailpoet2.default.I18n.t("thursdayMin"),_mailpoet2.default.I18n.t("fridayMin"),_mailpoet2.default.I18n.t("saturdayMin")]},DateText=function(_React$Component){function DateText(props){_classCallCheck(this,DateText);var _this=_possibleConstructorReturn(this,(DateText.__proto__||Object.getPrototypeOf(DateText)).call(this,props));return _this.onChange=function(event){var changeEvent=event,displayDate=changeEvent.target.value,storageDate=_this.getStorageDate(displayDate);changeEvent.target.value=storageDate,_this.props.onChange(changeEvent)},_this.getFieldName=function(){return _this.props.name||"date"},_this.getDisplayDate=function(date){var formatting={parseFormat:_this.props.storageFormat,format:_this.props.displayFormat};return _mailpoet2.default.Date.format(date,formatting)},_this.getStorageDate=function(date){var formatting={parseFormat:_this.props.displayFormat,format:_this.props.storageFormat};return _mailpoet2.default.Date.format(date,formatting)},_this.dateInput=_react2.default.createRef(),_this}return _inherits(DateText,_React$Component),_createClass(DateText,[{key:"componentDidMount",value:function(){var $element=(0,_jquery2.default)(this.dateInput.current),that=this;$element.datepicker&&(_jquery2.default.datepicker.parseDate=function(format,value){return _mailpoet2.default.Date.toDate(value,{parseFormat:this.props.displayFormat,format:format})},_jquery2.default.datepicker.formatDate=function(format,value){return _mailpoet2.default.Date.format(value,{format:format})},$element.datepicker(_underscore2.default.extend({dateFormat:this.props.displayFormat,isRTL:!1,onSelect:function(value){that.onChange({target:{name:that.getFieldName(),value:value}})}},datepickerTranslations)),this.datepickerInitialized=!0)}},{key:"componentWillUnmount",value:function(){this.datepickerInitialized&&(0,_jquery2.default)(this.dateInput.current).datepicker("destroy")}},{key:"render",value:function(){return _react2.default.createElement("input",_extends({type:"text",size:"30",name:this.getFieldName(),value:this.getDisplayDate(this.props.value),readOnly:!0,disabled:this.props.disabled,onChange:this.onChange,ref:this.dateInput},this.props.validation))}}]),DateText}(_react2.default.Component);DateText.propTypes={displayFormat:_propTypes2.default.string.isRequired,onChange:_propTypes2.default.func.isRequired,name:_propTypes2.default.string,storageFormat:_propTypes2.default.string.isRequired,value:_propTypes2.default.string.isRequired,disabled:_propTypes2.default.bool.isRequired,validation:_propTypes2.default.object.isRequired},DateText.defaultProps={name:"date"},module.exports=DateText},406:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),TimeSelect=function(_React$Component){function TimeSelect(){return _classCallCheck(this,TimeSelect),_possibleConstructorReturn(this,(TimeSelect.__proto__||Object.getPrototypeOf(TimeSelect)).apply(this,arguments))}return _inherits(TimeSelect,_React$Component),_createClass(TimeSelect,[{key:"render",value:function(){var _this2=this,options=Object.keys(this.props.timeOfDayItems).map(function(value){return _react2.default.createElement("option",{key:"option-"+_this2.props.timeOfDayItems[value],value:value},_this2.props.timeOfDayItems[value])});return _react2.default.createElement("select",_extends({name:this.props.name||"time",value:this.props.value,disabled:this.props.disabled,onChange:this.props.onChange},this.props.validation),options)}}]),TimeSelect}(_react2.default.Component);TimeSelect.propTypes={timeOfDayItems:_propTypes2.default.objectOf(_propTypes2.default.string).isRequired,name:_propTypes2.default.string,value:_propTypes2.default.string.isRequired,disabled:_propTypes2.default.bool,onChange:_propTypes2.default.func.isRequired,validation:_propTypes2.default.object},TimeSelect.defaultProps={name:"time",disabled:!1,validation:{}},module.exports=TimeSelect},407:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _underscore=__webpack_require__(4),_underscore2=_interopRequireDefault(_underscore),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_wpJsHooks=__webpack_require__(13),_wpJsHooks2=_interopRequireDefault(_wpJsHooks),_scheduling=__webpack_require__(293),_scheduling2=_interopRequireDefault(_scheduling),fields=[{name:"subject",label:_mailpoet2.default.I18n.t("subjectLine"),tip:_mailpoet2.default.I18n.t("postNotificationSubjectLineTip"),type:"text",validation:{"data-parsley-required":!0,"data-parsley-required-message":_mailpoet2.default.I18n.t("emptySubjectLineError")}},{name:"options",label:_mailpoet2.default.I18n.t("selectFrequency"),type:"reactComponent",component:_scheduling2.default},{name:"segments",label:_mailpoet2.default.I18n.t("segments"),tip:_mailpoet2.default.I18n.t("segmentsTip"),type:"selection",placeholder:_mailpoet2.default.I18n.t("selectSegmentPlaceholder"),id:"mailpoet_segments",api_version:window.mailpoet_api_version,endpoint:"segments",multiple:!0,filter:function(segment){return!segment.deleted_at},getLabel:function(segment){return segment.name+" ("+parseInt(segment.subscribers,10).toLocaleString()+")"},transformChangedValue:function(segmentIds){var allSegments=this.getItems();return _underscore2.default.map(segmentIds,function(id){return _underscore2.default.find(allSegments,function(segment){return segment.id===id})})},validation:{"data-parsley-required":!0,"data-parsley-required-message":_mailpoet2.default.I18n.t("noSegmentsSelectedError")}},{name:"sender",label:_mailpoet2.default.I18n.t("sender"),tip:_mailpoet2.default.I18n.t("senderTip"),fields:[{name:"sender_name",type:"text",placeholder:_mailpoet2.default.I18n.t("senderNamePlaceholder"),validation:{"data-parsley-required":!0}},{name:"sender_address",type:"text",placeholder:_mailpoet2.default.I18n.t("senderAddressPlaceholder"),validation:{"data-parsley-required":!0,"data-parsley-type":"email"}}]},{name:"reply-to",label:_mailpoet2.default.I18n.t("replyTo"),tip:_mailpoet2.default.I18n.t("replyToTip"),inline:!0,fields:[{name:"reply_to_name",type:"text",placeholder:_mailpoet2.default.I18n.t("replyToNamePlaceholder")},{name:"reply_to_address",type:"text",placeholder:_mailpoet2.default.I18n.t("replyToAddressPlaceholder"),validation:{"data-parsley-type":"email"}}]}];fields=_wpJsHooks2.default.applyFilters("mailpoet_newsletters_3rd_step_fields",fields),module.exports={getFields:function(){return fields},getSendButtonOptions:function(){return{value:_mailpoet2.default.I18n.t("activate")}}}},408:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_wpJsHooks=__webpack_require__(13),_wpJsHooks2=_interopRequireDefault(_wpJsHooks),_scheduling=__webpack_require__(268),_scheduling2=_interopRequireDefault(_scheduling),fields=[{name:"subject",label:_mailpoet2.default.I18n.t("subjectLine"),tip:_mailpoet2.default.I18n.t("subjectLineTip"),type:"text",validation:{"data-parsley-required":!0,"data-parsley-required-message":_mailpoet2.default.I18n.t("emptySubjectLineError")}},{name:"options",label:_mailpoet2.default.I18n.t("sendWelcomeEmailWhen"),type:"reactComponent",component:_scheduling2.default},{name:"sender",label:_mailpoet2.default.I18n.t("sender"),tip:_mailpoet2.default.I18n.t("senderTip"),fields:[{name:"sender_name",type:"text",placeholder:_mailpoet2.default.I18n.t("senderNamePlaceholder"),validation:{"data-parsley-required":!0}},{name:"sender_address",type:"text",placeholder:_mailpoet2.default.I18n.t("senderAddressPlaceholder"),validation:{"data-parsley-required":!0,"data-parsley-type":"email"}}]},{name:"reply-to",label:_mailpoet2.default.I18n.t("replyTo"),tip:_mailpoet2.default.I18n.t("replyToTip"),inline:!0,fields:[{name:"reply_to_name",type:"text",placeholder:_mailpoet2.default.I18n.t("replyToNamePlaceholder")},{name:"reply_to_address",type:"text",placeholder:_mailpoet2.default.I18n.t("replyToAddressPlaceholder"),validation:{"data-parsley-type":"email"}}]}];fields=_wpJsHooks2.default.applyFilters("mailpoet_newsletters_3rd_step_fields",fields),module.exports={getFields:function(){return fields},getSendButtonOptions:function(){return{value:_mailpoet2.default.I18n.t("activate")}}}},411:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function successPageClosed(){return _mailpoet2.default.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"settings",action:"set",data:{show_congratulate_after_first_newsletter:!1}}).always(function(){window.location=window.mailpoet_main_page})}function renderSuccess(newsletter,testingPassed){return testingPassed&&_mailpoet2.default.trackEvent("Cron testing done",{"Cron is working":"true"}),_react2.default.createElement(_success2.default,{illustrationImageUrl:window.mailpoet_congratulations_success_image,successClicked:successPageClosed,newsletter:newsletter})}function renderFail(){return _mailpoet2.default.trackEvent("Cron testing done",{"Cron is working":"false"}),_react2.default.createElement(_fail2.default,{failClicked:function(){window.location=window.mailpoet_main_page}})}function renderLoading(showRichLoadingScreen){return _react2.default.createElement(_loading2.default,{illustrationImageUrl:window.mailpoet_congratulations_loading_image,successClicked:successPageClosed,showRichLoadingScreen:showRichLoadingScreen})}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_moment=__webpack_require__(0),_moment2=_interopRequireDefault(_moment),_success=__webpack_require__(412),_success2=_interopRequireDefault(_success),_fail=__webpack_require__(413),_fail2=_interopRequireDefault(_fail),_loading=__webpack_require__(414),_loading2=_interopRequireDefault(_loading),Congratulate=function(_React$Component){function Congratulate(props){_classCallCheck(this,Congratulate);var _this=_possibleConstructorReturn(this,(Congratulate.__proto__||Object.getPrototypeOf(Congratulate)).call(this,props));return _this.state={loading:!0,fail:!1,newsletter:null,testingPassed:!1,timeStart:(0,_moment2.default)(),minimumLoadingTimePassed:!1},_this.tick=_this.tick.bind(_this),_this}return _inherits(Congratulate,_React$Component),_createClass(Congratulate,[{key:"componentDidMount",value:function(){this.loadNewsletter(this.props.match.params.id),this.tick()}},{key:"componentWillReceiveProps",value:function(props){this.loadNewsletter(props.match.params.id)}},{key:"tick",value:function(){(0,_moment2.default)().subtract(20,"second").isAfter(this.state.timeStart)&&this.setState({error:!0,loading:!1}),this.state.loading&&this.loadNewsletter(this.props.match.params.id),(0,_moment2.default)().subtract(6,"seconds").isAfter(this.state.timeStart)&&this.setState({minimumLoadingTimePassed:!0}),!this.state.loading&&this.state.minimumLoadingTimePassed||setTimeout(this.tick,2e3)}},{key:"loadNewsletter",value:function(id){var _this2=this;_mailpoet2.default.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"get",data:{id:id}}).done(function(response){return _this2.newsletterLoaded(response.data)})}},{key:"newsletterLoaded",value:function(newsletter){"standard"!==newsletter.type||"scheduled"===newsletter.status?this.setState({newsletter:newsletter,loading:!1,minimumLoadingTimePassed:!0}):"sent"===newsletter.status||"sending"===newsletter.status?this.setState({newsletter:newsletter,loading:!1,testingPassed:!0}):this.setState({newsletter:newsletter})}},{key:"renderContent",value:function(){return this.state.loading||!this.state.minimumLoadingTimePassed?renderLoading(!!this.state.newsletter):this.state.error?renderFail():renderSuccess(this.state.newsletter,this.state.testingPassed)}},{key:"render",value:function(){return _react2.default.createElement("div",{className:"newsletter_congratulate_page"},this.renderContent())}}]),Congratulate}(_react2.default.Component);Congratulate.propTypes={match:_propTypes2.default.shape({params:_propTypes2.default.shape({id:_propTypes2.default.string}).isRequired}).isRequired},module.exports=Congratulate},412:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function renderHeader(newsletter){return"welcome"===newsletter.type?_mailpoet2.default.I18n.t("congratulationsWelcomeEmailSuccessHeader"):"notification"===newsletter.type?_mailpoet2.default.I18n.t("congratulationsPostNotificationSuccessHeader"):"automatic"===newsletter.type?_mailpoet2.default.I18n.t("congratulationsWooSuccessHeader"):"scheduled"===newsletter.status?_mailpoet2.default.I18n.t("congratulationsScheduleSuccessHeader"):_mailpoet2.default.I18n.t("congratulationsSendSuccessHeader")}function Success(props){return _react2.default.createElement("div",{className:"mailpoet_congratulate_success"},_react2.default.createElement("h1",null,renderHeader(props.newsletter)),_react2.default.createElement("img",{src:props.illustrationImageUrl,alt:"",width:"750",height:"250"}),_react2.default.createElement("button",{className:"button",onClick:props.successClicked},_mailpoet2.default.I18n.t("close")))}var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet);Success.propTypes={successClicked:_propTypes2.default.func.isRequired,illustrationImageUrl:_propTypes2.default.string.isRequired,newsletter:_propTypes2.default.shape({status:_propTypes2.default.string.isRequired,type:_propTypes2.default.string.isRequired}).isRequired},module.exports=Success},413:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function Fail(props){return _react2.default.createElement("div",{className:"mailpoet_centered"},_react2.default.createElement("h1",null,_mailpoet2.default.I18n.t("congratulationsSendFailHeader")),_react2.default.createElement("p",null,(0,_reactStringReplace2.default)(_mailpoet2.default.I18n.t("congratulationsSendFailExplain"),/\[link\](.*?)\[\/link\]/g,function(match,i){return _react2.default.createElement("a",{key:i,target:"_blank",rel:"noopener noreferrer",href:"https://kb.mailpoet.com/article/231-sending-does-not-work"},match)})),_react2.default.createElement("button",{className:"button",onClick:props.failClicked},_mailpoet2.default.I18n.t("close")))}var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_reactStringReplace=__webpack_require__(22),_reactStringReplace2=_interopRequireDefault(_reactStringReplace),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet);Fail.propTypes={failClicked:_propTypes2.default.func.isRequired},module.exports=Fail},414:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function renderRichData(showRichData,illustrationImageUrl){return showRichData?_react2.default.createElement("div",null,_react2.default.createElement("h1",{className:"mailpoet_newsletter_loading_header"},_mailpoet2.default.I18n.t("congratulationsLoadingHeader")),_react2.default.createElement("img",{src:illustrationImageUrl,alt:"",width:"800px",height:"266px"})):_react2.default.createElement("div",null)}function Loading(props){return _react2.default.createElement("div",{className:"mailpoet_newsletter_loading"},_react2.default.createElement(_loading2.default,null),renderRichData(props.showRichLoadingScreen,props.illustrationImageUrl))}var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_loading=__webpack_require__(415),_loading2=_interopRequireDefault(_loading);Loading.propTypes={illustrationImageUrl:_propTypes2.default.string.isRequired,showRichLoadingScreen:_propTypes2.default.bool.isRequired},module.exports=Loading},415:function(module,exports,__webpack_require__){"use strict";function Loading(){return _react2.default.createElement("div",{className:"mailpoet_loading"},_react2.default.createElement("div",{className:"mailpoet_modal_loading mailpoet_modal_loading_1"}),_react2.default.createElement("div",{className:"mailpoet_modal_loading mailpoet_modal_loading_2"}),_react2.default.createElement("div",{className:"mailpoet_modal_loading mailpoet_modal_loading_3"}))}var _react=__webpack_require__(1),_react2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_react);module.exports=Loading},416:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_breadcrumb=__webpack_require__(21),_breadcrumb2=_interopRequireDefault(_breadcrumb),_reactRouterDom=__webpack_require__(7),NewsletterStandard=function(_React$Component){function NewsletterStandard(){var _ref,_temp,_this,_ret;_classCallCheck(this,NewsletterStandard);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=_possibleConstructorReturn(this,(_ref=NewsletterStandard.__proto__||Object.getPrototypeOf(NewsletterStandard)).call.apply(_ref,[this].concat(args))),_this.showTemplateSelection=function(newsletterId){_this.props.history.push("/template/"+newsletterId)},_ret=_temp,_possibleConstructorReturn(_this,_ret)}return _inherits(NewsletterStandard,_React$Component),_createClass(NewsletterStandard,[{key:"componentDidMount",value:function(){var _this2=this;_mailpoet2.default.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"create",data:{type:"standard"}}).done(function(response){_this2.showTemplateSelection(response.data.id)}).fail(function(response){response.errors.length>0&&_mailpoet2.default.Notice.error(response.errors.map(function(error){return error.message}),{scroll:!0})})}},{key:"render",value:function(){return _react2.default.createElement("div",null,_react2.default.createElement("h1",null,_mailpoet2.default.I18n.t("regularNewsletterTypeTitle")),_react2.default.createElement(_breadcrumb2.default,{step:"type"}))}}]),NewsletterStandard}(_react2.default.Component);NewsletterStandard.propTypes={history:_propTypes2.default.shape({push:_propTypes2.default.func.isRequired}).isRequired},module.exports=(0,_reactRouterDom.withRouter)(NewsletterStandard)},417:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_breadcrumb=__webpack_require__(21),_breadcrumb2=_interopRequireDefault(_breadcrumb),_underscore=__webpack_require__(4),_underscore2=_interopRequireDefault(_underscore),_scheduling=__webpack_require__(293),_scheduling2=_interopRequireDefault(_scheduling),_reactRouterDom=__webpack_require__(7),field={name:"options",type:"reactComponent",component:_scheduling2.default},NewsletterNotification=function(_React$Component){function NewsletterNotification(){var _ref,_temp,_this,_ret;_classCallCheck(this,NewsletterNotification);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=_possibleConstructorReturn(this,(_ref=NewsletterNotification.__proto__||Object.getPrototypeOf(NewsletterNotification)).call.apply(_ref,[this].concat(args))),_this.state={options:{intervalType:"daily",timeOfDay:0,weekDay:1,monthDay:0,nthWeekDay:1}},_this.handleValueChange=function(event){var state=_this.state;state[event.target.name]=event.target.value,_this.setState(state)},_this.handleNext=function(){_mailpoet2.default.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"create",data:_underscore2.default.extend({},_this.state,{type:"notification",subject:_mailpoet2.default.I18n.t("draftPostNotificationTitle")})}).done(function(response){_this.showTemplateSelection(response.data.id)}).fail(function(response){response.errors.length>0&&_mailpoet2.default.Notice.error(response.errors.map(function(error){return error.message}),{scroll:!0})})},_this.showTemplateSelection=function(newsletterId){_this.props.history.push("/template/"+newsletterId)},_ret=_temp,_possibleConstructorReturn(_this,_ret)}return _inherits(NewsletterNotification,_React$Component),_createClass(NewsletterNotification,[{key:"render",value:function(){return _react2.default.createElement("div",null,_react2.default.createElement("h1",null,_mailpoet2.default.I18n.t("postNotificationNewsletterTypeTitle")),_react2.default.createElement(_breadcrumb2.default,{step:"type"}),_react2.default.createElement("h3",null,_mailpoet2.default.I18n.t("selectFrequency")),_react2.default.createElement(_scheduling2.default,{item:this.state,field:field,onValueChange:this.handleValueChange}),_react2.default.createElement("p",{className:"submit"},_react2.default.createElement("input",{className:"button button-primary",type:"button",onClick:this.handleNext,value:_mailpoet2.default.I18n.t("next")})))}}]),NewsletterNotification}(_react2.default.Component);NewsletterNotification.propTypes={history:_propTypes2.default.shape({push:_propTypes2.default.func.isRequired}).isRequired},module.exports=(0,_reactRouterDom.withRouter)(NewsletterNotification)},418:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_underscore=__webpack_require__(4),_underscore2=_interopRequireDefault(_underscore),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_breadcrumb=__webpack_require__(21),_breadcrumb2=_interopRequireDefault(_breadcrumb),_scheduling=__webpack_require__(268),_scheduling2=_interopRequireDefault(_scheduling),field={name:"options",label:"Event",type:"reactComponent",component:_scheduling2.default},NewsletterWelcome=function(_React$Component){function NewsletterWelcome(props){_classCallCheck(this,NewsletterWelcome);var _this=_possibleConstructorReturn(this,(NewsletterWelcome.__proto__||Object.getPrototypeOf(NewsletterWelcome)).call(this,props)),availableSegments=window.mailpoet_segments||[],defaultSegment=1;return availableSegments=availableSegments.filter(function(segment){return"default"===segment.type}),_underscore2.default.size(availableSegments)>0&&(defaultSegment=_underscore2.default.first(availableSegments).id),_this.state={options:{event:"segment",segment:defaultSegment,role:"subscriber",afterTimeNumber:1,afterTimeType:"immediate"}},_this.handleValueChange=_this.handleValueChange.bind(_this),_this.handleNext=_this.handleNext.bind(_this),_this}return _inherits(NewsletterWelcome,_React$Component),_createClass(NewsletterWelcome,[{key:"handleValueChange",value:function(event){var state=this.state;state[event.target.name]=event.target.value,this.setState(state)}},{key:"handleNext",value:function(){var _this2=this;_mailpoet2.default.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"create",data:_underscore2.default.extend({},this.state,{type:"welcome",subject:_mailpoet2.default.I18n.t("draftNewsletterTitle")})}).done(function(response){_this2.showTemplateSelection(response.data.id)}).fail(function(response){response.errors.length>0&&_mailpoet2.default.Notice.error(response.errors.map(function(error){return error.message}),{scroll:!0})})}},{key:"showTemplateSelection",value:function(newsletterId){this.props.history.push("/template/"+newsletterId)}},{key:"render",value:function(){return _react2.default.createElement("div",null,_react2.default.createElement("h1",null,_mailpoet2.default.I18n.t("welcomeNewsletterTypeTitle")),_react2.default.createElement(_breadcrumb2.default,{step:"type"}),_react2.default.createElement("h3",null,_mailpoet2.default.I18n.t("selectEventToSendWelcomeEmail")),_react2.default.createElement(_scheduling2.default,{item:this.state,field:field,onValueChange:this.handleValueChange}),_react2.default.createElement("p",{className:"submit"},_react2.default.createElement("input",{className:"button button-primary",type:"button",onClick:this.handleNext,value:_mailpoet2.default.I18n.t("next")})))}}]),NewsletterWelcome}(_react2.default.Component);NewsletterWelcome.propTypes={history:_propTypes2.default.shape({push:_propTypes2.default.func.isRequired}).isRequired},exports.default=NewsletterWelcome},419:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_createReactClass=__webpack_require__(32),_createReactClass2=_interopRequireDefault(_createReactClass),_classnames=__webpack_require__(8),_classnames2=_interopRequireDefault(_classnames),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_wpJsHooks=__webpack_require__(13),_wpJsHooks2=_interopRequireDefault(_wpJsHooks),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_confirm_alert=__webpack_require__(292),_confirm_alert2=_interopRequireDefault(_confirm_alert),_listing=__webpack_require__(23),_listing2=_interopRequireDefault(_listing),_tabs=__webpack_require__(172),_tabs2=_interopRequireDefault(_tabs),_heading=__webpack_require__(174),_heading2=_interopRequireDefault(_heading),_mixins=__webpack_require__(173),mailpoetTrackingEnabled=!!window.mailpoet_tracking_enabled,messages={onTrash:function(response){var count=Number(response.meta.count),message=null;message=1===count?_mailpoet2.default.I18n.t("oneNewsletterTrashed"):_mailpoet2.default.I18n.t("multipleNewslettersTrashed").replace("%$1d",count.toLocaleString()),_mailpoet2.default.Notice.success(message)},onDelete:function(response){var count=Number(response.meta.count),message=null;message=1===count?_mailpoet2.default.I18n.t("oneNewsletterDeleted"):_mailpoet2.default.I18n.t("multipleNewslettersDeleted").replace("%$1d",count.toLocaleString()),_mailpoet2.default.Notice.success(message)},onRestore:function(response){var count=Number(response.meta.count),message=null;message=1===count?_mailpoet2.default.I18n.t("oneNewsletterRestored"):_mailpoet2.default.I18n.t("multipleNewslettersRestored").replace("%$1d",count.toLocaleString()),_mailpoet2.default.Notice.success(message)}},columns=[{name:"subject",label:_mailpoet2.default.I18n.t("subject"),sortable:!0},{name:"status",label:_mailpoet2.default.I18n.t("status")},{name:"segments",label:_mailpoet2.default.I18n.t("lists")},{name:"statistics",label:_mailpoet2.default.I18n.t("statistics"),display:mailpoetTrackingEnabled},{name:"sent_at",label:_mailpoet2.default.I18n.t("sentOn"),sortable:!0}],bulkActions=[{name:"trash",label:_mailpoet2.default.I18n.t("moveToTrash"),onSuccess:messages.onTrash}],confirmEdit=function(newsletter){var redirectToEditing=function(){window.location.href="?page=mailpoet-newsletter-editor&id="+newsletter.id};newsletter.queue&&"sending"===newsletter.status&&null===newsletter.queue.status?(0,_confirm_alert2.default)({message:_mailpoet2.default.I18n.t("confirmEdit"),onConfirm:redirectToEditing}):redirectToEditing()},newsletterActions=[{name:"view",link:function(newsletter){return _react2.default.createElement("a",{href:newsletter.preview_url,target:"_blank"},_mailpoet2.default.I18n.t("preview"))}},{name:"edit",label:_mailpoet2.default.I18n.t("edit"),onClick:confirmEdit},{name:"duplicate",label:_mailpoet2.default.I18n.t("duplicate"),onClick:function(newsletter,refresh){return _mailpoet2.default.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"duplicate",data:{id:newsletter.id}}).done(function(response){_mailpoet2.default.Notice.success(_mailpoet2.default.I18n.t("newsletterDuplicated").replace("%$1s",response.data.subject)),refresh()}).fail(function(response){response.errors.length>0&&_mailpoet2.default.Notice.error(response.errors.map(function(error){return error.message}),{scroll:!0})})}},{name:"trash"}];_wpJsHooks2.default.addFilter("mailpoet_newsletters_listings_standard_actions",_mixins.StatisticsMixin.addStatsCTAAction),newsletterActions=_wpJsHooks2.default.applyFilters("mailpoet_newsletters_listings_standard_actions",newsletterActions);var NewsletterListStandard=(0,_createReactClass2.default)({displayName:"NewsletterListStandard",propTypes:{location:_propTypes2.default.object.isRequired,match:_propTypes2.default.shape({params:_propTypes2.default.object}).isRequired},mixins:[_mixins.QueueMixin,_mixins.StatisticsMixin,_mixins.MailerMixin,_mixins.CronMixin],renderItem:function(newsletter,actions,meta){var rowClasses=(0,_classnames2.default)("manage-column","column-primary","has-row-actions"),segments=newsletter.segments.map(function(segment){return segment.name}).join(", ");return _react2.default.createElement("div",null,_react2.default.createElement("td",{className:rowClasses},_react2.default.createElement("strong",null,_react2.default.createElement("a",{className:"row-title",href:"javascript:;",onClick:function(){return confirmEdit(newsletter)}},newsletter.queue.newsletter_rendered_subject||newsletter.subject)),actions),_react2.default.createElement("td",{className:"column","data-colname":_mailpoet2.default.I18n.t("status")},this.renderQueueStatus(newsletter,meta.mta_log)),_react2.default.createElement("td",{className:"column","data-colname":_mailpoet2.default.I18n.t("lists")},segments),!0===mailpoetTrackingEnabled?_react2.default.createElement("td",{className:"column","data-colname":_mailpoet2.default.I18n.t("statistics")},this.renderStatistics(newsletter,void 0,meta.current_time)):null,_react2.default.createElement("td",{className:"column-date","data-colname":_mailpoet2.default.I18n.t("sentOn")},_react2.default.createElement("abbr",null,newsletter.sent_at?_mailpoet2.default.Date.format(newsletter.sent_at):_mailpoet2.default.I18n.t("notSentYet"))))},render:function(){var _this=this;return _react2.default.createElement("div",null,_react2.default.createElement(_heading2.default,null),_react2.default.createElement(_tabs2.default,{tab:"standard"}),_react2.default.createElement(_listing2.default,{limit:window.mailpoet_listing_per_page,location:this.props.location,params:this.props.match.params,endpoint:"newsletters",type:"standard",base_url:"standard",onRenderItem:this.renderItem,columns:columns,bulk_actions:bulkActions,item_actions:newsletterActions,messages:messages,auto_refresh:!0,sort_by:"sent_at",sort_order:"desc",afterGetItems:function(state){_this.checkMailerStatus(state),_this.checkCronStatus(state)}}))}});module.exports=NewsletterListStandard},420:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_createReactClass=__webpack_require__(32),_createReactClass2=_interopRequireDefault(_createReactClass),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_listing=__webpack_require__(23),_listing2=_interopRequireDefault(_listing),_tabs=__webpack_require__(172),_tabs2=_interopRequireDefault(_tabs),_heading=__webpack_require__(174),_heading2=_interopRequireDefault(_heading),_mixins=__webpack_require__(173),_classnames=__webpack_require__(8),_classnames2=_interopRequireDefault(_classnames),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_underscore=__webpack_require__(4),_underscore2=_interopRequireDefault(_underscore),_wpJsHooks=__webpack_require__(13),_wpJsHooks2=_interopRequireDefault(_wpJsHooks),mailpoetRoles=window.mailpoet_roles||{},mailpoetSegments=window.mailpoet_segments||{},mailpoetTrackingEnabled=!!window.mailpoet_tracking_enabled,messages={onTrash:function(response){var count=Number(response.meta.count),message=null;message=1===count?_mailpoet2.default.I18n.t("oneNewsletterTrashed"):_mailpoet2.default.I18n.t("multipleNewslettersTrashed").replace("%$1d",count.toLocaleString()),_mailpoet2.default.Notice.success(message)},onDelete:function(response){var count=Number(response.meta.count),message=null;message=1===count?_mailpoet2.default.I18n.t("oneNewsletterDeleted"):_mailpoet2.default.I18n.t("multipleNewslettersDeleted").replace("%$1d",count.toLocaleString()),_mailpoet2.default.Notice.success(message)},onRestore:function(response){var count=Number(response.meta.count),message=null;message=1===count?_mailpoet2.default.I18n.t("oneNewsletterRestored"):_mailpoet2.default.I18n.t("multipleNewslettersRestored").replace("%$1d",count.toLocaleString()),_mailpoet2.default.Notice.success(message)}},columns=[{name:"subject",label:_mailpoet2.default.I18n.t("subject"),sortable:!0},{name:"status",label:_mailpoet2.default.I18n.t("status"),width:145},{name:"settings",label:_mailpoet2.default.I18n.t("settings")},{name:"statistics",label:_mailpoet2.default.I18n.t("statistics"),display:mailpoetTrackingEnabled},{name:"updated_at",label:_mailpoet2.default.I18n.t("lastModifiedOn"),sortable:!0}],bulkActions=[{name:"trash",label:_mailpoet2.default.I18n.t("moveToTrash"),onSuccess:messages.onTrash}],newsletterActions=[{name:"view",link:function(newsletter){return _react2.default.createElement("a",{href:newsletter.preview_url,target:"_blank"},_mailpoet2.default.I18n.t("preview"))}},{name:"duplicate",label:_mailpoet2.default.I18n.t("duplicate"),onClick:function(newsletter,refresh){return _mailpoet2.default.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"duplicate",data:{id:newsletter.id}}).done(function(response){_mailpoet2.default.Notice.success(_mailpoet2.default.I18n.t("newsletterDuplicated").replace("%$1s",response.data.subject)),refresh()}).fail(function(response){response.errors.length>0&&_mailpoet2.default.Notice.error(response.errors.map(function(error){return error.message}),{scroll:!0})})}},{name:"edit",link:function(newsletter){return _react2.default.createElement("a",{href:"?page=mailpoet-newsletter-editor&id="+newsletter.id},_mailpoet2.default.I18n.t("edit"))}},{name:"trash"}];_wpJsHooks2.default.addFilter("mailpoet_newsletters_listings_welcome_notification_actions",_mixins.StatisticsMixin.addStatsCTAAction),newsletterActions=_wpJsHooks2.default.applyFilters("mailpoet_newsletters_listings_welcome_notification_actions",newsletterActions);var NewsletterListWelcome=(0,_createReactClass2.default)({displayName:"NewsletterListWelcome",propTypes:{location:_propTypes2.default.object.isRequired,match:_propTypes2.default.shape({params:_propTypes2.default.object}).isRequired},mixins:[_mixins.StatisticsMixin,_mixins.MailerMixin,_mixins.CronMixin],updateStatus:function(e){var _this=this;e.persist(),_mailpoet2.default.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"setStatus",data:{id:Number(e.target.getAttribute("data-id")),status:e.target.value}}).done(function(response){"active"===response.data.status&&_mailpoet2.default.Notice.success(_mailpoet2.default.I18n.t("welcomeEmailActivated")),_this.forceUpdate()}).fail(function(response){_mailpoet2.default.Notice.error(_mailpoet2.default.I18n.t("welcomeEmailActivationFailed")),e.target.value=response.status})},renderStatus:function(newsletter){var totalSentMessage=_mailpoet2.default.I18n.t("sentToXSubscribers").replace("%$1d",newsletter.total_sent.toLocaleString()),totalScheduledMessage=_mailpoet2.default.I18n.t("scheduledToXSubscribers").replace("%$1d",newsletter.total_scheduled.toLocaleString());return _react2.default.createElement("div",null,_react2.default.createElement("p",null,_react2.default.createElement("select",{"data-id":newsletter.id,defaultValue:newsletter.status,onChange:this.updateStatus},_react2.default.createElement("option",{value:"active"},_mailpoet2.default.I18n.t("active")),_react2.default.createElement("option",{value:"draft"},_mailpoet2.default.I18n.t("inactive")))),_react2.default.createElement("p",null,totalSentMessage," ",_react2.default.createElement("br",null),totalScheduledMessage))},renderSettings:function(newsletter){var sendingEvent=void 0,sendingDelay=void 0,segment=void 0;switch(newsletter.options.event){case"user":sendingEvent="mailpoet_all"===newsletter.options.role?_mailpoet2.default.I18n.t("welcomeEventWPUserAnyRole"):_mailpoet2.default.I18n.t("welcomeEventWPUserWithRole").replace("%$1s",mailpoetRoles[newsletter.options.role]);break;default:if(void 0===(segment=_underscore2.default.find(mailpoetSegments,function(seg){return Number(seg.id)===Number(newsletter.options.segment)})))return _react2.default.createElement("span",{className:"mailpoet_error"},_mailpoet2.default.I18n.t("sendingToSegmentsNotSpecified"));sendingEvent=_mailpoet2.default.I18n.t("welcomeEventSegment").replace("%$1s",segment.name)}if(sendingEvent&&"immediate"!==newsletter.options.afterTimeType){switch(newsletter.options.afterTimeType){case"hours":sendingDelay=_mailpoet2.default.I18n.t("sendingDelayHours").replace("%$1d",newsletter.options.afterTimeNumber);break;case"days":sendingDelay=_mailpoet2.default.I18n.t("sendingDelayDays").replace("%$1d",newsletter.options.afterTimeNumber);break;case"weeks":sendingDelay=_mailpoet2.default.I18n.t("sendingDelayWeeks").replace("%$1d",newsletter.options.afterTimeNumber);break;default:sendingDelay=_mailpoet2.default.I18n.t("sendingDelayInvalid")}sendingEvent+=" ["+sendingDelay+"]."}return _react2.default.createElement("span",null,sendingEvent)},renderItem:function(newsletter,actions){var rowClasses=(0,_classnames2.default)("manage-column","column-primary","has-row-actions");return _react2.default.createElement("div",null,_react2.default.createElement("td",{className:rowClasses},_react2.default.createElement("strong",null,_react2.default.createElement("a",{className:"row-title",href:"?page=mailpoet-newsletter-editor&id="+newsletter.id},newsletter.subject)),actions),_react2.default.createElement("td",{className:"column","data-colname":_mailpoet2.default.I18n.t("status")},this.renderStatus(newsletter)),_react2.default.createElement("td",{className:"column","data-colname":_mailpoet2.default.I18n.t("settings")},this.renderSettings(newsletter)),!0===mailpoetTrackingEnabled?_react2.default.createElement("td",{className:"column","data-colname":_mailpoet2.default.I18n.t("statistics")},this.renderStatistics(newsletter,newsletter.total_sent>0&&newsletter.statistics)):null,_react2.default.createElement("td",{className:"column-date","data-colname":_mailpoet2.default.I18n.t("lastModifiedOn")},_react2.default.createElement("abbr",null,_mailpoet2.default.Date.format(newsletter.updated_at))))},render:function(){var _this2=this;return _react2.default.createElement("div",null,_react2.default.createElement(_heading2.default,null),_react2.default.createElement(_tabs2.default,{tab:"welcome"}),_react2.default.createElement(_listing2.default,{limit:window.mailpoet_listing_per_page,location:this.props.location,params:this.props.match.params,endpoint:"newsletters",type:"welcome",base_url:"welcome",onRenderItem:this.renderItem,columns:columns,bulk_actions:bulkActions,item_actions:newsletterActions,messages:messages,auto_refresh:!0,sort_by:"updated_at",sort_order:"desc",afterGetItems:function(state){_this2.checkMailerStatus(state),_this2.checkCronStatus(state)}}))}});module.exports=NewsletterListWelcome},421:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_createReactClass=__webpack_require__(32),_createReactClass2=_interopRequireDefault(_createReactClass),_reactRouterDom=__webpack_require__(7),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_listing=__webpack_require__(23),_listing2=_interopRequireDefault(_listing),_tabs=__webpack_require__(172),_tabs2=_interopRequireDefault(_tabs),_heading=__webpack_require__(174),_heading2=_interopRequireDefault(_heading),_mixins=__webpack_require__(173),_classnames=__webpack_require__(8),_classnames2=_interopRequireDefault(_classnames),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_common=__webpack_require__(269),messages={onTrash:function(response){var count=Number(response.meta.count),message=null;message=1===count?_mailpoet2.default.I18n.t("oneNewsletterTrashed"):_mailpoet2.default.I18n.t("multipleNewslettersTrashed").replace("%$1d",count.toLocaleString()),_mailpoet2.default.Notice.success(message)},onDelete:function(response){var count=Number(response.meta.count),message=null;message=1===count?_mailpoet2.default.I18n.t("oneNewsletterDeleted"):_mailpoet2.default.I18n.t("multipleNewslettersDeleted").replace("%$1d",count.toLocaleString()),_mailpoet2.default.Notice.success(message)},onRestore:function(response){var count=Number(response.meta.count),message=null;message=1===count?_mailpoet2.default.I18n.t("oneNewsletterRestored"):_mailpoet2.default.I18n.t("multipleNewslettersRestored").replace("%$1d",count.toLocaleString()),_mailpoet2.default.Notice.success(message)}},columns=[{name:"subject",label:_mailpoet2.default.I18n.t("subject"),sortable:!0},{name:"status",label:_mailpoet2.default.I18n.t("status"),width:100},{name:"settings",label:_mailpoet2.default.I18n.t("settings")},{name:"history",label:_mailpoet2.default.I18n.t("history"),width:100},{name:"updated_at",label:_mailpoet2.default.I18n.t("lastModifiedOn"),sortable:!0}],bulkActions=[{name:"trash",label:_mailpoet2.default.I18n.t("moveToTrash"),onSuccess:messages.onTrash}],newsletterActions=[{name:"view",link:function(newsletter){return _react2.default.createElement("a",{href:newsletter.preview_url,target:"_blank"},_mailpoet2.default.I18n.t("preview"))}},{name:"edit",link:function(newsletter){return _react2.default.createElement("a",{href:"?page=mailpoet-newsletter-editor&id="+newsletter.id},_mailpoet2.default.I18n.t("edit"))}},{name:"duplicate",label:_mailpoet2.default.I18n.t("duplicate"),onClick:function(newsletter,refresh){return _mailpoet2.default.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"duplicate",data:{id:newsletter.id}}).done(function(response){_mailpoet2.default.Notice.success(_mailpoet2.default.I18n.t("newsletterDuplicated").replace("%$1s",response.data.subject)),refresh()}).fail(function(response){response.errors.length>0&&_mailpoet2.default.Notice.error(response.errors.map(function(error){return error.message}),{scroll:!0})})}},{name:"trash"}],NewsletterListNotification=(0,_createReactClass2.default)({displayName:"NewsletterListNotification",propTypes:{location:_propTypes2.default.object.isRequired,match:_propTypes2.default.shape({params:_propTypes2.default.object}).isRequired},mixins:[_mixins.MailerMixin,_mixins.CronMixin],updateStatus:function(e){var _this=this;e.persist(),_mailpoet2.default.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"setStatus",data:{id:Number(e.target.getAttribute("data-id")),status:e.target.value}}).done(function(response){"active"===response.data.status&&_mailpoet2.default.Notice.success(_mailpoet2.default.I18n.t("postNotificationActivated")),_this.forceUpdate()}).fail(function(response){_mailpoet2.default.Notice.error(_mailpoet2.default.I18n.t("postNotificationActivationFailed")),e.target.value=response.status})},renderStatus:function(newsletter){return _react2.default.createElement("select",{"data-id":newsletter.id,defaultValue:newsletter.status,onChange:this.updateStatus},_react2.default.createElement("option",{value:"active"},_mailpoet2.default.I18n.t("active")),_react2.default.createElement("option",{value:"draft"},_mailpoet2.default.I18n.t("inactive")))},renderSettings:function(newsletter){var sendingFrequency=void 0,segments=newsletter.segments.map(function(segment){return segment.name}),sendingToSegments=_mailpoet2.default.I18n.t("ifNewContentToSegments").replace("%$1s",segments.join(", "));if(0===segments.length)return _react2.default.createElement("span",{className:"mailpoet_error"},_mailpoet2.default.I18n.t("sendingToSegmentsNotSpecified"));switch(newsletter.options.intervalType){case"daily":sendingFrequency=_mailpoet2.default.I18n.t("sendDaily").replace("%$1s",_common.timeOfDayValues[newsletter.options.timeOfDay]);break;case"weekly":sendingFrequency=_mailpoet2.default.I18n.t("sendWeekly").replace("%$1s",_common.weekDayValues[newsletter.options.weekDay]).replace("%$2s",_common.timeOfDayValues[newsletter.options.timeOfDay]);break;case"monthly":sendingFrequency=_mailpoet2.default.I18n.t("sendMonthly").replace("%$1s",_common.monthDayValues[newsletter.options.monthDay]).replace("%$2s",_common.timeOfDayValues[newsletter.options.timeOfDay]);break;case"nthWeekDay":sendingFrequency=_mailpoet2.default.I18n.t("sendNthWeekDay").replace("%$1s",_common.nthWeekDayValues[newsletter.options.nthWeekDay]).replace("%$2s",_common.weekDayValues[newsletter.options.weekDay]).replace("%$3s",_common.timeOfDayValues[newsletter.options.timeOfDay]);break;case"immediately":sendingFrequency=_mailpoet2.default.I18n.t("sendImmediately");break;default:sendingFrequency="Invalid sending frequency"}return _react2.default.createElement("span",null,sendingFrequency," ",sendingToSegments)},renderHistoryLink:function(newsletter){return 0===Number(newsletter.children_count)?_mailpoet2.default.I18n.t("notSentYet"):_react2.default.createElement(_reactRouterDom.Link,{"data-automation-id":"history-"+newsletter.id,to:"/notification/history/"+newsletter.id},_mailpoet2.default.I18n.t("viewHistory"))},renderItem:function(newsletter,actions){var rowClasses=(0,_classnames2.default)("manage-column","column-primary","has-row-actions");return _react2.default.createElement("div",null,_react2.default.createElement("td",{className:rowClasses},_react2.default.createElement("strong",null,_react2.default.createElement("a",{className:"row-title",href:"?page=mailpoet-newsletter-editor&id="+newsletter.id},newsletter.subject)),actions),_react2.default.createElement("td",{className:"column","data-colname":_mailpoet2.default.I18n.t("status")},this.renderStatus(newsletter)),_react2.default.createElement("td",{className:"column","data-colname":_mailpoet2.default.I18n.t("settings")},this.renderSettings(newsletter)),_react2.default.createElement("td",{className:"column","data-colname":_mailpoet2.default.I18n.t("history")},this.renderHistoryLink(newsletter)),_react2.default.createElement("td",{className:"column-date","data-colname":_mailpoet2.default.I18n.t("lastModifiedOn")},_react2.default.createElement("abbr",null,_mailpoet2.default.Date.format(newsletter.updated_at))))},render:function(){var _this2=this;return _react2.default.createElement("div",null,_react2.default.createElement(_heading2.default,null),_react2.default.createElement(_tabs2.default,{tab:"notification"}),_react2.default.createElement(_listing2.default,{limit:window.mailpoet_listing_per_page,location:this.props.location,params:this.props.match.params,endpoint:"newsletters",type:"notification",base_url:"notification",onRenderItem:this.renderItem,columns:columns,bulk_actions:bulkActions,item_actions:newsletterActions,messages:messages,auto_refresh:!0,sort_by:"updated_at",sort_order:"desc",afterGetItems:function(state){_this2.checkMailerStatus(state),_this2.checkCronStatus(state)}}))}});module.exports=NewsletterListNotification},422:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_createReactClass=__webpack_require__(32),_createReactClass2=_interopRequireDefault(_createReactClass),_reactRouterDom=__webpack_require__(7),_classnames=__webpack_require__(8),_classnames2=_interopRequireDefault(_classnames),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_wpJsHooks=__webpack_require__(13),_wpJsHooks2=_interopRequireDefault(_wpJsHooks),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_listing=__webpack_require__(23),_listing2=_interopRequireDefault(_listing),_tabs=__webpack_require__(172),_tabs2=_interopRequireDefault(_tabs),_heading=__webpack_require__(174),_heading2=_interopRequireDefault(_heading),_mixins=__webpack_require__(173),mailpoetTrackingEnabled=!!window.mailpoet_tracking_enabled,columns=[{name:"subject",label:_mailpoet2.default.I18n.t("subject")},{name:"status",label:_mailpoet2.default.I18n.t("status")},{name:"segments",label:_mailpoet2.default.I18n.t("lists")},{name:"statistics",label:_mailpoet2.default.I18n.t("statistics"),display:mailpoetTrackingEnabled},{name:"sent_at",label:_mailpoet2.default.I18n.t("sentOn")}],newsletterActions=[{name:"view",link:function(newsletter){return _react2.default.createElement("a",{href:newsletter.preview_url,target:"_blank"},_mailpoet2.default.I18n.t("preview"))}}];_wpJsHooks2.default.addFilter("mailpoet_newsletters_listings_notification_history_actions",_mixins.StatisticsMixin.addStatsCTAAction),newsletterActions=_wpJsHooks2.default.applyFilters("mailpoet_newsletters_listings_notification_history_actions",newsletterActions);var NewsletterListNotificationHistory=(0,_createReactClass2.default)({displayName:"NewsletterListNotificationHistory",propTypes:{location:_propTypes2.default.object.isRequired,match:_propTypes2.default.shape({params:_propTypes2.default.object}).isRequired},mixins:[_mixins.QueueMixin,_mixins.StatisticsMixin,_mixins.MailerMixin,_mixins.CronMixin],renderItem:function(newsletter,actions,meta){var rowClasses=(0,_classnames2.default)("manage-column","column-primary","has-row-actions"),segments=newsletter.segments.map(function(segment){return segment.name}).join(", ");return _react2.default.createElement("div",null,_react2.default.createElement("td",{className:rowClasses},_react2.default.createElement("strong",null,_react2.default.createElement("a",{href:newsletter.preview_url,target:"_blank"},newsletter.queue.newsletter_rendered_subject||newsletter.subject)),actions),_react2.default.createElement("td",{className:"column","data-colname":_mailpoet2.default.I18n.t("status")},this.renderQueueStatus(newsletter,meta.mta_log)),_react2.default.createElement("td",{className:"column","data-colname":_mailpoet2.default.I18n.t("lists")},segments),!0===mailpoetTrackingEnabled?_react2.default.createElement("td",{className:"column","data-colname":_mailpoet2.default.I18n.t("statistics")},this.renderStatistics(newsletter,void 0,meta.current_time)):null,_react2.default.createElement("td",{className:"column-date","data-colname":_mailpoet2.default.I18n.t("sentOn")},newsletter.sent_at?_mailpoet2.default.Date.format(newsletter.sent_at):_mailpoet2.default.I18n.t("notSentYet")))},render:function(){var _this=this;return _react2.default.createElement("div",null,_react2.default.createElement(_heading2.default,null),_react2.default.createElement(_tabs2.default,{tab:"notification"}),_react2.default.createElement(_reactRouterDom.Link,{className:"page-title-action",to:"/notification"},_mailpoet2.default.I18n.t("backToPostNotifications")),_react2.default.createElement(_listing2.default,{limit:window.mailpoet_listing_per_page,location:this.props.location,params:this.props.match.params,endpoint:"newsletters",type:"notification_history",base_url:"notification/history/:parent_id",onRenderItem:this.renderItem,columns:columns,item_actions:newsletterActions,auto_refresh:!0,sort_by:"sent_at",sort_order:"desc",afterGetItems:function(state){_this.checkMailerStatus(state),_this.checkCronStatus(state)}}))}});module.exports=NewsletterListNotificationHistory},423:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(11),_reactDom2=_interopRequireDefault(_reactDom),_reactRouterDom=__webpack_require__(7),_list=__webpack_require__(424),_list2=_interopRequireDefault(_list),_form=__webpack_require__(425),_form2=_interopRequireDefault(_form),container=document.getElementById("segments_container");container&&_reactDom2.default.render(_react2.default.createElement(_reactRouterDom.HashRouter,null,_react2.default.createElement(_reactRouterDom.Switch,null,_react2.default.createElement(_reactRouterDom.Route,{path:"/new",component:_form2.default}),_react2.default.createElement(_reactRouterDom.Route,{path:"/edit/:id",component:_form2.default}),_react2.default.createElement(_reactRouterDom.Route,{path:"*",component:_list2.default}))),container)},424:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_reactRouterDom=__webpack_require__(7),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_classnames=__webpack_require__(8),_classnames2=_interopRequireDefault(_classnames),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_listing=__webpack_require__(23),_listing2=_interopRequireDefault(_listing),columns=[{name:"name",label:_mailpoet2.default.I18n.t("name"),sortable:!0},{name:"description",label:_mailpoet2.default.I18n.t("description")},{name:"subscribed",label:_mailpoet2.default.I18n.t("subscribed")},{name:"unconfirmed",label:_mailpoet2.default.I18n.t("unconfirmed")},{name:"unsubscribed",label:_mailpoet2.default.I18n.t("unsubscribed")},{name:"bounced",label:_mailpoet2.default.I18n.t("bounced")},{name:"created_at",label:_mailpoet2.default.I18n.t("createdOn"),sortable:!0}],messages={onTrash:function(response){var count=Number(response.meta.count),message=null;message=1===count?_mailpoet2.default.I18n.t("oneSegmentTrashed"):_mailpoet2.default.I18n.t("multipleSegmentsTrashed").replace("%$1d",count.toLocaleString()),_mailpoet2.default.Notice.success(message)},onDelete:function(response){var count=Number(response.meta.count),message=null;message=1===count?_mailpoet2.default.I18n.t("oneSegmentDeleted"):_mailpoet2.default.I18n.t("multipleSegmentsDeleted").replace("%$1d",count.toLocaleString()),_mailpoet2.default.Notice.success(message)},onRestore:function(response){var count=Number(response.meta.count),message=null;message=1===count?_mailpoet2.default.I18n.t("oneSegmentRestored"):_mailpoet2.default.I18n.t("multipleSegmentsRestored").replace("%$1d",count.toLocaleString()),_mailpoet2.default.Notice.success(message)}},bulkActions=[{name:"trash",label:_mailpoet2.default.I18n.t("moveToTrash"),onSuccess:messages.onTrash}],itemActions=[{name:"edit",link:function(item){return _react2.default.createElement(_reactRouterDom.Link,{to:"/edit/"+item.id},_mailpoet2.default.I18n.t("edit"))},display:function(segment){return"wp_users"!==segment.type}},{name:"duplicate_segment",label:_mailpoet2.default.I18n.t("duplicate"),onClick:function(item,refresh){return _mailpoet2.default.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"segments",action:"duplicate",data:{id:item.id}}).done(function(response){_mailpoet2.default.Notice.success(_mailpoet2.default.I18n.t("listDuplicated").replace("%$1s",response.data.name)),refresh()}).fail(function(response){_mailpoet2.default.Notice.error(response.errors.map(function(error){return error.message}),{scroll:!0})})},display:function(segment){return"wp_users"!==segment.type}},{name:"read_more",link:function(){return _react2.default.createElement("a",{href:"http://docs.mailpoet.com/article/133-the-wordpress-users-list",target:"_blank",rel:"noopener noreferrer"},_mailpoet2.default.I18n.t("readMore"))},display:function(segment){return"wp_users"===segment.type}},{name:"synchronize_segment",label:_mailpoet2.default.I18n.t("forceSync"),onClick:function(item,refresh){_mailpoet2.default.Modal.loading(!0),_mailpoet2.default.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"segments",action:"synchronize"}).done(function(){_mailpoet2.default.Modal.loading(!1),_mailpoet2.default.Notice.success(_mailpoet2.default.I18n.t("listSynchronized").replace("%$1s",item.name)),refresh()}).fail(function(response){_mailpoet2.default.Modal.loading(!1),response.errors.length>0&&_mailpoet2.default.Notice.error(response.errors.map(function(error){return error.message}),{scroll:!0})})},display:function(segment){return"wp_users"===segment.type}},{name:"view_subscribers",link:function(item){return _react2.default.createElement("a",{href:item.subscribers_url},_mailpoet2.default.I18n.t("viewSubscribers"))}},{name:"trash",display:function(segment){return"wp_users"!==segment.type}}],SegmentList=function(_React$Component){function SegmentList(){var _ref,_temp,_this,_ret;_classCallCheck(this,SegmentList);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=_possibleConstructorReturn(this,(_ref=SegmentList.__proto__||Object.getPrototypeOf(SegmentList)).call.apply(_ref,[this].concat(args))),_this.renderItem=function(segment,actions){var rowClasses=(0,_classnames2.default)("manage-column","column-primary","has-row-actions"),subscribed=Number(segment.subscribers_count.subscribed||0),unconfirmed=Number(segment.subscribers_count.unconfirmed||0),unsubscribed=Number(segment.subscribers_count.unsubscribed||0),bounced=Number(segment.subscribers_count.bounced||0),segmentName=void 0;return segmentName="wp_users"===segment.type?_react2.default.createElement("span",{className:"row-title"},segment.name):_react2.default.createElement(_reactRouterDom.Link,{className:"row-title",to:"/edit/"+segment.id},segment.name),_react2.default.createElement("div",null,_react2.default.createElement("td",{className:rowClasses},_react2.default.createElement("strong",null,segmentName),actions),_react2.default.createElement("td",{className:"column-date","data-colname":_mailpoet2.default.I18n.t("description")},_react2.default.createElement("abbr",null,segment.description)),_react2.default.createElement("td",{className:"column-date","data-colname":_mailpoet2.default.I18n.t("subscribed")},_react2.default.createElement("abbr",null,subscribed.toLocaleString())),_react2.default.createElement("td",{className:"column-date","data-colname":_mailpoet2.default.I18n.t("unconfirmed")},_react2.default.createElement("abbr",null,unconfirmed.toLocaleString())),_react2.default.createElement("td",{className:"column-date","data-colname":_mailpoet2.default.I18n.t("unsubscribed")},_react2.default.createElement("abbr",null,unsubscribed.toLocaleString())),_react2.default.createElement("td",{className:"column-date","data-colname":_mailpoet2.default.I18n.t("bounced")},_react2.default.createElement("abbr",null,bounced.toLocaleString())),_react2.default.createElement("td",{className:"column-date","data-colname":_mailpoet2.default.I18n.t("createdOn")},_react2.default.createElement("abbr",null,_mailpoet2.default.Date.format(segment.created_at))))},_ret=_temp,_possibleConstructorReturn(_this,_ret)}return _inherits(SegmentList,_React$Component),_createClass(SegmentList,[{key:"render",value:function(){return _react2.default.createElement("div",null,_react2.default.createElement("h1",{className:"title"},_mailpoet2.default.I18n.t("pageTitle")," ",_react2.default.createElement(_reactRouterDom.Link,{className:"page-title-action",to:"/new"},_mailpoet2.default.I18n.t("new"))),_react2.default.createElement(_listing2.default,{limit:window.mailpoet_listing_per_page,location:this.props.location,params:this.props.match.params,messages:messages,search:!1,endpoint:"segments",onRenderItem:this.renderItem,columns:columns,bulk_actions:bulkActions,item_actions:itemActions,sort_by:"name",sort_order:"asc"}))}}]),SegmentList}(_react2.default.Component);SegmentList.propTypes={location:_propTypes2.default.object.isRequired,match:_propTypes2.default.shape({params:_propTypes2.default.object}).isRequired},module.exports=SegmentList},425:function(module,exports,__webpack_require__){"use strict";(function(global){global.MailPoetLib||(global.MailPoetLib={}),module.exports=global.MailPoetLib.Form=__webpack_require__(426)}).call(exports,__webpack_require__(6))},426:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_reactRouterDom=__webpack_require__(7),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_form=__webpack_require__(187),_form2=_interopRequireDefault(_form),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),fields=[{name:"name",label:_mailpoet2.default.I18n.t("name"),type:"text"},{name:"description",label:_mailpoet2.default.I18n.t("description"),type:"textarea",tip:_mailpoet2.default.I18n.t("segmentDescriptionTip")}],messages={onUpdate:function(){_mailpoet2.default.Notice.success(_mailpoet2.default.I18n.t("segmentUpdated"))},onCreate:function(){_mailpoet2.default.Notice.success(_mailpoet2.default.I18n.t("segmentAdded")),_mailpoet2.default.trackEvent("Lists > Add new",{"MailPoet Free version":window.mailpoet_version})}},SegmentForm=function(props){return _react2.default.createElement("div",null,_react2.default.createElement("h1",{className:"title"},_mailpoet2.default.I18n.t("segment"),_react2.default.createElement(_reactRouterDom.Link,{className:"page-title-action",to:"/"},_mailpoet2.default.I18n.t("backToList"))),_react2.default.createElement(_form2.default,{endpoint:"segments",fields:fields,params:props.match.params,messages:messages}))};SegmentForm.propTypes={match:_propTypes2.default.shape({params:_propTypes2.default.shape({id:_propTypes2.default.string}).isRequired}).isRequired},exports.default=SegmentForm},427:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(11),_reactDom2=_interopRequireDefault(_reactDom),_reactRouterDom=__webpack_require__(7),_list=__webpack_require__(428),_list2=_interopRequireDefault(_list),container=document.getElementById("forms_container");container&&_reactDom2.default.render(_react2.default.createElement(_reactRouterDom.HashRouter,null,_react2.default.createElement(_reactRouterDom.Route,{path:"*",component:_list2.default})),container)},428:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(8),_classnames2=_interopRequireDefault(_classnames),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_jquery=__webpack_require__(5),_jquery2=_interopRequireDefault(_jquery),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_listing=__webpack_require__(23),_listing2=_interopRequireDefault(_listing),columns=[{name:"name",label:_mailpoet2.default.I18n.t("formName"),sortable:!0},{name:"segments",label:_mailpoet2.default.I18n.t("segments")},{name:"signups",label:_mailpoet2.default.I18n.t("signups")},{name:"created_at",label:_mailpoet2.default.I18n.t("createdOn"),sortable:!0}],messages={onTrash:function(response){var count=Number(response.meta.count),message=null;message=1===count?_mailpoet2.default.I18n.t("oneFormTrashed"):_mailpoet2.default.I18n.t("multipleFormsTrashed").replace("%$1d",count.toLocaleString()),_mailpoet2.default.Notice.success(message)},onDelete:function(response){var count=Number(response.meta.count),message=null;message=1===count?_mailpoet2.default.I18n.t("oneFormDeleted"):_mailpoet2.default.I18n.t("multipleFormsDeleted").replace("%$1d",count.toLocaleString()),_mailpoet2.default.Notice.success(message)},onRestore:function(response){var count=Number(response.meta.count),message=null;message=1===count?_mailpoet2.default.I18n.t("oneFormRestored"):_mailpoet2.default.I18n.t("multipleFormsRestored").replace("%$1d",count.toLocaleString()),_mailpoet2.default.Notice.success(message)}},bulkActions=[{name:"trash",label:_mailpoet2.default.I18n.t("moveToTrash"),onSuccess:messages.onTrash}],itemActions=[{name:"edit",label:_mailpoet2.default.I18n.t("edit"),link:function(item){return _react2.default.createElement("a",{href:"admin.php?page=mailpoet-form-editor&id="+item.id},_mailpoet2.default.I18n.t("edit"))}},{name:"duplicate",label:_mailpoet2.default.I18n.t("duplicate"),onClick:function(item,refresh){return _mailpoet2.default.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"forms",action:"duplicate",data:{id:item.id}}).done(function(response){_mailpoet2.default.Notice.success(_mailpoet2.default.I18n.t("formDuplicated").replace("%$1s",response.data.name)),refresh()}).fail(function(response){response.errors.length>0&&_mailpoet2.default.Notice.error(response.errors.map(function(error){return error.message}),{scroll:!0})})}},{name:"trash"}],FormList=function(_React$Component){function FormList(){var _ref,_temp,_this,_ret;_classCallCheck(this,FormList);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=_possibleConstructorReturn(this,(_ref=FormList.__proto__||Object.getPrototypeOf(FormList)).call.apply(_ref,[this].concat(args))),_this.createForm=function(){_mailpoet2.default.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"forms",action:"create"}).done(function(response){window.location=window.mailpoet_form_edit_url+response.data.id}).fail(function(response){response.errors.length>0&&_mailpoet2.default.Notice.error(response.errors.map(function(error){return error.message}),{scroll:!0})})},_this.renderItem=function(form,actions){var rowClasses=(0,_classnames2.default)("manage-column","column-primary","has-row-actions"),segments=window.mailpoet_segments.filter(function(segment){return-1!==_jquery2.default.inArray(segment.id,form.segments)}).map(function(segment){return segment.name}).join(", ");return"user"===form.settings.segments_selected_by&&(segments=_mailpoet2.default.I18n.t("userChoice")+" "+segments),_react2.default.createElement("div",null,_react2.default.createElement("td",{className:rowClasses},_react2.default.createElement("strong",null,_react2.default.createElement("a",{className:"row-title",href:"admin.php?page=mailpoet-form-editor&id="+form.id},form.name)),actions),_react2.default.createElement("td",{className:"column","data-colname":_mailpoet2.default.I18n.t("segments")},segments),_react2.default.createElement("td",{className:"column","data-colname":_mailpoet2.default.I18n.t("signups")},form.signups),_react2.default.createElement("td",{className:"column-date","data-colname":_mailpoet2.default.I18n.t("createdOn")},_react2.default.createElement("abbr",null,_mailpoet2.default.Date.format(form.created_at))))},_ret=_temp,_possibleConstructorReturn(_this,_ret)}return _inherits(FormList,_React$Component),_createClass(FormList,[{key:"render",value:function(){return _react2.default.createElement("div",null,_react2.default.createElement("h1",{className:"title"},_mailpoet2.default.I18n.t("pageTitle")," ",_react2.default.createElement("a",{className:"page-title-action",href:"javascript:;",onClick:this.createForm,"data-automation-id":"create_new_form"},_mailpoet2.default.I18n.t("new"))),_react2.default.createElement(_listing2.default,{limit:window.mailpoet_listing_per_page,location:this.props.location,params:this.props.match.params,messages:messages,search:!1,endpoint:"forms",onRenderItem:this.renderItem,columns:columns,bulk_actions:bulkActions,item_actions:itemActions}))}}]),FormList}(_react2.default.Component);FormList.propTypes={location:_propTypes2.default.object.isRequired,match:_propTypes2.default.shape({params:_propTypes2.default.object}).isRequired},module.exports=FormList},429:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(18),__webpack_require__(5),__webpack_require__(2)],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(Backbone,jQuery,mp){var MailPoet=mp;0!==jQuery("#mailpoet_settings").length&&(MailPoet.Router=new(Backbone.Router.extend({routes:{"":"defaultRoute","mta(/:group)":"sendingMethodGroup","(:tab)":"tabs"},defaultRoute:function(){this.tabs("basics")},sendingMethodGroup:function(group){this.tabs("mta"),jQuery("#mailpoet_sending_method_setup, .mailpoet_sending_method").hide(),jQuery(".mailpoet_settings_submit").hide(),null===group?jQuery(".mailpoet_sending_methods, .mailpoet_sending_methods_help").fadeIn():(jQuery("#mailpoet_mta_spf")["mailpoet"===group?"hide":"show"](),jQuery(".mailpoet_sending_methods, .mailpoet_sending_methods_help").hide(),jQuery('.mailpoet_sending_method[data-group="'+group+'"]').show(),jQuery("#mailpoet_sending_method_setup").fadeIn())},tabs:function(tab){jQuery(".nav-tab-wrapper a").removeClass("nav-tab-active"),jQuery(".mailpoet_tab_panel, .mailpoet_section").hide(),jQuery('a.nav-tab[href="#'+tab+'"]').addClass("nav-tab-active").blur(),jQuery('.mailpoet_tab_panel[data-tab="'+tab+'"]').length>0&&jQuery('.mailpoet_tab_panel[data-tab="'+tab+'"]').show(),jQuery(".mailpoet_settings_submit").show(),MailPoet.trackEvent("User has clicked a tab in Settings",{"MailPoet Free version":window.mailpoet_version,"Tab ID":tab})}})),jQuery(document).ready(function(){Backbone.History.started||Backbone.history.start()}))}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},431:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(11),_reactDom2=_interopRequireDefault(_reactDom),_reactRouterDom=__webpack_require__(7),_knowledge_base=__webpack_require__(432),_knowledge_base2=_interopRequireDefault(_knowledge_base),_system_info=__webpack_require__(433),_system_info2=_interopRequireDefault(_system_info),_system_status=__webpack_require__(434),_system_status2=_interopRequireDefault(_system_status),_your_privacy=__webpack_require__(440),_your_privacy2=_interopRequireDefault(_your_privacy),container=document.getElementById("help_container");container&&_reactDom2.default.render(_react2.default.createElement(_reactRouterDom.HashRouter,null,_react2.default.createElement(_reactRouterDom.Switch,null,_react2.default.createElement(_reactRouterDom.Route,{exact:!0,path:"/",render:function(){return _react2.default.createElement(_reactRouterDom.Redirect,{to:"/knowledgeBase"})}}),_react2.default.createElement(_reactRouterDom.Route,{path:"/knowledgeBase",component:_knowledge_base2.default}),_react2.default.createElement(_reactRouterDom.Route,{path:"/systemStatus",component:_system_status2.default}),_react2.default.createElement(_reactRouterDom.Route,{path:"/systemInfo",component:_system_info2.default}),_react2.default.createElement(_reactRouterDom.Route,{path:"/yourPrivacy",component:_your_privacy2.default}))),container)},432:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function KnowledgeBase(){return _react2.default.createElement("div",null,_react2.default.createElement(_tabs2.default,{tab:"knowledgeBase"}),_react2.default.createElement("p",null,_mailpoet2.default.I18n.t("knowledgeBaseIntro")),_react2.default.createElement("ul",null,_react2.default.createElement("li",null,_react2.default.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://beta.docs.mailpoet.com/category/116-common-problems"},"Common Problems")),_react2.default.createElement("li",null,_react2.default.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://beta.docs.mailpoet.com/category/165-newsletters"},"Newsletters")),_react2.default.createElement("li",null,_react2.default.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://beta.docs.mailpoet.com/category/156-migration-questions"},"Migration Questions")),_react2.default.createElement("li",null,_react2.default.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://beta.docs.mailpoet.com/category/149-sending-methods"},"Sending Methods")),_react2.default.createElement("li",null,_react2.default.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://beta.docs.mailpoet.com/category/139-subscription-forms"},"Subscription Forms")),_react2.default.createElement("li",null,_react2.default.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://beta.docs.mailpoet.com/category/114-getting-started"},"Getting Started")),_react2.default.createElement("li",null,_react2.default.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://beta.docs.mailpoet.com/category/123-newsletter-designer"},"Newsletter Designer")),_react2.default.createElement("li",null,_react2.default.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://beta.docs.mailpoet.com/category/121-subscribers-and-lists"},"Subscribers and Lists"))),_react2.default.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://beta.docs.mailpoet.com/",className:"button button-primary"},_mailpoet2.default.I18n.t("knowledgeBaseButton")))}var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_tabs=__webpack_require__(188),_tabs2=_interopRequireDefault(_tabs);module.exports=KnowledgeBase},433:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function handleFocus(event){event.target.select()}function printData(data){if(_underscore2.default.isObject(data)){var printableData=Object.keys(data).map(function(key){return key+": "+data[key]});return _react2.default.createElement("textarea",{readOnly:!0,onFocus:handleFocus,value:printableData.join("\n"),style:{width:"100%",height:"400px"}})}return _react2.default.createElement("p",null,_mailpoet2.default.I18n.t("systemInfoDataError"))}function SystemInfo(){var systemInfoData=window.systemInfoData;return _react2.default.createElement("div",null,_react2.default.createElement(_tabs2.default,{tab:"systemInfo"}),_react2.default.createElement("div",{className:"mailpoet_notice notice inline",style:{marginTop:"1em"}},_react2.default.createElement("p",null,_mailpoet2.default.I18n.t("systemInfoIntro"))),printData(systemInfoData))}var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_underscore=__webpack_require__(4),_underscore2=_interopRequireDefault(_underscore),_tabs=__webpack_require__(188),_tabs2=_interopRequireDefault(_tabs);module.exports=SystemInfo},434:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function renderStatusMessage(status,error,link){var noticeType=status?"success":"error",noticeMessage=status?_mailpoet2.default.I18n.t("systemStatusConnectionSuccessful"):_mailpoet2.default.I18n.t("systemStatusConnectionUnsuccessful")+" "+error;return link&&(noticeMessage=(0,_reactStringReplace2.default)(noticeMessage,/\[link\](.*?)\[\/link\]/g,function(match){return _react2.default.createElement("a",{href:""+link,key:"kb-link"},match)})),_react2.default.createElement("div",{className:"mailpoet_notice notice inline notice-"+noticeType,style:{marginTop:"1em"}},_react2.default.createElement("p",null,noticeMessage))}function renderCronSection(data){var status=data.cron.isReachable,url=data.cron.url;return _react2.default.createElement("div",null,_react2.default.createElement("h2",null,_mailpoet2.default.I18n.t("systemStatusCronTitle")),_react2.default.createElement("p",null,_react2.default.createElement("a",{href:url,target:"_blank"},url)),renderStatusMessage(status,_mailpoet2.default.I18n.t("systemStatusCronConnectionUnsuccessfulInfo"),"//beta.docs.mailpoet.com/article/231-sending-does-not-work"))}function renderMSSSection(data){if(data.mss.enabled){var status=data.mss.enabled.isReachable;return _react2.default.createElement("div",null,_react2.default.createElement("h2",null,_mailpoet2.default.I18n.t("systemStatusMSSTitle")),renderStatusMessage(status,_mailpoet2.default.I18n.t("systemStatusMSSConnectionUnsuccessfulInfo"),!1))}}function SystemStatus(){var systemStatusData=window.systemStatusData;return _react2.default.createElement("div",null,_react2.default.createElement(_tabs2.default,{tab:"systemStatus"}),_react2.default.createElement("div",{className:"mailpoet_notice notice inline",style:{marginTop:"1em"}},_react2.default.createElement("p",null,systemStatusData.mss.enabled?_mailpoet2.default.I18n.t("systemStatusIntroCronMSS"):_mailpoet2.default.I18n.t("systemStatusIntroCron"))),renderCronSection(systemStatusData),renderMSSSection(systemStatusData),_react2.default.createElement(_cron_status2.default,{status_data:systemStatusData.cronStatus}),_react2.default.createElement(_queue_status2.default,{status_data:systemStatusData.queueStatus}))}var _mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_reactStringReplace=__webpack_require__(22),_reactStringReplace2=_interopRequireDefault(_reactStringReplace),_cron_status=__webpack_require__(435),_cron_status2=_interopRequireDefault(_cron_status),_queue_status=__webpack_require__(437),_queue_status2=_interopRequireDefault(_queue_status),_tabs=__webpack_require__(188),_tabs2=_interopRequireDefault(_tabs);module.exports=SystemStatus},435:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_key_value_table=__webpack_require__(295),_key_value_table2=_interopRequireDefault(_key_value_table),_print_boolean=__webpack_require__(436),_print_boolean2=_interopRequireDefault(_print_boolean),CronStatus=function(props){var status=props.status_data,activeStatusMapping={active:_mailpoet2.default.I18n.t("running"),inactive:_mailpoet2.default.I18n.t("cronWaiting")};return _react2.default.createElement("div",null,_react2.default.createElement("h2",null,_mailpoet2.default.I18n.t("systemStatusCronStatusTitle")),_react2.default.createElement(_key_value_table2.default,{max_width:"400px",rows:[{key:_mailpoet2.default.I18n.t("accessible"),value:_react2.default.createElement(_print_boolean2.default,null,status.accessible)},{key:_mailpoet2.default.I18n.t("status"),value:activeStatusMapping[status.status]?activeStatusMapping[status.status]:_mailpoet2.default.I18n.t("unknown")},{key:_mailpoet2.default.I18n.t("lastUpdated"),value:status.updated_at?_mailpoet2.default.Date.full(1e3*status.updated_at):_mailpoet2.default.I18n.t("unknown")},{key:_mailpoet2.default.I18n.t("lastRunStarted"),value:status.run_accessed_at?_mailpoet2.default.Date.full(1e3*status.run_started_at):_mailpoet2.default.I18n.t("unknown")},{key:_mailpoet2.default.I18n.t("lastRunCompleted"),value:status.run_completed_at?_mailpoet2.default.Date.full(1e3*status.run_completed_at):_mailpoet2.default.I18n.t("unknown")},{key:_mailpoet2.default.I18n.t("lastSeenError"),value:status.last_error||_mailpoet2.default.I18n.t("none")}]}))};CronStatus.propTypes={status_data:_propTypes2.default.shape({accessible:_propTypes2.default.bool,status:_propTypes2.default.string,updated_at:_propTypes2.default.number,run_accessed_at:_propTypes2.default.number,run_completed_at:_propTypes2.default.number}).isRequired},CronStatus.defaultProps={status_data:{accessible:null,status:null,updated_at:null,run_accessed_at:null,run_completed_at:null}},module.exports=CronStatus},436:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),PrintBoolean=function(props){return _react2.default.createElement("span",null,!0===props.children&&props.truthy||!1===props.children&&props.falsy||props.unknown)};PrintBoolean.propTypes={truthy:_propTypes2.default.string,falsy:_propTypes2.default.string,unknown:_propTypes2.default.string,children:_propTypes2.default.bool},PrintBoolean.defaultProps={truthy:_mailpoet2.default.I18n.t("yes"),falsy:_mailpoet2.default.I18n.t("no"),unknown:_mailpoet2.default.I18n.t("unknown"),children:null},module.exports=PrintBoolean},437:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_key_value_table=__webpack_require__(295),_key_value_table2=_interopRequireDefault(_key_value_table),_tasks_list=__webpack_require__(438),_tasks_list2=_interopRequireDefault(_tasks_list),_tasks_list_data_row=__webpack_require__(296),_tasks_list_data_row2=_interopRequireDefault(_tasks_list_data_row),QueueStatus=function(props){var status=props.status_data;return _react2.default.createElement("div",null,_react2.default.createElement("h2",null,_mailpoet2.default.I18n.t("systemStatusQueueTitle")),_react2.default.createElement(_key_value_table2.default,{max_width:"400px",rows:[{key:_mailpoet2.default.I18n.t("status"),value:"paused"===status.status?_mailpoet2.default.I18n.t("paused"):_mailpoet2.default.I18n.t("running")},{key:_mailpoet2.default.I18n.t("startedAt"),value:status.started?_mailpoet2.default.Date.full(1e3*status.started):_mailpoet2.default.I18n.t("unknown")},{key:_mailpoet2.default.I18n.t("sentEmails"),value:status.sent||0},{key:_mailpoet2.default.I18n.t("retryAttempt"),value:status.retry_attempt||_mailpoet2.default.I18n.t("none")},{key:_mailpoet2.default.I18n.t("retryAt"),value:status.retry_at?_mailpoet2.default.Date.full(1e3*status.retry_at):_mailpoet2.default.I18n.t("none")},{key:_mailpoet2.default.I18n.t("error"),value:status.error?status.error.error_message:_mailpoet2.default.I18n.t("none")},{key:_mailpoet2.default.I18n.t("totalCompletedTasks"),value:status.tasksStatusCounts.completed},{key:_mailpoet2.default.I18n.t("totalRunningTasks"),value:status.tasksStatusCounts.running},{key:_mailpoet2.default.I18n.t("totalPausedTasks"),value:status.tasksStatusCounts.paused},{key:_mailpoet2.default.I18n.t("totalScheduledTasks"),value:status.tasksStatusCounts.scheduled}]}),_react2.default.createElement("h4",null,_mailpoet2.default.I18n.t("scheduledTasks")),_react2.default.createElement(_tasks_list2.default,{show_scheduled_at:!0,tasks:status.latestTasks.filter(function(task){return"scheduled"===task.status})}),_react2.default.createElement("h4",null,_mailpoet2.default.I18n.t("runningTasks")),_react2.default.createElement(_tasks_list2.default,{tasks:status.latestTasks.filter(function(task){return null===task.status})}),_react2.default.createElement("h4",null,_mailpoet2.default.I18n.t("completedTasks")),_react2.default.createElement(_tasks_list2.default,{tasks:status.latestTasks.filter(function(task){return"completed"===task.status})}))};QueueStatus.propTypes={status_data:_propTypes2.default.shape({status:_propTypes2.default.string,started:_propTypes2.default.number,sent:_propTypes2.default.number,retry_attempt:_propTypes2.default.number,retry_at:_propTypes2.default.number,error:_propTypes2.default.shape({operation:_propTypes2.default.string,error_message:_propTypes2.default.string}),tasksStatusCounts:_propTypes2.default.shape({completed:_propTypes2.default.number.isRequired,running:_propTypes2.default.number.isRequired,paused:_propTypes2.default.number.isRequired,scheduled:_propTypes2.default.number.isRequired}).isRequired,latestTasks:_propTypes2.default.arrayOf(_tasks_list_data_row2.default.propTypes.task).isRequired}).isRequired},QueueStatus.defaultProps={status_data:{status:null,started:null,sent:null,retry_attempt:null,retry_at:null,error:null}},module.exports=QueueStatus},438:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_tasks_list_data_row=__webpack_require__(296),_tasks_list_data_row2=_interopRequireDefault(_tasks_list_data_row),_tasks_list_labels_row=__webpack_require__(439),_tasks_list_labels_row2=_interopRequireDefault(_tasks_list_labels_row),TasksList=function(props){var colsCount=props.show_scheduled_at?6:5;return _react2.default.createElement("table",{className:"widefat fixed striped"},_react2.default.createElement("thead",null,_react2.default.createElement(_tasks_list_labels_row2.default,{show_scheduled_at:props.show_scheduled_at})),_react2.default.createElement("tbody",null,props.tasks.length?props.tasks.map(function(task){return _react2.default.createElement(_tasks_list_data_row2.default,{key:task.id,task:task,show_scheduled_at:props.show_scheduled_at})}):_react2.default.createElement("tr",{className:"no-items"},_react2.default.createElement("td",{colSpan:colsCount},_mailpoet2.default.I18n.t("nothingToShow")))),_react2.default.createElement("tfoot",null,_react2.default.createElement(_tasks_list_labels_row2.default,{show_scheduled_at:props.show_scheduled_at})))};TasksList.propTypes={show_scheduled_at:_propTypes2.default.bool,tasks:_propTypes2.default.arrayOf(_tasks_list_data_row2.default.propTypes.task).isRequired},TasksList.defaultProps={show_scheduled_at:!1},module.exports=TasksList},439:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),TasksListLabelsRow=function(props){return _react2.default.createElement("tr",null,_react2.default.createElement("th",{className:"row-title"},"Id"),_react2.default.createElement("th",{className:"row-title"},_mailpoet2.default.I18n.t("type")),_react2.default.createElement("th",{className:"row-title"},_mailpoet2.default.I18n.t("email")),_react2.default.createElement("th",{className:"row-title"},_mailpoet2.default.I18n.t("priority")),props.show_scheduled_at?_react2.default.createElement("th",{className:"row-title"},_mailpoet2.default.I18n.t("scheduledAt")):null,_react2.default.createElement("th",{className:"row-title"},_mailpoet2.default.I18n.t("updatedAt")))};TasksListLabelsRow.propTypes={show_scheduled_at:_propTypes2.default.bool},TasksListLabelsRow.defaultProps={show_scheduled_at:!1},module.exports=TasksListLabelsRow},440:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function YourPrivacy(){return _react2.default.createElement("div",null,_react2.default.createElement(_tabs2.default,{tab:"yourPrivacy"}),_react2.default.createElement("p",null,_mailpoet2.default.I18n.t("yourPrivacyContent1")),_react2.default.createElement("p",null,_mailpoet2.default.I18n.t("yourPrivacyContent2")),_react2.default.createElement("p",null,_mailpoet2.default.I18n.t("yourPrivacyContent3")),_react2.default.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"https://www.mailpoet.com/privacy-notice/",className:"button button-primary"},_mailpoet2.default.I18n.t("yourPrivacyButton")))}var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_tabs=__webpack_require__(188),_tabs2=_interopRequireDefault(_tabs);module.exports=YourPrivacy},441:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function Intro(){if(!(introActive||innerWidth<=960)){var intro=(0,_intro2.default)();intro.setOptions({steps:introSteps,nextLabel:_mailpoet2.default.I18n.t("introNext")+" →",prevLabel:"← "+_mailpoet2.default.I18n.t("introBack"),skipLabel:_mailpoet2.default.I18n.t("introSkip"),doneLabel:_mailpoet2.default.I18n.t("introDone"),positionPrecedence:["right","left","bottom","top"],buttonClass:"button",hidePrev:!0,hideNext:!0,helperElementPadding:12,scrollToElement:!1,showStepNumbers:!1,tooltipPosition:"auto"}),intro.onbeforechange(function(){var step=intro._currentStep,element=introSteps[step].element;intro._introItems[step].element="string"==typeof element?document.querySelector(element):element}),intro.onafterchange(function(targetElement){if("fixed"===getComputedStyle(targetElement).getPropertyValue("position")){var helperLayer=document.querySelector(".introjs-helperLayer"),referenceLayer=document.querySelector(".introjs-tooltipReferenceLayer");referenceLayer.style.top=parseInt(referenceLayer.style.top,10)-pageYOffset+"px",helperLayer.style.top=parseInt(helperLayer.style.top,10)-pageYOffset+"px"}}),intro.onexit(function(){introActive=!1,document.body.classList.remove("mailpoet-intro-active")}),intro.onskip(function(){_mailpoet2.default.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"settings",action:"set",data:{show_intro:0}})}),intro.start(),introActive=!0,document.body.classList.add("mailpoet-intro-active")}}var _intro=__webpack_require__(442),_intro2=_interopRequireDefault(_intro),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),introSteps=[{element:document.querySelector("#toplevel_page_mailpoet-newsletters > ul > li > a[href*=mailpoet-segments]").parentNode,intro:_mailpoet2.default.I18n.t("introLists")},{element:document.querySelector("#toplevel_page_mailpoet-newsletters > ul > li > a[href*=mailpoet-forms]").parentNode,intro:_mailpoet2.default.I18n.t("introForms")},{element:"#hs-beacon:not(.hs-beacon-hidden) iframe, .olark-launch-button",intro:_mailpoet2.default.I18n.t("introChat")},{element:"#mailpoet-new-email",intro:_mailpoet2.default.I18n.t("introEmails")}],introActive=!1;_mailpoet2.default.showIntro=Intro},442:function(module,exports,__webpack_require__){!function(f){module.exports=f(),module.exports.introJs=function(){return console.warn('Deprecated: please use require("intro.js") directly, instead of the introJs method of the function'),f().apply(this,arguments)}}(function(){function IntroJs(obj){this._targetElement=obj,this._introItems=[],this._options={nextLabel:"Next &rarr;",prevLabel:"&larr; Back",skipLabel:"Skip",doneLabel:"Done",hidePrev:!1,hideNext:!1,tooltipPosition:"bottom",tooltipClass:"",highlightClass:"",exitOnEsc:!0,exitOnOverlayClick:!0,showStepNumbers:!0,keyboardNavigation:!0,showButtons:!0,showBullets:!0,showProgress:!1,scrollToElement:!0,scrollTo:"element",scrollPadding:30,overlayOpacity:.8,positionPrecedence:["bottom","top","right","left"],disableInteraction:!1,helperElementPadding:10,hintPosition:"top-middle",hintButtonLabel:"Got it",hintAnimation:!0,buttonClass:"introjs-button"}}function _introForElement(targetElm,group){var allIntroSteps=targetElm.querySelectorAll("*[data-intro]"),introItems=[];if(this._options.steps)_forEach(this._options.steps,function(step){var currentItem=_cloneObject(step);if(currentItem.step=introItems.length+1,"string"==typeof currentItem.element&&(currentItem.element=document.querySelector(currentItem.element)),void 0===currentItem.element||null===currentItem.element){var floatingElementQuery=document.querySelector(".introjsFloatingElement");null===floatingElementQuery&&(floatingElementQuery=document.createElement("div"),floatingElementQuery.className="introjsFloatingElement",document.body.appendChild(floatingElementQuery)),currentItem.element=floatingElementQuery,currentItem.position="floating"}currentItem.scrollTo=currentItem.scrollTo||this._options.scrollTo,void 0===currentItem.disableInteraction&&(currentItem.disableInteraction=this._options.disableInteraction),null!==currentItem.element&&introItems.push(currentItem)}.bind(this));else{var disableInteraction,elmsLength=allIntroSteps.length;if(elmsLength<1)return!1;_forEach(allIntroSteps,function(currentElement){if((!group||currentElement.getAttribute("data-intro-group")===group)&&"none"!==currentElement.style.display){var step=parseInt(currentElement.getAttribute("data-step"),10);disableInteraction=void 0!==currentElement.getAttribute("data-disable-interaction")?!!currentElement.getAttribute("data-disable-interaction"):this._options.disableInteraction,step>0&&(introItems[step-1]={element:currentElement,intro:currentElement.getAttribute("data-intro"),step:parseInt(currentElement.getAttribute("data-step"),10),tooltipClass:currentElement.getAttribute("data-tooltipclass"),highlightClass:currentElement.getAttribute("data-highlightclass"),position:currentElement.getAttribute("data-position")||this._options.tooltipPosition,scrollTo:currentElement.getAttribute("data-scrollto")||this._options.scrollTo,disableInteraction:disableInteraction})}}.bind(this));var nextStep=0;_forEach(allIntroSteps,function(currentElement){if((!group||currentElement.getAttribute("data-intro-group")===group)&&null===currentElement.getAttribute("data-step")){for(;;){if(void 0===introItems[nextStep])break;nextStep++}disableInteraction=void 0!==currentElement.getAttribute("data-disable-interaction")?!!currentElement.getAttribute("data-disable-interaction"):this._options.disableInteraction,introItems[nextStep]={element:currentElement,intro:currentElement.getAttribute("data-intro"),step:nextStep+1,tooltipClass:currentElement.getAttribute("data-tooltipclass"),highlightClass:currentElement.getAttribute("data-highlightclass"),position:currentElement.getAttribute("data-position")||this._options.tooltipPosition,scrollTo:currentElement.getAttribute("data-scrollto")||this._options.scrollTo,disableInteraction:disableInteraction}}}.bind(this))}for(var tempIntroItems=[],z=0;z<introItems.length;z++)introItems[z]&&tempIntroItems.push(introItems[z]);return introItems=tempIntroItems,introItems.sort(function(a,b){return a.step-b.step}),this._introItems=introItems,_addOverlayLayer.call(this,targetElm)&&(_nextStep.call(this),this._options.keyboardNavigation&&DOMEvent.on(window,"keydown",_onKeyDown,this,!0),DOMEvent.on(window,"resize",_onResize,this,!0)),!1}function _onResize(){this.refresh.call(this)}function _onKeyDown(e){var code=null===e.code?e.which:e.code;if(null===code&&(code=null===e.charCode?e.keyCode:e.charCode),"Escape"!==code&&27!==code||!0!==this._options.exitOnEsc){if("ArrowLeft"===code||37===code)_previousStep.call(this);else if("ArrowRight"===code||39===code)_nextStep.call(this);else if("Enter"===code||13===code){var target=e.target||e.srcElement;target&&target.className.match("introjs-prevbutton")?_previousStep.call(this):target&&target.className.match("introjs-skipbutton")?(this._introItems.length-1===this._currentStep&&"function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this),_exitIntro.call(this,this._targetElement)):target&&target.getAttribute("data-stepnumber")?target.click():_nextStep.call(this),e.preventDefault?e.preventDefault():e.returnValue=!1}}else _exitIntro.call(this,this._targetElement)}function _cloneObject(object){if(null===object||"object"!=typeof object||void 0!==object.nodeType)return object;var temp={};for(var key in object)void 0!==window.jQuery&&object[key]instanceof window.jQuery?temp[key]=object[key]:temp[key]=_cloneObject(object[key]);return temp}function _goToStep(step){this._currentStep=step-2,void 0!==this._introItems&&_nextStep.call(this)}function _goToStepNumber(step){this._currentStepNumber=step,void 0!==this._introItems&&_nextStep.call(this)}function _nextStep(){this._direction="forward",void 0!==this._currentStepNumber&&_forEach(this._introItems,function(item,i){item.step===this._currentStepNumber&&(this._currentStep=i-1,this._currentStepNumber=void 0)}.bind(this)),void 0===this._currentStep?this._currentStep=0:++this._currentStep;var nextStep=this._introItems[this._currentStep],continueStep=!0;return void 0!==this._introBeforeChangeCallback&&(continueStep=this._introBeforeChangeCallback.call(this,nextStep.element)),!1===continueStep?(--this._currentStep,!1):this._introItems.length<=this._currentStep?("function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this),void _exitIntro.call(this,this._targetElement)):void _showElement.call(this,nextStep)}function _previousStep(){if(this._direction="backward",0===this._currentStep)return!1;--this._currentStep;var nextStep=this._introItems[this._currentStep],continueStep=!0;if(void 0!==this._introBeforeChangeCallback&&(continueStep=this._introBeforeChangeCallback.call(this,nextStep.element)),!1===continueStep)return++this._currentStep,!1;_showElement.call(this,nextStep)}function _refresh(){if(_setHelperLayerPosition.call(this,document.querySelector(".introjs-helperLayer")),_setHelperLayerPosition.call(this,document.querySelector(".introjs-tooltipReferenceLayer")),_setHelperLayerPosition.call(this,document.querySelector(".introjs-disableInteraction")),void 0!==this._currentStep&&null!==this._currentStep){var oldHelperNumberLayer=document.querySelector(".introjs-helperNumberLayer"),oldArrowLayer=document.querySelector(".introjs-arrow"),oldtooltipContainer=document.querySelector(".introjs-tooltip");_placeTooltip.call(this,this._introItems[this._currentStep].element,oldtooltipContainer,oldArrowLayer,oldHelperNumberLayer)}return _reAlignHints.call(this),this}function _exitIntro(targetElement,force){var continueExit=!0;if(void 0!==this._introBeforeExitCallback&&(continueExit=this._introBeforeExitCallback.call(this)),force||!1!==continueExit){var overlayLayers=targetElement.querySelectorAll(".introjs-overlay");overlayLayers&&overlayLayers.length&&_forEach(overlayLayers,function(overlayLayer){overlayLayer.style.opacity=0,window.setTimeout(function(){this.parentNode&&this.parentNode.removeChild(this)}.bind(overlayLayer),500)}.bind(this));var helperLayer=targetElement.querySelector(".introjs-helperLayer");helperLayer&&helperLayer.parentNode.removeChild(helperLayer);var referenceLayer=targetElement.querySelector(".introjs-tooltipReferenceLayer");referenceLayer&&referenceLayer.parentNode.removeChild(referenceLayer);var disableInteractionLayer=targetElement.querySelector(".introjs-disableInteraction");disableInteractionLayer&&disableInteractionLayer.parentNode.removeChild(disableInteractionLayer);var floatingElement=document.querySelector(".introjsFloatingElement");floatingElement&&floatingElement.parentNode.removeChild(floatingElement),_removeShowElement();_forEach(document.querySelectorAll(".introjs-fixParent"),function(parent){_removeClass(parent,/introjs-fixParent/g)}),DOMEvent.off(window,"keydown",_onKeyDown,this,!0),DOMEvent.off(window,"resize",_onResize,this,!0),void 0!==this._introExitCallback&&this._introExitCallback.call(this),this._currentStep=void 0}}function _placeTooltip(targetElement,tooltipLayer,arrowLayer,helperNumberLayer,hintMode){var currentStepObj,tooltipOffset,targetOffset,windowSize,currentTooltipPosition,tooltipCssClass="";if(hintMode=hintMode||!1,tooltipLayer.style.top=null,tooltipLayer.style.right=null,tooltipLayer.style.bottom=null,tooltipLayer.style.left=null,tooltipLayer.style.marginLeft=null,tooltipLayer.style.marginTop=null,arrowLayer.style.display="inherit",void 0!==helperNumberLayer&&null!==helperNumberLayer&&(helperNumberLayer.style.top=null,helperNumberLayer.style.left=null),this._introItems[this._currentStep]){currentStepObj=this._introItems[this._currentStep],tooltipCssClass="string"==typeof currentStepObj.tooltipClass?currentStepObj.tooltipClass:this._options.tooltipClass,tooltipLayer.className=("introjs-tooltip "+tooltipCssClass).replace(/^\s+|\s+$/g,""),tooltipLayer.setAttribute("role","dialog"),currentTooltipPosition=this._introItems[this._currentStep].position,"floating"!==currentTooltipPosition&&(currentTooltipPosition=_determineAutoPosition.call(this,targetElement,tooltipLayer,currentTooltipPosition));var tooltipLayerStyleLeft;switch(targetOffset=_getOffset(targetElement),tooltipOffset=_getOffset(tooltipLayer),windowSize=_getWinSize(),_addClass(tooltipLayer,"introjs-"+currentTooltipPosition),currentTooltipPosition){case"top-right-aligned":arrowLayer.className="introjs-arrow bottom-right";var tooltipLayerStyleRight=0;_checkLeft(targetOffset,tooltipLayerStyleRight,tooltipOffset,tooltipLayer),tooltipLayer.style.bottom=targetOffset.height+20+"px";break;case"top-middle-aligned":arrowLayer.className="introjs-arrow bottom-middle";var tooltipLayerStyleLeftRight=targetOffset.width/2-tooltipOffset.width/2;hintMode&&(tooltipLayerStyleLeftRight+=5),_checkLeft(targetOffset,tooltipLayerStyleLeftRight,tooltipOffset,tooltipLayer)&&(tooltipLayer.style.right=null,_checkRight(targetOffset,tooltipLayerStyleLeftRight,tooltipOffset,windowSize,tooltipLayer)),tooltipLayer.style.bottom=targetOffset.height+20+"px";break;case"top-left-aligned":case"top":arrowLayer.className="introjs-arrow bottom",tooltipLayerStyleLeft=hintMode?0:15,_checkRight(targetOffset,tooltipLayerStyleLeft,tooltipOffset,windowSize,tooltipLayer),tooltipLayer.style.bottom=targetOffset.height+20+"px";break;case"right":tooltipLayer.style.left=targetOffset.width+20+"px",targetOffset.top+tooltipOffset.height>windowSize.height?(arrowLayer.className="introjs-arrow left-bottom",tooltipLayer.style.top="-"+(tooltipOffset.height-targetOffset.height-20)+"px"):arrowLayer.className="introjs-arrow left";break;case"left":hintMode||!0!==this._options.showStepNumbers||(tooltipLayer.style.top="15px"),targetOffset.top+tooltipOffset.height>windowSize.height?(tooltipLayer.style.top="-"+(tooltipOffset.height-targetOffset.height-20)+"px",arrowLayer.className="introjs-arrow right-bottom"):arrowLayer.className="introjs-arrow right",tooltipLayer.style.right=targetOffset.width+20+"px";break;case"floating":arrowLayer.style.display="none",tooltipLayer.style.left="50%",tooltipLayer.style.top="50%",tooltipLayer.style.marginLeft="-"+tooltipOffset.width/2+"px",tooltipLayer.style.marginTop="-"+tooltipOffset.height/2+"px",void 0!==helperNumberLayer&&null!==helperNumberLayer&&(helperNumberLayer.style.left="-"+(tooltipOffset.width/2+18)+"px",helperNumberLayer.style.top="-"+(tooltipOffset.height/2+18)+"px");break;case"bottom-right-aligned":arrowLayer.className="introjs-arrow top-right",tooltipLayerStyleRight=0,_checkLeft(targetOffset,tooltipLayerStyleRight,tooltipOffset,tooltipLayer),tooltipLayer.style.top=targetOffset.height+20+"px";break;case"bottom-middle-aligned":arrowLayer.className="introjs-arrow top-middle",tooltipLayerStyleLeftRight=targetOffset.width/2-tooltipOffset.width/2,hintMode&&(tooltipLayerStyleLeftRight+=5),_checkLeft(targetOffset,tooltipLayerStyleLeftRight,tooltipOffset,tooltipLayer)&&(tooltipLayer.style.right=null,_checkRight(targetOffset,tooltipLayerStyleLeftRight,tooltipOffset,windowSize,tooltipLayer)),tooltipLayer.style.top=targetOffset.height+20+"px";break;default:arrowLayer.className="introjs-arrow top",tooltipLayerStyleLeft=0,_checkRight(targetOffset,tooltipLayerStyleLeft,tooltipOffset,windowSize,tooltipLayer),tooltipLayer.style.top=targetOffset.height+20+"px"}}}function _checkRight(targetOffset,tooltipLayerStyleLeft,tooltipOffset,windowSize,tooltipLayer){return targetOffset.left+tooltipLayerStyleLeft+tooltipOffset.width>windowSize.width?(tooltipLayer.style.left=windowSize.width-tooltipOffset.width-targetOffset.left+"px",!1):(tooltipLayer.style.left=tooltipLayerStyleLeft+"px",!0)}function _checkLeft(targetOffset,tooltipLayerStyleRight,tooltipOffset,tooltipLayer){return targetOffset.left+targetOffset.width-tooltipLayerStyleRight-tooltipOffset.width<0?(tooltipLayer.style.left=-targetOffset.left+"px",!1):(tooltipLayer.style.right=tooltipLayerStyleRight+"px",!0)}function _determineAutoPosition(targetElement,tooltipLayer,desiredTooltipPosition){var possiblePositions=this._options.positionPrecedence.slice(),windowSize=_getWinSize(),tooltipHeight=_getOffset(tooltipLayer).height+10,tooltipWidth=_getOffset(tooltipLayer).width+20,targetElementRect=targetElement.getBoundingClientRect(),calculatedPosition="floating";targetElementRect.bottom+tooltipHeight+tooltipHeight>windowSize.height&&_removeEntry(possiblePositions,"bottom"),targetElementRect.top-tooltipHeight<0&&_removeEntry(possiblePositions,"top"),targetElementRect.right+tooltipWidth>windowSize.width&&_removeEntry(possiblePositions,"right"),targetElementRect.left-tooltipWidth<0&&_removeEntry(possiblePositions,"left");var desiredAlignment=function(pos){var hyphenIndex=pos.indexOf("-");return-1!==hyphenIndex?pos.substr(hyphenIndex):""}(desiredTooltipPosition||"");return desiredTooltipPosition&&(desiredTooltipPosition=desiredTooltipPosition.split("-")[0]),possiblePositions.length&&(calculatedPosition="auto"!==desiredTooltipPosition&&possiblePositions.indexOf(desiredTooltipPosition)>-1?desiredTooltipPosition:possiblePositions[0]),-1!==["top","bottom"].indexOf(calculatedPosition)&&(calculatedPosition+=_determineAutoAlignment(targetElementRect.left,tooltipWidth,windowSize,desiredAlignment)),calculatedPosition}function _determineAutoAlignment(offsetLeft,tooltipWidth,windowSize,desiredAlignment){var halfTooltipWidth=tooltipWidth/2,winWidth=Math.min(windowSize.width,window.screen.width),possibleAlignments=["-left-aligned","-middle-aligned","-right-aligned"];return winWidth-offsetLeft<tooltipWidth&&_removeEntry(possibleAlignments,"-left-aligned"),(offsetLeft<halfTooltipWidth||winWidth-offsetLeft<halfTooltipWidth)&&_removeEntry(possibleAlignments,"-middle-aligned"),offsetLeft<tooltipWidth&&_removeEntry(possibleAlignments,"-right-aligned"),possibleAlignments.length?-1!==possibleAlignments.indexOf(desiredAlignment)?desiredAlignment:possibleAlignments[0]:"-middle-aligned"}function _removeEntry(stringArray,stringToRemove){stringArray.indexOf(stringToRemove)>-1&&stringArray.splice(stringArray.indexOf(stringToRemove),1)}function _setHelperLayerPosition(helperLayer){if(helperLayer){if(!this._introItems[this._currentStep])return;var currentElement=this._introItems[this._currentStep],elementPosition=_getOffset(currentElement.element),widthHeightPadding=this._options.helperElementPadding;_isFixed(currentElement.element)?_addClass(helperLayer,"introjs-fixedTooltip"):_removeClass(helperLayer,"introjs-fixedTooltip"),"floating"===currentElement.position&&(widthHeightPadding=0),helperLayer.style.cssText="width: "+(elementPosition.width+widthHeightPadding)+"px; height:"+(elementPosition.height+widthHeightPadding)+"px; top:"+(elementPosition.top-widthHeightPadding/2)+"px;left: "+(elementPosition.left-widthHeightPadding/2)+"px;"}}function _disableInteraction(){var disableInteractionLayer=document.querySelector(".introjs-disableInteraction");null===disableInteractionLayer&&(disableInteractionLayer=document.createElement("div"),disableInteractionLayer.className="introjs-disableInteraction",this._targetElement.appendChild(disableInteractionLayer)),_setHelperLayerPosition.call(this,disableInteractionLayer)}function _setAnchorAsButton(anchor){anchor.setAttribute("role","button"),anchor.tabIndex=0}function _showElement(targetElement){void 0!==this._introChangeCallback&&this._introChangeCallback.call(this,targetElement.element);var nextTooltipButton,prevTooltipButton,skipTooltipButton,scrollParent,self=this,oldHelperLayer=document.querySelector(".introjs-helperLayer"),oldReferenceLayer=document.querySelector(".introjs-tooltipReferenceLayer"),highlightClass="introjs-helperLayer";if("string"==typeof targetElement.highlightClass&&(highlightClass+=" "+targetElement.highlightClass),"string"==typeof this._options.highlightClass&&(highlightClass+=" "+this._options.highlightClass),null!==oldHelperLayer){var oldHelperNumberLayer=oldReferenceLayer.querySelector(".introjs-helperNumberLayer"),oldtooltipLayer=oldReferenceLayer.querySelector(".introjs-tooltiptext"),oldArrowLayer=oldReferenceLayer.querySelector(".introjs-arrow"),oldtooltipContainer=oldReferenceLayer.querySelector(".introjs-tooltip");if(skipTooltipButton=oldReferenceLayer.querySelector(".introjs-skipbutton"),prevTooltipButton=oldReferenceLayer.querySelector(".introjs-prevbutton"),nextTooltipButton=oldReferenceLayer.querySelector(".introjs-nextbutton"),oldHelperLayer.className=highlightClass,oldtooltipContainer.style.opacity=0,oldtooltipContainer.style.display="none",null!==oldHelperNumberLayer){var lastIntroItem=this._introItems[targetElement.step-2>=0?targetElement.step-2:0];(null!==lastIntroItem&&"forward"===this._direction&&"floating"===lastIntroItem.position||"backward"===this._direction&&"floating"===targetElement.position)&&(oldHelperNumberLayer.style.opacity=0)}scrollParent=_getScrollParent(targetElement.element),scrollParent!==document.body&&_scrollParentToElement(scrollParent,targetElement.element),_setHelperLayerPosition.call(self,oldHelperLayer),_setHelperLayerPosition.call(self,oldReferenceLayer);_forEach(document.querySelectorAll(".introjs-fixParent"),function(parent){_removeClass(parent,/introjs-fixParent/g)}),_removeShowElement(),self._lastShowElementTimer&&window.clearTimeout(self._lastShowElementTimer),self._lastShowElementTimer=window.setTimeout(function(){null!==oldHelperNumberLayer&&(oldHelperNumberLayer.innerHTML=targetElement.step),oldtooltipLayer.innerHTML=targetElement.intro,oldtooltipContainer.style.display="block",_placeTooltip.call(self,targetElement.element,oldtooltipContainer,oldArrowLayer,oldHelperNumberLayer),self._options.showBullets&&(oldReferenceLayer.querySelector(".introjs-bullets li > a.active").className="",oldReferenceLayer.querySelector('.introjs-bullets li > a[data-stepnumber="'+targetElement.step+'"]').className="active"),oldReferenceLayer.querySelector(".introjs-progress .introjs-progressbar").style.cssText="width:"+_getProgress.call(self)+"%;",oldReferenceLayer.querySelector(".introjs-progress .introjs-progressbar").setAttribute("aria-valuenow",_getProgress.call(self)),oldtooltipContainer.style.opacity=1,oldHelperNumberLayer&&(oldHelperNumberLayer.style.opacity=1),void 0!==skipTooltipButton&&null!==skipTooltipButton&&/introjs-donebutton/gi.test(skipTooltipButton.className)?skipTooltipButton.focus():void 0!==nextTooltipButton&&null!==nextTooltipButton&&nextTooltipButton.focus(),_scrollTo.call(self,targetElement.scrollTo,targetElement,oldtooltipLayer)},350)}else{var helperLayer=document.createElement("div"),referenceLayer=document.createElement("div"),arrowLayer=document.createElement("div"),tooltipLayer=document.createElement("div"),tooltipTextLayer=document.createElement("div"),bulletsLayer=document.createElement("div"),progressLayer=document.createElement("div"),buttonsLayer=document.createElement("div");helperLayer.className=highlightClass,referenceLayer.className="introjs-tooltipReferenceLayer",scrollParent=_getScrollParent(targetElement.element),scrollParent!==document.body&&_scrollParentToElement(scrollParent,targetElement.element),_setHelperLayerPosition.call(self,helperLayer),_setHelperLayerPosition.call(self,referenceLayer),this._targetElement.appendChild(helperLayer),this._targetElement.appendChild(referenceLayer),arrowLayer.className="introjs-arrow",tooltipTextLayer.className="introjs-tooltiptext",tooltipTextLayer.innerHTML=targetElement.intro,bulletsLayer.className="introjs-bullets",!1===this._options.showBullets&&(bulletsLayer.style.display="none");var ulContainer=document.createElement("ul");ulContainer.setAttribute("role","tablist");var anchorClick=function(){self.goToStep(this.getAttribute("data-stepnumber"))};_forEach(this._introItems,function(item,i){var innerLi=document.createElement("li"),anchorLink=document.createElement("a");innerLi.setAttribute("role","presentation"),anchorLink.setAttribute("role","tab"),anchorLink.onclick=anchorClick,i===targetElement.step-1&&(anchorLink.className="active"),_setAnchorAsButton(anchorLink),anchorLink.innerHTML="&nbsp;",anchorLink.setAttribute("data-stepnumber",item.step),innerLi.appendChild(anchorLink),ulContainer.appendChild(innerLi)}),bulletsLayer.appendChild(ulContainer),progressLayer.className="introjs-progress",!1===this._options.showProgress&&(progressLayer.style.display="none");var progressBar=document.createElement("div");progressBar.className="introjs-progressbar",progressBar.setAttribute("role","progress"),progressBar.setAttribute("aria-valuemin",0),progressBar.setAttribute("aria-valuemax",100),progressBar.setAttribute("aria-valuenow",_getProgress.call(this)),progressBar.style.cssText="width:"+_getProgress.call(this)+"%;",progressLayer.appendChild(progressBar),buttonsLayer.className="introjs-tooltipbuttons",!1===this._options.showButtons&&(buttonsLayer.style.display="none"),tooltipLayer.className="introjs-tooltip",tooltipLayer.appendChild(tooltipTextLayer),tooltipLayer.appendChild(bulletsLayer),tooltipLayer.appendChild(progressLayer);var helperNumberLayer=document.createElement("span");!0===this._options.showStepNumbers&&(helperNumberLayer.className="introjs-helperNumberLayer",helperNumberLayer.innerHTML=targetElement.step,referenceLayer.appendChild(helperNumberLayer)),tooltipLayer.appendChild(arrowLayer),referenceLayer.appendChild(tooltipLayer),nextTooltipButton=document.createElement("a"),nextTooltipButton.onclick=function(){self._introItems.length-1!==self._currentStep&&_nextStep.call(self)},_setAnchorAsButton(nextTooltipButton),nextTooltipButton.innerHTML=this._options.nextLabel,prevTooltipButton=document.createElement("a"),prevTooltipButton.onclick=function(){0!==self._currentStep&&_previousStep.call(self)},_setAnchorAsButton(prevTooltipButton),prevTooltipButton.innerHTML=this._options.prevLabel,skipTooltipButton=document.createElement("a"),skipTooltipButton.className=this._options.buttonClass+" introjs-skipbutton ",_setAnchorAsButton(skipTooltipButton),skipTooltipButton.innerHTML=this._options.skipLabel,skipTooltipButton.onclick=function(){self._introItems.length-1===self._currentStep&&"function"==typeof self._introCompleteCallback&&self._introCompleteCallback.call(self),self._introItems.length-1!==self._currentStep&&"function"==typeof self._introExitCallback&&self._introExitCallback.call(self),self._introSkipCallback.call(self),_exitIntro.call(self,self._targetElement)},buttonsLayer.appendChild(skipTooltipButton),this._introItems.length>1&&(buttonsLayer.appendChild(prevTooltipButton),buttonsLayer.appendChild(nextTooltipButton)),tooltipLayer.appendChild(buttonsLayer),_placeTooltip.call(self,targetElement.element,tooltipLayer,arrowLayer,helperNumberLayer),_scrollTo.call(this,targetElement.scrollTo,targetElement,tooltipLayer)}var disableInteractionLayer=self._targetElement.querySelector(".introjs-disableInteraction");disableInteractionLayer&&disableInteractionLayer.parentNode.removeChild(disableInteractionLayer),targetElement.disableInteraction&&_disableInteraction.call(self),0===this._currentStep&&this._introItems.length>1?(void 0!==skipTooltipButton&&null!==skipTooltipButton&&(skipTooltipButton.className=this._options.buttonClass+" introjs-skipbutton"),void 0!==nextTooltipButton&&null!==nextTooltipButton&&(nextTooltipButton.className=this._options.buttonClass+" introjs-nextbutton"),!0===this._options.hidePrev?(void 0!==prevTooltipButton&&null!==prevTooltipButton&&(prevTooltipButton.className=this._options.buttonClass+" introjs-prevbutton introjs-hidden"),void 0!==nextTooltipButton&&null!==nextTooltipButton&&_addClass(nextTooltipButton,"introjs-fullbutton")):void 0!==prevTooltipButton&&null!==prevTooltipButton&&(prevTooltipButton.className=this._options.buttonClass+" introjs-prevbutton introjs-disabled"),void 0!==skipTooltipButton&&null!==skipTooltipButton&&(skipTooltipButton.innerHTML=this._options.skipLabel)):this._introItems.length-1===this._currentStep||1===this._introItems.length?(void 0!==skipTooltipButton&&null!==skipTooltipButton&&(skipTooltipButton.innerHTML=this._options.doneLabel,_addClass(skipTooltipButton,"introjs-donebutton")),void 0!==prevTooltipButton&&null!==prevTooltipButton&&(prevTooltipButton.className=this._options.buttonClass+" introjs-prevbutton"),!0===this._options.hideNext?(void 0!==nextTooltipButton&&null!==nextTooltipButton&&(nextTooltipButton.className=this._options.buttonClass+" introjs-nextbutton introjs-hidden"),void 0!==prevTooltipButton&&null!==prevTooltipButton&&_addClass(prevTooltipButton,"introjs-fullbutton")):void 0!==nextTooltipButton&&null!==nextTooltipButton&&(nextTooltipButton.className=this._options.buttonClass+" introjs-nextbutton introjs-disabled")):(void 0!==skipTooltipButton&&null!==skipTooltipButton&&(skipTooltipButton.className=this._options.buttonClass+" introjs-skipbutton"),void 0!==prevTooltipButton&&null!==prevTooltipButton&&(prevTooltipButton.className=this._options.buttonClass+" introjs-prevbutton"),void 0!==nextTooltipButton&&null!==nextTooltipButton&&(nextTooltipButton.className=this._options.buttonClass+" introjs-nextbutton"),void 0!==skipTooltipButton&&null!==skipTooltipButton&&(skipTooltipButton.innerHTML=this._options.skipLabel)),prevTooltipButton.setAttribute("role","button"),nextTooltipButton.setAttribute("role","button"),skipTooltipButton.setAttribute("role","button"),void 0!==nextTooltipButton&&null!==nextTooltipButton&&nextTooltipButton.focus(),_setShowElement(targetElement),void 0!==this._introAfterChangeCallback&&this._introAfterChangeCallback.call(this,targetElement.element)}function _scrollTo(scrollTo,targetElement,tooltipLayer){if("off"!==scrollTo){var rect;if(this._options.scrollToElement&&(rect="tooltip"===scrollTo?tooltipLayer.getBoundingClientRect():targetElement.element.getBoundingClientRect(),!_elementInViewport(targetElement.element))){var winHeight=_getWinSize().height;rect.bottom-(rect.bottom-rect.top)<0||targetElement.element.clientHeight>winHeight?window.scrollBy(0,rect.top-(winHeight/2-rect.height/2)-this._options.scrollPadding):window.scrollBy(0,rect.top-(winHeight/2-rect.height/2)+this._options.scrollPadding)}}}function _removeShowElement(){_forEach(document.querySelectorAll(".introjs-showElement"),function(elm){_removeClass(elm,/introjs-[a-zA-Z]+/g)})}function _setShowElement(targetElement){var parentElm;if(targetElement.element instanceof SVGElement)for(parentElm=targetElement.element.parentNode;null!==targetElement.element.parentNode&&parentElm.tagName&&"body"!==parentElm.tagName.toLowerCase();)"svg"===parentElm.tagName.toLowerCase()&&_addClass(parentElm,"introjs-showElement introjs-relativePosition"),parentElm=parentElm.parentNode;_addClass(targetElement.element,"introjs-showElement");var currentElementPosition=_getPropValue(targetElement.element,"position");for("absolute"!==currentElementPosition&&"relative"!==currentElementPosition&&"fixed"!==currentElementPosition&&_addClass(targetElement.element,"introjs-relativePosition"),parentElm=targetElement.element.parentNode;null!==parentElm&&parentElm.tagName&&"body"!==parentElm.tagName.toLowerCase();){var zIndex=_getPropValue(parentElm,"z-index"),opacity=parseFloat(_getPropValue(parentElm,"opacity")),transform=_getPropValue(parentElm,"transform")||_getPropValue(parentElm,"-webkit-transform")||_getPropValue(parentElm,"-moz-transform")||_getPropValue(parentElm,"-ms-transform")||_getPropValue(parentElm,"-o-transform");(/[0-9]+/.test(zIndex)||opacity<1||"none"!==transform&&void 0!==transform)&&_addClass(parentElm,"introjs-fixParent"),parentElm=parentElm.parentNode}}function _forEach(arr,forEachFnc,completeFnc){if(arr)for(var i=0,len=arr.length;i<len;i++)forEachFnc(arr[i],i);"function"==typeof completeFnc&&completeFnc()}function _addClass(element,className){if(element instanceof SVGElement){var pre=element.getAttribute("class")||"";element.setAttribute("class",pre+" "+className)}else if(void 0!==element.classList){var classes=className.split(" ");_forEach(classes,function(cls){element.classList.add(cls)})}else element.className.match(className)||(element.className+=" "+className)}function _removeClass(element,classNameRegex){if(element instanceof SVGElement){var pre=element.getAttribute("class")||"";element.setAttribute("class",pre.replace(classNameRegex,"").replace(/^\s+|\s+$/g,""))}else element.className=element.className.replace(classNameRegex,"").replace(/^\s+|\s+$/g,"")}function _getPropValue(element,propName){var propValue="";return element.currentStyle?propValue=element.currentStyle[propName]:document.defaultView&&document.defaultView.getComputedStyle&&(propValue=document.defaultView.getComputedStyle(element,null).getPropertyValue(propName)),propValue&&propValue.toLowerCase?propValue.toLowerCase():propValue}function _isFixed(element){var p=element.parentNode;return!(!p||"HTML"===p.nodeName)&&("fixed"===_getPropValue(element,"position")||_isFixed(p))}function _getWinSize(){if(void 0!==window.innerWidth)return{width:window.innerWidth,height:window.innerHeight};var D=document.documentElement;return{width:D.clientWidth,height:D.clientHeight}}function _elementInViewport(el){var rect=el.getBoundingClientRect();return rect.top>=0&&rect.left>=0&&rect.bottom+80<=window.innerHeight&&rect.right<=window.innerWidth}function _addOverlayLayer(targetElm){var overlayLayer=document.createElement("div"),styleText="",self=this;if(overlayLayer.className="introjs-overlay",targetElm.tagName&&"body"!==targetElm.tagName.toLowerCase()){var elementPosition=_getOffset(targetElm);elementPosition&&(styleText+="width: "+elementPosition.width+"px; height:"+elementPosition.height+"px; top:"+elementPosition.top+"px;left: "+elementPosition.left+"px;",overlayLayer.style.cssText=styleText)}else styleText+="top: 0;bottom: 0; left: 0;right: 0;position: fixed;",overlayLayer.style.cssText=styleText;return targetElm.appendChild(overlayLayer),overlayLayer.onclick=function(){!0===self._options.exitOnOverlayClick&&_exitIntro.call(self,targetElm)},window.setTimeout(function(){styleText+="opacity: "+self._options.overlayOpacity.toString()+";",overlayLayer.style.cssText=styleText},10),!0}function _removeHintTooltip(){var tooltip=document.querySelector(".introjs-hintReference");if(tooltip){var step=tooltip.getAttribute("data-step");return tooltip.parentNode.removeChild(tooltip),step}}function _populateHints(targetElm){if(this._introItems=[],this._options.hints)_forEach(this._options.hints,function(hint){var currentItem=_cloneObject(hint);"string"==typeof currentItem.element&&(currentItem.element=document.querySelector(currentItem.element)),currentItem.hintPosition=currentItem.hintPosition||this._options.hintPosition,currentItem.hintAnimation=currentItem.hintAnimation||this._options.hintAnimation,null!==currentItem.element&&this._introItems.push(currentItem)}.bind(this));else{var hints=targetElm.querySelectorAll("*[data-hint]");if(!hints||!hints.length)return!1;_forEach(hints,function(currentElement){var hintAnimation=currentElement.getAttribute("data-hintanimation");hintAnimation=hintAnimation?"true"===hintAnimation:this._options.hintAnimation,this._introItems.push({element:currentElement,hint:currentElement.getAttribute("data-hint"),hintPosition:currentElement.getAttribute("data-hintposition")||this._options.hintPosition,hintAnimation:hintAnimation,tooltipClass:currentElement.getAttribute("data-tooltipclass"),position:currentElement.getAttribute("data-position")||this._options.tooltipPosition})}.bind(this))}_addHints.call(this),DOMEvent.on(document,"click",_removeHintTooltip,this,!1),DOMEvent.on(window,"resize",_reAlignHints,this,!0)}function _reAlignHints(){_forEach(this._introItems,function(item){void 0!==item.targetElement&&_alignHintPosition.call(this,item.hintPosition,item.element,item.targetElement)}.bind(this))}function _hintQuerySelectorAll(selector){var hintsWrapper=document.querySelector(".introjs-hints");return hintsWrapper?hintsWrapper.querySelectorAll(selector):[]}function _hideHint(stepId){var hint=_hintQuerySelectorAll('.introjs-hint[data-step="'+stepId+'"]')[0];_removeHintTooltip.call(this),hint&&_addClass(hint,"introjs-hidehint"),void 0!==this._hintCloseCallback&&this._hintCloseCallback.call(this,stepId)}function _hideHints(){_forEach(_hintQuerySelectorAll(".introjs-hint"),function(hint){_hideHint.call(this,hint.getAttribute("data-step"))}.bind(this))}function _showHints(){var hints=_hintQuerySelectorAll(".introjs-hint");hints&&hints.length?_forEach(hints,function(hint){_showHint.call(this,hint.getAttribute("data-step"))}.bind(this)):_populateHints.call(this,this._targetElement)}function _showHint(stepId){var hint=_hintQuerySelectorAll('.introjs-hint[data-step="'+stepId+'"]')[0];hint&&_removeClass(hint,/introjs-hidehint/g)}function _removeHints(){_forEach(_hintQuerySelectorAll(".introjs-hint"),function(hint){_removeHint.call(this,hint.getAttribute("data-step"))}.bind(this))}function _removeHint(stepId){var hint=_hintQuerySelectorAll('.introjs-hint[data-step="'+stepId+'"]')[0];hint&&hint.parentNode.removeChild(hint)}function _addHints(){var self=this,hintsWrapper=document.querySelector(".introjs-hints");null===hintsWrapper&&(hintsWrapper=document.createElement("div"),hintsWrapper.className="introjs-hints");var getHintClick=function(i){return function(e){var evt=e||window.event;evt.stopPropagation&&evt.stopPropagation(),null!==evt.cancelBubble&&(evt.cancelBubble=!0),_showHintDialog.call(self,i)}};_forEach(this._introItems,function(item,i){if(!document.querySelector('.introjs-hint[data-step="'+i+'"]')){var hint=document.createElement("a");_setAnchorAsButton(hint),hint.onclick=getHintClick(i),hint.className="introjs-hint",item.hintAnimation||_addClass(hint,"introjs-hint-no-anim"),_isFixed(item.element)&&_addClass(hint,"introjs-fixedhint");var hintDot=document.createElement("div");hintDot.className="introjs-hint-dot";var hintPulse=document.createElement("div");hintPulse.className="introjs-hint-pulse",hint.appendChild(hintDot),hint.appendChild(hintPulse),hint.setAttribute("data-step",i),item.targetElement=item.element,item.element=hint,_alignHintPosition.call(this,item.hintPosition,hint,item.targetElement),hintsWrapper.appendChild(hint)}}.bind(this)),document.body.appendChild(hintsWrapper),void 0!==this._hintsAddedCallback&&this._hintsAddedCallback.call(this)}function _alignHintPosition(position,hint,element){var offset=_getOffset.call(this,element);switch(position){default:case"top-left":hint.style.left=offset.left+"px",hint.style.top=offset.top+"px";break;case"top-right":hint.style.left=offset.left+offset.width-20+"px",hint.style.top=offset.top+"px";break;case"bottom-left":hint.style.left=offset.left+"px",hint.style.top=offset.top+offset.height-20+"px";break;case"bottom-right":hint.style.left=offset.left+offset.width-20+"px",hint.style.top=offset.top+offset.height-20+"px";break;case"middle-left":hint.style.left=offset.left+"px",hint.style.top=offset.top+(offset.height-20)/2+"px";break;case"middle-right":hint.style.left=offset.left+offset.width-20+"px",hint.style.top=offset.top+(offset.height-20)/2+"px";break;case"middle-middle":hint.style.left=offset.left+(offset.width-20)/2+"px",hint.style.top=offset.top+(offset.height-20)/2+"px";break;case"bottom-middle":hint.style.left=offset.left+(offset.width-20)/2+"px",hint.style.top=offset.top+offset.height-20+"px";break;case"top-middle":hint.style.left=offset.left+(offset.width-20)/2+"px",hint.style.top=offset.top+"px"}}function _showHintDialog(stepId){var hintElement=document.querySelector('.introjs-hint[data-step="'+stepId+'"]'),item=this._introItems[stepId];void 0!==this._hintClickCallback&&this._hintClickCallback.call(this,hintElement,item,stepId);var removedStep=_removeHintTooltip.call(this);if(parseInt(removedStep,10)!==stepId){var tooltipLayer=document.createElement("div"),tooltipTextLayer=document.createElement("div"),arrowLayer=document.createElement("div"),referenceLayer=document.createElement("div");tooltipLayer.className="introjs-tooltip",tooltipLayer.onclick=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},tooltipTextLayer.className="introjs-tooltiptext";var tooltipWrapper=document.createElement("p");tooltipWrapper.innerHTML=item.hint;var closeButton=document.createElement("a");closeButton.className=this._options.buttonClass,closeButton.setAttribute("role","button"),closeButton.innerHTML=this._options.hintButtonLabel,closeButton.onclick=_hideHint.bind(this,stepId),tooltipTextLayer.appendChild(tooltipWrapper),tooltipTextLayer.appendChild(closeButton),arrowLayer.className="introjs-arrow",tooltipLayer.appendChild(arrowLayer),tooltipLayer.appendChild(tooltipTextLayer),this._currentStep=hintElement.getAttribute("data-step"),referenceLayer.className="introjs-tooltipReferenceLayer introjs-hintReference",referenceLayer.setAttribute("data-step",hintElement.getAttribute("data-step")),_setHelperLayerPosition.call(this,referenceLayer),referenceLayer.appendChild(tooltipLayer),document.body.appendChild(referenceLayer),_placeTooltip.call(this,hintElement,tooltipLayer,arrowLayer,null,!0)}}function _getOffset(element){var body=document.body,docEl=document.documentElement,scrollTop=window.pageYOffset||docEl.scrollTop||body.scrollTop,scrollLeft=window.pageXOffset||docEl.scrollLeft||body.scrollLeft,x=element.getBoundingClientRect();return{top:x.top+scrollTop,width:x.width,height:x.height,left:x.left+scrollLeft}}function _getScrollParent(element){var style=window.getComputedStyle(element),excludeStaticParent="absolute"===style.position,overflowRegex=/(auto|scroll)/;if("fixed"===style.position)return document.body;for(var parent=element;parent=parent.parentElement;)if(style=window.getComputedStyle(parent),(!excludeStaticParent||"static"!==style.position)&&overflowRegex.test(style.overflow+style.overflowY+style.overflowX))return parent;return document.body}function _scrollParentToElement(parent,element){parent.scrollTop=element.offsetTop-parent.offsetTop}function _getProgress(){return parseInt(this._currentStep+1,10)/this._introItems.length*100}function _mergeOptions(obj1,obj2){var attrname,obj3={};for(attrname in obj1)obj3[attrname]=obj1[attrname];for(attrname in obj2)obj3[attrname]=obj2[attrname];return obj3}var _stamp=function(){var keys={};return function(obj,key){return key=key||"introjs-stamp",keys[key]=keys[key]||0,void 0===obj[key]&&(obj[key]=keys[key]++),obj[key]}}(),DOMEvent=function(){function DOMEvent(){var events_key="introjs_event";this._id=function(obj,type,listener,context){return type+_stamp(listener)+(context?"_"+_stamp(context):"")},this.on=function(obj,type,listener,context,useCapture){var id=this._id.apply(this,arguments),handler=function(e){return listener.call(context||obj,e||window.event)};"addEventListener"in obj?obj.addEventListener(type,handler,useCapture):"attachEvent"in obj&&obj.attachEvent("on"+type,handler),obj[events_key]=obj[events_key]||{},obj[events_key][id]=handler},this.off=function(obj,type,listener,context,useCapture){var id=this._id.apply(this,arguments),handler=obj[events_key]&&obj[events_key][id];"removeEventListener"in obj?obj.removeEventListener(type,handler,useCapture):"detachEvent"in obj&&obj.detachEvent("on"+type,handler),obj[events_key][id]=null}}return new DOMEvent}(),introJs=function(targetElm){var instance;if("object"==typeof targetElm)instance=new IntroJs(targetElm);else if("string"==typeof targetElm){var targetElement=document.querySelector(targetElm);if(!targetElement)throw new Error("There is no element with given selector.");instance=new IntroJs(targetElement)}else instance=new IntroJs(document.body);return introJs.instances[_stamp(instance,"introjs-instance")]=instance,instance};return introJs.version="2.9.0",introJs.instances={},introJs.fn=IntroJs.prototype={clone:function(){return new IntroJs(this)},setOption:function(option,value){return this._options[option]=value,this},setOptions:function(options){return this._options=_mergeOptions(this._options,options),this},start:function(group){return _introForElement.call(this,this._targetElement,group),this},goToStep:function(step){return _goToStep.call(this,step),this},addStep:function(options){return this._options.steps||(this._options.steps=[]),this._options.steps.push(options),this},addSteps:function(steps){if(steps.length){for(var index=0;index<steps.length;index++)this.addStep(steps[index]);return this}},goToStepNumber:function(step){return _goToStepNumber.call(this,step),this},nextStep:function(){return _nextStep.call(this),this},previousStep:function(){return _previousStep.call(this),this},exit:function(force){return _exitIntro.call(this,this._targetElement,force),this},refresh:function(){return _refresh.call(this),this},onbeforechange:function(providedCallback){if("function"!=typeof providedCallback)throw new Error("Provided callback for onbeforechange was not a function");return this._introBeforeChangeCallback=providedCallback,this},onchange:function(providedCallback){if("function"!=typeof providedCallback)throw new Error("Provided callback for onchange was not a function.");return this._introChangeCallback=providedCallback,this},onafterchange:function(providedCallback){if("function"!=typeof providedCallback)throw new Error("Provided callback for onafterchange was not a function");return this._introAfterChangeCallback=providedCallback,this},oncomplete:function(providedCallback){if("function"!=typeof providedCallback)throw new Error("Provided callback for oncomplete was not a function.");return this._introCompleteCallback=providedCallback,this},onhintsadded:function(providedCallback){if("function"!=typeof providedCallback)throw new Error("Provided callback for onhintsadded was not a function.");return this._hintsAddedCallback=providedCallback,this},onhintclick:function(providedCallback){if("function"!=typeof providedCallback)throw new Error("Provided callback for onhintclick was not a function.");return this._hintClickCallback=providedCallback,this},onhintclose:function(providedCallback){if("function"!=typeof providedCallback)throw new Error("Provided callback for onhintclose was not a function.");return this._hintCloseCallback=providedCallback,this},onexit:function(providedCallback){if("function"!=typeof providedCallback)throw new Error("Provided callback for onexit was not a function.");return this._introExitCallback=providedCallback,this},onskip:function(providedCallback){if("function"!=typeof providedCallback)throw new Error("Provided callback for onskip was not a function.");return this._introSkipCallback=providedCallback,this},onbeforeexit:function(providedCallback){if("function"!=typeof providedCallback)throw new Error("Provided callback for onbeforeexit was not a function.");return this._introBeforeExitCallback=providedCallback,this},addHints:function(){return _populateHints.call(this,this._targetElement),this},hideHint:function(stepId){return _hideHint.call(this,stepId),this},hideHints:function(){return _hideHints.call(this),this},showHint:function(stepId){return _showHint.call(this,stepId),this},showHints:function(){return _showHints.call(this),this},removeHints:function(){return _removeHints.call(this),this},removeHint:function(stepId){return _removeHint.call(this,stepId),this},showHintDialog:function(stepId){return _showHintDialog.call(this,stepId),this}},introJs})},443:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(2)],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(MailPoet){function eventHandler(){return confirm(MailPoet.I18n.t("reinstallConfirmation"))&&(MailPoet.trackEvent("User has reinstalled MailPoet via Settings",{"MailPoet Free version":window.mailpoet_version}),MailPoet.Modal.loading(!0),MailPoet.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"setup",action:"reset"}).always(function(){MailPoet.Modal.loading(!1)}).done(function(){window.location="admin.php?page=mailpoet-newsletters"}).fail(function(response){response.errors.length>0&&MailPoet.Notice.error(response.errors.map(function(error){return error.message}),{scroll:!0})})),!1}var element;(element=document.getElementById("mailpoet_reinstall"))&&element.addEventListener("click",eventHandler,!1)}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},444:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(18),__webpack_require__(4),__webpack_require__(5),__webpack_require__(2),__webpack_require__(175),__webpack_require__(445),__webpack_require__(446),__webpack_require__(0)],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(Backbone,_,jQuery,MailPoet,Handlebars,Papa,AsyncQueue,Moment){jQuery("#mailpoet_subscribers_import").length&&jQuery(document).ready(function(){function showCurrentStep(){MailPoet.Notice.hide(),MailPoet.Modal.loading(!1),jQuery('#mailpoet_subscribers_import > div[id^="step"]').hide(),jQuery(location.hash).show()}var router;jQuery('input[name="select_method"]').attr("checked",!1),router=new(Backbone.Router.extend({routes:{"":"home",step1:"step1",step2:"step2",step3:"step3"},home:function(){this.navigate("step1",{trigger:!0})}})),router.on("route:step1",function(){function toggleNextStepButton(element,condition){if("on"===condition)return void element.closest("table a").removeClass("button-disabled");element.closest("table a").addClass("button-disabled")}function parseCSV(isFile){var processedSubscribers=[],parsedEmails=[],duplicateEmails=[],invalidEmails=[],emailColumnPosition=null,columnCount=null,isHeaderFound=!1,detectAndCleanupEmail=function(emailString){var test,email=jQuery("<div />").html(emailString).text();return email=email.toLowerCase().replace(/^["';.,\s]+|[^\x20-\x7E]+$|["';.,_\s]+$/g,"").replace(/\s+|%\d+|,+/g,""),test=/<(.*?)>/.exec(email),test&&(email=test[1].trim()),test=/mailto:(?:\s+)?(.*)/.exec(email),test&&(email=test[1].trim()),!!window.mailpoet_email_regex.test(email)&&email};return{skipEmptyLines:!0,delimiter:"",newline:"",comments:!1,error:function(){MailPoet.Notice.hide(),MailPoet.Notice.error(MailPoet.I18n.t("dataProcessingError"))},complete:function(CSV){var email,emailAddress,rowData,rowColumnCount,errorNotice;Object.keys(CSV.data).forEach(function(rowCount){rowData=CSV.data[rowCount].map(function(el){return el.trim()}),rowColumnCount=rowData.length,null===columnCount&&(columnCount=rowColumnCount),rowColumnCount===columnCount&&(null===emailColumnPosition?(Object.keys(rowData).forEach(function(column){emailAddress=detectAndCleanupEmail(rowData[column]),null===emailColumnPosition&&window.mailpoet_email_regex.test(emailAddress)&&(emailColumnPosition=column,parsedEmails[emailAddress]=!0,rowData[column]=emailAddress,processedSubscribers[emailAddress]=rowData)}),null===emailColumnPosition&&0===parseInt(rowCount,10)&&(isHeaderFound=!0,processedSubscribers[0]=rowData)):""!==rowData[emailColumnPosition]&&(email=detectAndCleanupEmail(rowData[emailColumnPosition]),_.has(parsedEmails,email)?duplicateEmails.push(email):window.mailpoet_email_regex.test(email)?(parsedEmails[email]=!0,rowData[emailColumnPosition]=email,processedSubscribers[email]=rowData):invalidEmails.push(rowData[emailColumnPosition])))}),processedSubscribers=_.values(processedSubscribers),processedSubscribers&&(isHeaderFound&&processedSubscribers.length>=2||!isHeaderFound&&processedSubscribers.length>=1)?(window.importData.step1={header:window.mailpoet_email_regex.test(processedSubscribers[0][emailColumnPosition])?null:processedSubscribers.shift(),subscribers:processedSubscribers,subscribersCount:processedSubscribers.length,duplicate:duplicateEmails,invalid:invalidEmails},MailPoet.trackEvent("Subscribers import started",{source:isFile?"file upload":"pasted data","MailPoet Free version":window.mailpoet_version}),router.navigate("step2",{trigger:!0})):(MailPoet.Modal.loading(!1),errorNotice=MailPoet.I18n.t("noValidRecords"),errorNotice=errorNotice.replace("[link]",MailPoet.I18n.t("csvKBLink")),errorNotice=errorNotice.replace("[/link]","</a>"),MailPoet.Notice.error(errorNotice))}}}function displayMailChimpLists(data){var listSelectElement=mailChimpListsContainerElement.find("select");listSelectElement.data("select2")?(listSelectElement.select2("data",data),listSelectElement.trigger("change")):listSelectElement.select2({data:data,width:"20em",templateResult:function(item){return item.name},templateSelection:function(item){return item.name}}).change(function(){null!==jQuery(this).val()?toggleNextStepButton(mailChimpProcessButtonElement,"on"):toggleNextStepButton(mailChimpProcessButtonElement,"off")}).trigger("change"),mailChimpListsContainerElement.show()}var methodProcessContainerTemplate,currentStepE,methodSelectionElement,pasteInputElement,pasteInputPlaceholderElement,pasteProcessButtonElement,mailChimpKeyInputElement,mailChimpKeyVerifyButtonElement,mailChimpListsContainerElement,mailChimpProcessButtonElement,uploadElement,uploadProcessButtonElement;if(window.mailpoetColumns=jQuery.map(window.mailpoetColumns,function(column){var col=column;return col.validation_rule=!1,col}),void 0!==window.importData.step1)return void showCurrentStep();methodProcessContainerTemplate=Handlebars.compile(jQuery("#method_process_template").html()),jQuery(".mailpoet_method_process").html(methodProcessContainerTemplate()),currentStepE=jQuery(location.hash),methodSelectionElement=jQuery("#select_method"),pasteInputElement=jQuery("#paste_input"),pasteInputPlaceholderElement=pasteInputElement.data("placeholder").replace(/\\n/g,"\n"),pasteProcessButtonElement=jQuery("#method_paste > div.mailpoet_method_process").find("a.mailpoet_process"),mailChimpKeyInputElement=jQuery("#mailchimp_key"),mailChimpKeyVerifyButtonElement=jQuery("#mailchimp_key_verify"),mailChimpListsContainerElement=jQuery("#mailchimp_lists"),mailChimpProcessButtonElement=jQuery("#method_mailchimp > div.mailpoet_method_process").find("a.mailpoet_process"),uploadElement=jQuery("#file_local"),uploadProcessButtonElement=jQuery("#method_file > div.mailpoet_method_process").find("a.mailpoet_process"),methodSelectionElement.change(function(){var availableMethods=jQuery(':radio[name="select_method"]'),selectedMethod=availableMethods.index(availableMethods.filter(":checked"));MailPoet.Notice.hide(),currentStepE.find(".inside").children('div[id^="method_"]').hide(),currentStepE.find(".inside").children('div[id^="method_"]:eq('+selectedMethod+")").show().find("table").show()}),showCurrentStep(),pasteInputElement.attr("value",pasteInputPlaceholderElement).css("color","#999").focus(function(){jQuery(this).val()===pasteInputPlaceholderElement&&jQuery(this).attr("value","").css("color","#222")}).blur(function(){""===jQuery(this).val()&&jQuery(this).attr("value",pasteInputPlaceholderElement).css("color","#999")}).keyup(function(){toggleNextStepButton(pasteProcessButtonElement,""!==this.value.trim()?"on":"off")}),pasteProcessButtonElement.click(function(){var pasteSize=encodeURI(pasteInputElement.val()).split(/%..|./).length-1;if(MailPoet.Notice.hide(),pasteSize>window.maxPostSizeBytes)return void MailPoet.Notice.error(MailPoet.I18n.t("maxPostSizeNotice"));MailPoet.Modal.loading(!0),setTimeout(function(){Papa.parse(pasteInputElement.val(),parseCSV(!1))},10)}),uploadElement.change(function(){var ext=this.value.match(/[^.]+$/);MailPoet.Notice.hide(),null!==ext&&"csv"===ext[0].toLowerCase()||(this.value="",MailPoet.Notice.error(MailPoet.I18n.t("wrongFileFormat"))),toggleNextStepButton(uploadProcessButtonElement,""!==this.value.trim()?"on":"off")}),uploadProcessButtonElement.click(function(){""!==uploadElement.val().trim()&&(MailPoet.Modal.loading(!0),setTimeout(function(){uploadElement.parse({config:parseCSV(!0)})},10))}),mailChimpKeyInputElement.keyup(function(){""!==this.value.trim()&&/[a-zA-Z0-9]{32}-/.exec(this.value.trim())||(mailChimpListsContainerElement.hide(),jQuery(".mailpoet_mailchimp-key-status").html("").removeClass("mailpoet_mailchimp-ok mailpoet_mailchimp-error"),toggleNextStepButton(mailChimpProcessButtonElement,"off"))}),mailChimpKeyVerifyButtonElement.click(function(){MailPoet.Modal.loading(!0),MailPoet.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"importExport",action:"getMailChimpLists",data:{api_key:mailChimpKeyInputElement.val()}}).always(function(){MailPoet.Modal.loading(!1)}).done(function(response){jQuery(".mailpoet_mailchimp-key-status").html("").removeClass().addClass("mailpoet_mailchimp-key-status mailpoet_mailchimp-ok"),0===response.data.length?(jQuery(".mailpoet_mailchimp-key-status").html(MailPoet.I18n.t("noMailChimpLists")),mailChimpListsContainerElement.hide(),toggleNextStepButton(mailChimpProcessButtonElement,"off")):displayMailChimpLists(response.data)}).fail(function(response){response.errors.length>0&&MailPoet.Notice.error(response.errors.map(function(error){return error.message}),{scroll:!0})})}),mailChimpProcessButtonElement.click(function(){mailChimpProcessButtonElement.closest("table a").hasClass("button-disabled")||(MailPoet.Modal.loading(!0),MailPoet.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"importExport",action:"getMailChimpSubscribers",data:{api_key:mailChimpKeyInputElement.val(),lists:mailChimpListsContainerElement.find("select").val()}}).always(function(){MailPoet.Modal.loading(!1)}).done(function(response){window.importData.step1=response.data,MailPoet.trackEvent("Subscribers import started",{source:"MailChimp","MailPoet Free version":window.mailpoet_version}),router.navigate("step2",{trigger:!0})}).fail(function(response){response.errors.length>0&&MailPoet.Notice.error(response.errors.map(function(error){return error.message}),{scroll:!0})}))})}),router.on("route:step2",function(){function toggleNextStepButton(condition){if("on"===condition)return void nextStepButton.removeClass("button-disabled");nextStepButton.addClass("button-disabled")}function enableSegmentSelection(segments){segmentSelectElement.data("select2")&&(segmentSelectElement.html("").select2("destroy"),toggleNextStepButton("off")),segmentSelectElement.select2({data:segments,width:"20em",templateResult:function(item){var i=item;return i.subscriberCount=parseInt(i.subscriberCount,10),i.name+" ("+i.subscriberCount.toLocaleString()+")"},templateSelection:function(item){var i=item;return i.subscriberCount=parseInt(i.subscriberCount,10),i.name+" ("+i.subscriberCount.toLocaleString()+")"}}).change(function(){var segmentSelectionNotice=jQuery('[data-id="notice_segmentSelection"]');this.value?(jQuery('[data-id="notice_segmentSelection"]').remove(),jQuery(".mailpoet_notice.error:visible").length||toggleNextStepButton("on")):(segmentSelectionNotice.length||MailPoet.Notice.error(MailPoet.I18n.t("segmentSelectionRequired"),{static:!0,scroll:!0,id:"notice_segmentSelection",hideClose:!0}),toggleNextStepButton("off"))})}function filterSubscribers(){var displayedColumns,subscribersClone=jQuery.extend(!0,{},subscribers),preventNextStep=!1;jQuery('[data-id="notice_invalidEmail"], [data-id="notice_invalidDate"]').remove(),displayedColumns=jQuery.map(jQuery(".mailpoet_subscribers_column_data_match"),function(element,elementIndex){var columnId=jQuery(element).data("column-id"),validationRule=jQuery(element).data("validation-rule");return jQuery(element).val(columnId).trigger("change"),{id:columnId,index:elementIndex,validationRule:validationRule,element:element}}),jQuery.map(window.mailpoetColumns,function(column){var firstRowData,validationRule,testedFormat,allowedDateFormats,matchedColumn=_.find(displayedColumns,function(data){return data.id===column.id});"email"===column.id&&(window.mailpoet_email_regex.test(subscribersClone.subscribers[0][matchedColumn.index])?MailPoet.Notice.hide("invalidEmail"):(preventNextStep=!0,jQuery('[data-id="notice_invalidEmail"]').length||MailPoet.Notice.error(MailPoet.I18n.t("columnContainsInvalidElement"),{static:!0,scroll:!0,hideClose:!0,id:"invalidEmail"}))),"date"===column.type&&matchedColumn&&(allowedDateFormats=[Moment.ISO_8601,"YYYY/MM/DD","MM/DD/YYYY","DD/MM/YYYY","YYYY/MM/DD","YYYY/DD/MM","MM/YYYY","YYYY/MM","YYYY"],firstRowData=subscribersClone.subscribers[0][matchedColumn.index],validationRule=!1,""===firstRowData.trim()?(subscribersClone.subscribers[0][matchedColumn.index]='<span class="mailpoet_data_match mailpoet_import_error" title="'+MailPoet.I18n.t("noDateFieldMatch")+'">'+MailPoet.I18n.t("emptyFirstRowDate")+"</span> ",preventNextStep=!0):Object.keys(allowedDateFormats).forEach(function(format){if(testedFormat=allowedDateFormats[format],Moment(firstRowData,testedFormat,!0).isValid())return validationRule="function"==typeof testedFormat?"datetime":testedFormat,void jQuery(matchedColumn.element).data("validation-rule",validationRule);"datetime"===validationRule&&(validationRule=Moment.ISO_8601)}),jQuery.map(subscribersClone.subscribers,function(dataSubscribers,index){var data=dataSubscribers,rowData=data[matchedColumn.index],date=Moment(rowData,testedFormat,!0);index!==fillerPosition&&""!==rowData.trim()&&(date.isValid()?data[matchedColumn.index]=new Handlebars.SafeString(Handlebars.Utils.escapeExpression(data[matchedColumn.index])+'<span class="mailpoet_data_match" title="'+MailPoet.I18n.t("verifyDateMatch")+'">'+MailPoet.Date.format(date)+"</span> "):(data[matchedColumn.index]=new Handlebars.SafeString(Handlebars.Utils.escapeExpression(data[matchedColumn.index])+'<span class="mailpoet_data_match mailpoet_import_error" title="'+MailPoet.I18n.t("noDateFieldMatch")+'">'+new Handlebars.SafeString(MailPoet.I18n.t("dateMatchError"))+"</span> "),preventNextStep=!0))}),preventNextStep&&!jQuery(".mailpoet_invalidDate").length&&MailPoet.Notice.error(MailPoet.I18n.t("columnContainsInvalidDate"),{static:!0,scroll:!0,hideClose:!0,id:"invalidDate"}))}),jQuery("#subscribers_data > table > tbody").html(subscribersDataTemplatePartial(subscribersClone)),preventNextStep?toggleNextStepButton("off"):!jQuery(".mailpoet_notice.error:visible").length&&segmentSelectElement.val()&&toggleNextStepButton("on")}var nextStepButton,previousStepButton,subscribers,subscribersDataTemplate,subscribersDataTemplatePartial,subscribersDataParseResultsTemplate,segmentSelectElement,maxRowsToShow,filler,fillerArray,fillerPosition,importResults,duplicates;if(void 0===window.importData.step1)return void router.navigate("step1",{trigger:!0});nextStepButton=jQuery("#step2_process"),previousStepButton=jQuery("#return_to_step1"),subscribers=jQuery.extend(!0,{},window.importData.step1),subscribersDataTemplate=Handlebars.compile(jQuery("#subscribers_data_template").html()),subscribersDataTemplatePartial=Handlebars.compile(jQuery("#subscribers_data_template_partial").html()),subscribersDataParseResultsTemplate=Handlebars.compile(jQuery("#subscribers_data_parse_results_template").html()),segmentSelectElement=jQuery("#mailpoet_segments_select"),maxRowsToShow=10,filler=". . .",fillerArray=Array.apply(null,new Array(subscribers.subscribers[0].length)).map(String.prototype.valueOf,filler),showCurrentStep(),jQuery("#subscribers_data_parse_results:visible").html(""),jQuery("#subscribers_data_import_results:visible").hide(),(subscribers.invalid.length||subscribers.duplicate.length)&&(duplicates={},subscribers.duplicate.forEach(function(subscriberEmail){duplicates[subscriberEmail]=(duplicates[subscriberEmail]||0)+1}),subscribers.duplicate=[],Object.keys(duplicates).forEach(function(email){duplicates[email]>1?subscribers.duplicate.push(email+" (x"+duplicates[email]+")"):subscribers.duplicate.push(email)}),importResults={notice:MailPoet.I18n.t("importNoticeSkipped").replace("%1$s","<strong>"+(subscribers.invalid.length+subscribers.duplicate.length)+"</strong>"),invalid:subscribers.invalid.length?MailPoet.I18n.t("importNoticeInvalid").replace("%1$s","<strong>"+subscribers.invalid.length.toLocaleString()+"</strong>").replace("%2$s",subscribers.invalid.join(", ")):null,duplicate:subscribers.duplicate.length?MailPoet.I18n.t("importNoticeDuplicate").replace("%1$s","<strong>"+subscribers.duplicate.length+"</strong>").replace("%2$s",subscribers.duplicate.join(", ")):null},jQuery("#subscribers_data_parse_results").html(subscribersDataParseResultsTemplate(importResults))),jQuery(".mailpoet_subscribers_data_parse_results_details_show").click(function(){var details=jQuery(".mailpoet_subscribers_data_parse_results_details");jQuery(details).toggle(),this.text=jQuery(details).is(":visible")?MailPoet.I18n.t("hideDetails"):MailPoet.I18n.t("showDetails")}),window.mailpoetSegments.length?jQuery(".mailpoet_segments").show():jQuery(".mailpoet_no_segments").show(),jQuery(".mailpoet_create_segment").click(function(){MailPoet.Modal.popup({title:MailPoet.I18n.t("addNewList"),template:jQuery("#new_segment_template").html()}),jQuery("#new_segment_name").keypress(function(e){13===e.which&&jQuery("#new_segment_process").click()}),jQuery("#new_segment_process").click(function(){var segmentName=jQuery("#new_segment_name").val().trim(),segmentDescription=jQuery("#new_segment_description").val().trim();MailPoet.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"ImportExport",action:"addSegment",data:{name:segmentName,description:segmentDescription}}).done(function(response){var selectedValues;window.mailpoetSegments.push({id:response.data.id,name:response.data.name,subscriberCount:0}),selectedValues=segmentSelectElement.val(),null===selectedValues?selectedValues=[response.data.id]:selectedValues.push(response.data.id),enableSegmentSelection(window.mailpoetSegments),segmentSelectElement.val(selectedValues).trigger("change"),jQuery(".mailpoet_segments:hidden").show(),jQuery(".mailpoet_no_segments:visible").hide(),MailPoet.Modal.close()}).fail(function(response){response.errors.length>0&&(MailPoet.Notice.hide(),MailPoet.Notice.error(response.errors.map(function(error){return error.message}),{positionAfter:"#new_segment_name"}))})}),jQuery("#new_segment_cancel").click(function(){MailPoet.Modal.close()})}),Handlebars.registerPartial("subscribers_data_template_partial",subscribersDataTemplatePartial),Handlebars.registerHelper("show_and_match_columns",function(helperSubscribers,options){var columnData,columnId,headerName,headerNameMatch,displayedColumns=[],displayedColumnsIds=[];return Object.keys(helperSubscribers.subscribers[0]).forEach(function(i){columnData=helperSubscribers.subscribers[0][i],columnId="ignore",columnData%1!=0&&window.mailpoet_email_regex.test(columnData)?columnId="email":helperSubscribers.header&&(headerName=helperSubscribers.header[i],headerNameMatch=window.mailpoetColumns.map(function(el){return el.name}).indexOf(headerName),-1!==headerNameMatch?columnId=window.mailpoetColumns[headerNameMatch].id:headerName&&(/first|first name|given name/i.test(headerName)?columnId="first_name":/last|last name/i.test(headerName)&&(columnId="last_name"))),columnId="ignore"!==columnId&&-1===displayedColumnsIds.indexOf(columnId)?columnId:"ignore",displayedColumns[i]={column_id:columnId},displayedColumnsIds.push(columnId)}),options.fn(displayedColumns)}),Handlebars.registerHelper("sanitize_data",function(data){return data instanceof Handlebars.SafeString?data:new Handlebars.SafeString(Handlebars.Utils.escapeExpression(data))}),Handlebars.registerHelper("calculate_index",function(rawIndex){var index=parseInt(rawIndex,10);return index===maxRowsToShow&&subscribers.subscribersCount>maxRowsToShow+1?(fillerPosition=index,filler):index===subscribers.subscribers.length-1?subscribers.subscribersCount.toLocaleString():index+1}),subscribers.subscribersCount>maxRowsToShow+1&&subscribers.subscribers.splice(maxRowsToShow,subscribers.subscribersCount-(maxRowsToShow+1),fillerArray),jQuery("#subscribers_data > table").html(subscribersDataTemplate(subscribers)),jQuery("select.mailpoet_subscribers_column_data_match").select2({data:window.mailpoetColumnsSelect2,width:"15em",templateResult:function(item){return item.name},templateSelection:function(item){return item.name}}).on("select2:selecting",function(selectEvent){var selectElement=this,selectedOptionId=selectEvent.params.args.data.id;"create"===selectedOptionId?(selectEvent.preventDefault(),jQuery(selectElement).select2("close"),MailPoet.Modal.popup({title:MailPoet.I18n.t("addNewField"),template:jQuery("#form_template_field_form").html()}),jQuery("#form_field_new").parsley().on("form:submit",function(){var data=jQuery(this.$element).mailpoetSerializeObject();return MailPoet.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"customFields",action:"save",data:data}).done(function(response){var newColumnData={id:response.data.id,name:response.data.name,type:response.data.type,params:response.data.params,custom:!0};2===window.mailpoetColumnsSelect2.length&&window.mailpoetColumnsSelect2.push({name:MailPoet.I18n.t("userColumns"),children:[]}),window.mailpoetColumnsSelect2[2].children.push(newColumnData),window.mailpoetColumns.push(newColumnData),jQuery("select.mailpoet_subscribers_column_data_match").each(function(){jQuery(this).html("").select2("destroy").select2({data:window.mailpoetColumnsSelect2,width:"15em",templateResult:function(item){return item.name},templateSelection:function(item){return item.name}})}),jQuery(selectElement).data("column-id",newColumnData.id),jQuery(selectElement).data("validation-rule",!1),filterSubscribers(),MailPoet.Modal.close()}).fail(function(response){response.errors.length>0&&MailPoet.Notice.error(response.errors.map(function(error){return error.message}),{positionAfter:"#field_name"})}),!1})):jQuery("select.mailpoet_subscribers_column_data_match").each(function(){var element=this,elementId=jQuery(element).val();elementId===selectedOptionId&&"ignore"!==elementId&&(confirm(MailPoet.I18n.t("selectedValueAlreadyMatched")+" "+MailPoet.I18n.t("confirmCorrespondingColumn"))?jQuery(element).data("column-id","ignore"):(selectEvent.preventDefault(),jQuery(selectElement).select2("close")))})}).on("select2:select",function(selectEvent){var selectElement=this,selectedOptionId=selectEvent.params.data.id;jQuery(selectElement).data("column-id",selectedOptionId),filterSubscribers()}),previousStepButton.off().on("click",function(){router.navigate("step1",{trigger:!0})}),nextStepButton.off().on("click",function(){var clickSubscribers,splitSubscribers,columns={},queue=new jQuery.AsyncQueue,batchNumber=0,timestamp=Date.now()/1e3,clickImportResults={created:0,updated:0,errors:[],segments:[]};jQuery(this).hasClass("button-disabled")||(MailPoet.Modal.loading(!0),splitSubscribers=function(localSubscribers,size){return localSubscribers.reduce(function(res,item,index){return index%size==0&&res.push([]),res[res.length-1].push(item),res},[])},clickSubscribers=splitSubscribers(window.importData.step1.subscribers,2e3),_.each(jQuery("select.mailpoet_subscribers_column_data_match"),function(column,columnIndex){var columnId=jQuery(column).data("column-id"),validationRule=jQuery(column).data("validation-rule");"ignore"!==columnId&&(columns[columnId]={index:columnIndex,validation_rule:validationRule})}),_.each(clickSubscribers,function(){queue.add(function(addQueue){addQueue.pause(),MailPoet.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"ImportExport",action:"processImport",data:JSON.stringify({columns:columns,subscribers:clickSubscribers[batchNumber],timestamp:timestamp,segments:segmentSelectElement.val(),updateSubscribers:"yes"===jQuery(':radio[name="subscriber_update_option"]:checked').val()})}).done(function(response){clickImportResults.created+=response.data.created,clickImportResults.updated+=response.data.updated,clickImportResults.segments=response.data.segments,clickImportResults.added_to_segment_with_welcome_notification=response.data.added_to_segment_with_welcome_notification,addQueue.run()}).fail(function(response){MailPoet.Modal.loading(!1),response.errors.length>0&&MailPoet.Notice.error(response.errors.map(function(error){return error.message}),{scroll:!0})}),batchNumber+=1})}),queue.run(),queue.onComplete(function(){MailPoet.Modal.loading(!1),clickImportResults.errors.length>0&&!clickImportResults.updated&&!clickImportResults.created?MailPoet.Notice.error(_.flatten(clickImportResults.errors)):(window.mailpoetSegments=clickImportResults.segments,clickImportResults.segments=_.map(segmentSelectElement.select2("data"),function(data){return data.name}),window.importData.step2=clickImportResults,enableSegmentSelection(window.mailpoetSegments),router.navigate("step3",{trigger:!0}))}))}),filterSubscribers(),enableSegmentSelection(window.mailpoetSegments)}),router.on("route:step3",function(){var subscribersDataImportResultsTemplate,exportMenuElement,importResults;if(void 0===window.importData.step2)return void router.navigate("step2",{trigger:!0});showCurrentStep(),window.importData.step2.errors.length>0&&MailPoet.Notice.error(_.flatten(window.importData.step2.errors)),MailPoet.trackEvent("Subscribers import finished",{"Subscribers created":window.importData.step2.created,"Subscribers updated":window.importData.step2.updated,"MailPoet Free version":window.mailpoet_version}),subscribersDataImportResultsTemplate=Handlebars.compile(jQuery("#subscribers_data_import_results_template").html()),exportMenuElement=jQuery("span.mailpoet_export"),importResults={created:!!window.importData.step2.created&&MailPoet.I18n.t("subscribersCreated").replace("%1$s","<strong>"+window.importData.step2.created.toLocaleString()+"</strong>").replace("%2$s",'"'+window.importData.step2.segments.join('", "')+'"'),updated:!!window.importData.step2.updated&&MailPoet.I18n.t("subscribersUpdated").replace("%1$s","<strong>"+window.importData.step2.updated.toLocaleString()+"</strong>").replace("%2$s",'"'+window.importData.step2.segments.join('", "')+'"'),no_action:!window.importData.step2.created&&!window.importData.step2.updated,added_to_segment_with_welcome_notification:window.importData.step2.added_to_segment_with_welcome_notification},jQuery("#subscribers_data_import_results").html(subscribersDataImportResultsTemplate(importResults)).show(),jQuery("a.mailpoet_import_again").off().click(function(){jQuery("#subscribers_data_import_results").hide(),router.navigate("step1",{trigger:!0})}),jQuery("a.mailpoet_view_subscribers").off().click(function(){window.location.href="admin.php?page=mailpoet-subscribers"}),importResults.created&&exportMenuElement.not(":visible")&&exportMenuElement.show(),window.importData.step2=void 0}),Backbone.History.started||Backbone.history.start()})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},445:function(module,exports){/*!
	Papa Parse
	v4.1.1
	https://github.com/mholt/PapaParse
*/
!function(e){"use strict";function t(t,r){if(r=r||{},r.worker&&w.WORKERS_SUPPORTED){var n=h();return n.userStep=r.step,n.userChunk=r.chunk,n.userComplete=r.complete,n.userError=r.error,r.step=m(r.step),r.chunk=m(r.chunk),r.complete=m(r.complete),r.error=m(r.error),delete r.worker,void n.postMessage({input:t,config:r,workerId:n.id})}var o=null;return"string"==typeof t?o=r.download?new i(r):new a(r):(e.File&&t instanceof File||t instanceof Object)&&(o=new s(r)),o.stream(t)}function r(e,t){function n(e){if("object"!=typeof e)return[];var t=[];for(var r in e)t.push(r);return t}function i(e,t){var r="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var n=e instanceof Array&&e.length>0,i=!(t[0]instanceof Array);if(n){for(var a=0;a<e.length;a++)a>0&&(r+=u),r+=s(e[a],a);t.length>0&&(r+=f)}for(var o=0;o<t.length;o++){for(var h=n?e.length:t[o].length,d=0;h>d;d++){d>0&&(r+=u);var c=n&&i?e[d]:d;r+=s(t[o][c],d)}o<t.length-1&&(r+=f)}return r}function s(e,t){return void 0===e||null===e?"":(e=e.toString().replace(/"/g,'""'),"boolean"==typeof o&&o||o instanceof Array&&o[t]||a(e,w.BAD_DELIMITERS)||e.indexOf(u)>-1||" "==e.charAt(0)||" "==e.charAt(e.length-1)?'"'+e+'"':e)}function a(e,t){for(var r=0;r<t.length;r++)if(e.indexOf(t[r])>-1)return!0;return!1}var o=!1,u=",",f="\r\n";if(function(){"object"==typeof t&&("string"==typeof t.delimiter&&1==t.delimiter.length&&-1==w.BAD_DELIMITERS.indexOf(t.delimiter)&&(u=t.delimiter),("boolean"==typeof t.quotes||t.quotes instanceof Array)&&(o=t.quotes),"string"==typeof t.newline&&(f=t.newline))}(),"string"==typeof e&&(e=JSON.parse(e)),e instanceof Array){if(!e.length||e[0]instanceof Array)return i(null,e);if("object"==typeof e[0])return i(n(e[0]),e)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data instanceof Array&&(e.fields||(e.fields=e.data[0]instanceof Array?e.fields:n(e.data[0])),e.data[0]instanceof Array||"object"==typeof e.data[0]||(e.data=[e.data])),i(e.fields||[],e.data||[]);throw"exception: Unable to serialize unrecognized input"}function n(t){function r(e){var t=_(e);t.chunkSize=parseInt(t.chunkSize),this._handle=new o(t),this._handle.streamer=this,this._config=t}this._handle=null,this._paused=!1,this._finished=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this._completeResults={data:[],errors:[],meta:{}},r.call(this,t),this.parseChunk=function(t){var r=this._partialLine+t;this._partialLine="";var n=this._handle.parse(r,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var i=n.meta.cursor;this._finished||(this._partialLine=r.substring(i-this._baseIndex),this._baseIndex=i),n&&n.data&&(this._rowCount+=n.data.length);var s=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(k)e.postMessage({results:n,workerId:w.WORKER_ID,finished:s});else if(m(this._config.chunk)){if(this._config.chunk(n,this._handle),this._paused)return;n=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(n.data),this._completeResults.errors=this._completeResults.errors.concat(n.errors),this._completeResults.meta=n.meta),!s||!m(this._config.complete)||n&&n.meta.aborted||this._config.complete(this._completeResults),s||n&&n.meta.paused||this._nextChunk(),n}},this._sendError=function(t){m(this._config.error)?this._config.error(t):k&&this._config.error&&e.postMessage({workerId:w.WORKER_ID,error:t,finished:!1})}}function i(e){function t(e){var t=e.getResponseHeader("Content-Range");return parseInt(t.substr(t.lastIndexOf("/")+1))}e=e||{},e.chunkSize||(e.chunkSize=w.RemoteChunkSize),n.call(this,e);var r;this._nextChunk=k?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)return void this._chunkLoaded();if(r=new XMLHttpRequest,k||(r.onload=g(this._chunkLoaded,this),r.onerror=g(this._chunkError,this)),r.open("GET",this._input,!k),this._config.chunkSize){var e=this._start+this._config.chunkSize-1;r.setRequestHeader("Range","bytes="+this._start+"-"+e),r.setRequestHeader("If-None-Match","webkit-no-cache")}try{r.send()}catch(t){this._chunkError(t.message)}k&&0==r.status?this._chunkError():this._start+=this._config.chunkSize},this._chunkLoaded=function(){if(4==r.readyState){if(r.status<200||r.status>=400)return void this._chunkError();this._finished=!this._config.chunkSize||this._start>t(r),this.parseChunk(r.responseText)}},this._chunkError=function(e){var t=r.statusText||e;this._sendError(t)}}function s(e){e=e||{},e.chunkSize||(e.chunkSize=w.LocalChunkSize),n.call(this,e);var t,r,i="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,r=e.slice||e.webkitSlice||e.mozSlice,i?(t=new FileReader,t.onload=g(this._chunkLoaded,this),t.onerror=g(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var n=Math.min(this._start+this._config.chunkSize,this._input.size);e=r.call(e,this._start,n)}var s=t.readAsText(e,this._config.encoding);i||this._chunkLoaded({target:{result:s}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function a(e){e=e||{},n.call(this,e);var t,r;this.stream=function(e){return t=e,r=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e=this._config.chunkSize,t=e?r.substr(0,e):r;return r=e?r.substr(e):"",this._finished=!r,this.parseChunk(t)}}}function o(e){function t(){if(b&&c&&(f("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+w.DefaultDelimiter+"'"),c=!1),e.skipEmptyLines)for(var t=0;t<b.data.length;t++)1==b.data[t].length&&""==b.data[t][0]&&b.data.splice(t--,1);return r()&&n(),i()}function r(){return e.header&&0==y.length}function n(){if(b){for(var e=0;r()&&e<b.data.length;e++)for(var t=0;t<b.data[e].length;t++)y.push(b.data[e][t]);b.data.splice(0,1)}}function i(){if(!b||!e.header&&!e.dynamicTyping)return b;for(var t=0;t<b.data.length;t++){for(var r={},n=0;n<b.data[t].length;n++){if(e.dynamicTyping){var i=b.data[t][n];b.data[t][n]="true"==i||"TRUE"==i||"false"!=i&&"FALSE"!=i&&o(i)}e.header&&(n>=y.length?(r.__parsed_extra||(r.__parsed_extra=[]),r.__parsed_extra.push(b.data[t][n])):r[y[n]]=b.data[t][n])}e.header&&(b.data[t]=r,n>y.length?f("FieldMismatch","TooManyFields","Too many fields: expected "+y.length+" fields but parsed "+n,t):n<y.length&&f("FieldMismatch","TooFewFields","Too few fields: expected "+y.length+" fields but parsed "+n,t))}return e.header&&b.meta&&(b.meta.fields=y),b}function s(t){for(var r,n,i,s=[",","\t","|",";",w.RECORD_SEP,w.UNIT_SEP],a=0;a<s.length;a++){var o=s[a],f=0,h=0;i=void 0;for(var d=new u({delimiter:o,preview:10}).parse(t),c=0;c<d.data.length;c++){var l=d.data[c].length;h+=l,void 0!==i?l>1&&(f+=Math.abs(l-i),i=l):i=l}h/=d.data.length,(void 0===n||n>f)&&h>1.99&&(n=f,r=o)}return e.delimiter=r,{successful:!!r,bestDelimiter:r}}function a(e){e=e.substr(0,1048576);var t=e.split("\r");if(1==t.length)return"\n";for(var r=0,n=0;n<t.length;n++)"\n"==t[n][0]&&r++;return r>=t.length/2?"\r\n":"\r"}function o(e){return l.test(e)?parseFloat(e):e}function f(e,t,r,n){b.errors.push({type:e,code:t,message:r,row:n})}var h,d,c,l=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,p=this,g=0,v=!1,k=!1,y=[],b={data:[],errors:[],meta:{}};if(m(e.step)){var R=e.step;e.step=function(n){if(b=n,r())t();else{if(t(),0==b.data.length)return;g+=n.data.length,e.preview&&g>e.preview?d.abort():R(b,p)}}}this.parse=function(r,n,i){if(e.newline||(e.newline=a(r)),c=!1,!e.delimiter){var o=s(r);o.successful?e.delimiter=o.bestDelimiter:(c=!0,e.delimiter=w.DefaultDelimiter),b.meta.delimiter=e.delimiter}var f=_(e);return e.preview&&e.header&&f.preview++,h=r,d=new u(f),b=d.parse(h,n,i),t(),v?{meta:{paused:!0}}:b||{meta:{paused:!1}}},this.paused=function(){return v},this.pause=function(){v=!0,d.abort(),h=h.substr(d.getCharIndex())},this.resume=function(){v=!1,p.streamer.parseChunk(h)},this.aborted=function(){return k},this.abort=function(){k=!0,d.abort(),b.meta.aborted=!0,m(e.complete)&&e.complete(b),h=""}}function u(e){e=e||{};var t=e.delimiter,r=e.newline,n=e.comments,i=e.step,s=e.preview,a=e.fastMode;if(("string"!=typeof t||w.BAD_DELIMITERS.indexOf(t)>-1)&&(t=","),n===t)throw"Comment character same as delimiter";!0===n?n="#":("string"!=typeof n||w.BAD_DELIMITERS.indexOf(n)>-1)&&(n=!1),"\n"!=r&&"\r"!=r&&"\r\n"!=r&&(r="\n");var o=0,u=!1;this.parse=function(e,f,h){function d(e){b.push(e),S=o}function c(t){return h?p():(t||(t=e.substr(o)),w.push(t),o=g,d(w),y&&_(),p())}function l(t){o=t,d(w),w=[],O=e.indexOf(r,o)}function p(e){return{data:b,errors:R,meta:{delimiter:t,linebreak:r,aborted:u,truncated:!!e,cursor:S+(f||0)}}}function _(){i(p()),b=[],R=[]}if("string"!=typeof e)throw"Input must be a string";var g=e.length,m=t.length,v=r.length,k=n.length,y="function"==typeof i;o=0;var b=[],R=[],w=[],S=0;if(!e)return p();if(a||!1!==a&&-1===e.indexOf('"')){for(var E=e.split(r),C=0;C<E.length;C++){var w=E[C];if(o+=w.length,C!==E.length-1)o+=r.length;else if(h)return p();if(!n||w.substr(0,k)!=n){if(y){if(b=[],d(w.split(t)),_(),u)return p()}else d(w.split(t));if(s&&C>=s)return b=b.slice(0,s),p(!0)}}return p()}for(var x=e.indexOf(t,o),O=e.indexOf(r,o);;)if('"'!=e[o])if(n&&0===w.length&&e.substr(o,k)===n){if(-1==O)return p();o=O+v,O=e.indexOf(r,o),x=e.indexOf(t,o)}else if(-1!==x&&(O>x||-1===O))w.push(e.substring(o,x)),o=x+m,x=e.indexOf(t,o);else{if(-1===O)break;if(w.push(e.substring(o,O)),l(O+v),y&&(_(),u))return p();if(s&&b.length>=s)return p(!0)}else{var I=o;for(o++;;){var I=e.indexOf('"',I+1);if(-1===I)return h||R.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:b.length,index:o}),c();if(I===g-1){var D=e.substring(o,I).replace(/""/g,'"');return c(D)}if('"'!=e[I+1]){if(e[I+1]==t){w.push(e.substring(o,I).replace(/""/g,'"')),o=I+1+m,x=e.indexOf(t,o),O=e.indexOf(r,o);break}if(e.substr(I+1,v)===r){if(w.push(e.substring(o,I).replace(/""/g,'"')),l(I+1+v),x=e.indexOf(t,o),y&&(_(),u))return p();if(s&&b.length>=s)return p(!0);break}}else I++}}return c()},this.abort=function(){u=!0},this.getCharIndex=function(){return o}}function h(){if(!w.WORKERS_SUPPORTED)return!1;if(!y&&null===w.SCRIPT_PATH)throw new Error("Script path cannot be determined automatically when Papa Parse is loaded asynchronously. You need to set Papa.SCRIPT_PATH manually.");var t=new e.Worker(w.SCRIPT_PATH||v);return t.onmessage=d,t.id=R++,b[t.id]=t,t}function d(e){var t=e.data,r=b[t.workerId],n=!1;if(t.error)r.userError(t.error,t.file);else if(t.results&&t.results.data){var i=function(){n=!0,c(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},s={abort:i,pause:l,resume:l};if(m(r.userStep)){for(var a=0;a<t.results.data.length&&(r.userStep({data:[t.results.data[a]],errors:t.results.errors,meta:t.results.meta},s),!n);a++);delete t.results}else m(r.userChunk)&&(r.userChunk(t.results,s,t.file),delete t.results)}t.finished&&!n&&c(t.workerId,t.results)}function c(e,t){var r=b[e];m(r.userComplete)&&r.userComplete(t),r.terminate(),delete b[e]}function l(){throw"Not implemented."}function p(t){var r=t.data;if(void 0===w.WORKER_ID&&r&&(w.WORKER_ID=r.workerId),"string"==typeof r.input)e.postMessage({workerId:w.WORKER_ID,results:w.parse(r.input,r.config),finished:!0});else if(e.File&&r.input instanceof File||r.input instanceof Object){var n=w.parse(r.input,r.config);n&&e.postMessage({workerId:w.WORKER_ID,results:n,finished:!0})}}function _(e){if("object"!=typeof e)return e;var t=e instanceof Array?[]:{};for(var r in e)t[r]=_(e[r]);return t}function g(e,t){return function(){e.apply(t,arguments)}}function m(e){return"function"==typeof e}var v,k=!e.document&&!!e.postMessage,y=!1,b={},R=0,w={};if(w.parse=t,w.unparse=r,w.RECORD_SEP=String.fromCharCode(30),w.UNIT_SEP=String.fromCharCode(31),w.BYTE_ORDER_MARK="\ufeff",w.BAD_DELIMITERS=["\r","\n",'"',w.BYTE_ORDER_MARK],w.WORKERS_SUPPORTED=!!e.Worker,w.SCRIPT_PATH=null,w.LocalChunkSize=10485760,w.RemoteChunkSize=5242880,w.DefaultDelimiter=",",w.Parser=u,w.ParserHandle=o,w.NetworkStreamer=i,w.FileStreamer=s,w.StringStreamer=a,void 0!==module&&module.exports?module.exports=w:m(e.define)&&e.define.amd?e.define(function(){return w}):e.Papa=w,e.jQuery){var S=e.jQuery;S.fn.parse=function(t){function r(){if(0==a.length)return void(m(t.complete)&&t.complete());var e=a[0];if(m(t.before)){var r=t.before(e.file,e.inputElem);if("object"==typeof r){if("abort"==r.action)return void n("AbortError",e.file,e.inputElem,r.reason);if("skip"==r.action)return void i();"object"==typeof r.config&&(e.instanceConfig=S.extend(e.instanceConfig,r.config))}else if("skip"==r)return void i()}var s=e.instanceConfig.complete;e.instanceConfig.complete=function(t){m(s)&&s(t,e.file,e.inputElem),i()},w.parse(e.file,e.instanceConfig)}function n(e,r,n,i){m(t.error)&&t.error({name:e},r,n,i)}function i(){a.splice(0,1),r()}var s=t.config||{},a=[];return this.each(function(){if("INPUT"!=S(this).prop("tagName").toUpperCase()||"file"!=S(this).attr("type").toLowerCase()||!e.FileReader||!this.files||0==this.files.length)return!0;for(var r=0;r<this.files.length;r++)a.push({file:this.files[r],inputElem:this,instanceConfig:S.extend({},s)})}),r(),this}}k?e.onmessage=p:w.WORKERS_SUPPORTED&&(v=function(){var e=document.getElementsByTagName("script");return e.length?e[e.length-1].src:""}(),document.body?document.addEventListener("DOMContentLoaded",function(){y=!0},!0):y=!0),i.prototype=Object.create(n.prototype),i.prototype.constructor=i,s.prototype=Object.create(n.prototype),s.prototype.constructor=s,a.prototype=Object.create(a.prototype),a.prototype.constructor=a}("undefined"!=typeof window?window:this)},446:function(module,exports){!function($){$.AsyncQueue=function(){var failureFunc,completeFunc,lastCallbackData,_run,that=this,queue=[],paused=!1;return _run=function(){var f=queue.shift();f?(f.apply(that,[that]),!1===paused&&_run()):completeFunc&&completeFunc.apply(that)},this.onFailure=function(func){failureFunc=func},this.onComplete=function(func){completeFunc=func},this.add=function(func){return queue.push(func),this},this.storeData=function(dataObject){return lastCallbackData=dataObject,this},this.lastCallbackData=function(){return lastCallbackData},this.run=function(){paused=!1,_run()},this.pause=function(){return paused=!0,this},this.failure=function(){if(paused=!0,failureFunc){var args=[that];for(i=0;i<arguments.length;i++)args.push(arguments[i]);failureFunc.apply(that,args)}},this}}(jQuery)},447:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(4),__webpack_require__(5),__webpack_require__(2),__webpack_require__(175)],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(_,jQuery,MailPoet,Handlebars){jQuery("#mailpoet_subscribers_export").length&&jQuery(document).ready(function(){function toggleNextStepButton(condition){"on"===condition?nextStepButton.removeClass("button-disabled"):nextStepButton.addClass("button-disabled")}var segmentsContainerElement,subscriberFieldsContainerElement,nextStepButton,renderSegmentsAndFields,subscribersExportTemplate;window.exportData.segments&&(subscribersExportTemplate=Handlebars.compile(jQuery("#mailpoet_subscribers_export_template").html()),jQuery("#mailpoet_subscribers_export > div.inside").html(subscribersExportTemplate(window.exportData)),segmentsContainerElement=jQuery("#export_lists"),subscriberFieldsContainerElement=jQuery("#export_columns"),nextStepButton=jQuery("a.mailpoet_export_process"),renderSegmentsAndFields=function(container,data){container.data("select2")&&container.html("").select2("destroy"),container.select2({data:data,width:"20em",templateResult:function(item){return item.subscriberCount>0?item.name+" ("+parseInt(item.subscriberCount,10).toLocaleString()+")":item.name},templateSelection:function(item){return item.subscriberCount>0?item.name+" ("+parseInt(item.subscriberCount,10).toLocaleString()+")":item.name}}).on("select2:selecting",function(selectEvent){var allOptions,selectElement=this,selectedOptionId=selectEvent.params.args.data.id,fieldsToExclude=["select","deselect"];_.contains(fieldsToExclude,selectedOptionId)&&(selectEvent.preventDefault(),"deselect"===selectedOptionId?jQuery(selectElement).val("").trigger("change"):(allOptions=[],_.each(container.find("option"),function(field){_.contains(fieldsToExclude,field.value)||allOptions.push(field.value)}),jQuery(selectElement).val(allOptions).trigger("change")),jQuery(selectElement).select2("close"))}).on("change",function(){toggleNextStepButton(window.exportData.segments&&segmentsContainerElement.select2("data").length&&subscriberFieldsContainerElement.select2("data").length||!window.exportData.segments&&subscriberFieldsContainerElement.select2("data").length?"on":"off")})},window.segments.forEach(function(item){segmentsContainerElement.append(jQuery("<option></option>").attr("value",item.id).text(item.name))}),renderSegmentsAndFields(segmentsContainerElement,window.segments),renderSegmentsAndFields(subscriberFieldsContainerElement,window.subscriberFieldsSelect2),subscriberFieldsContainerElement.val(["email","first_name","last_name","list_status","global_status"]).trigger("change"),nextStepButton.click(function(){var exportFormat;jQuery(this).hasClass("button-disabled")||(MailPoet.Modal.loading(!0),exportFormat=jQuery(':radio[name="option_format"]:checked').val(),MailPoet.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"ImportExport",action:"processExport",data:JSON.stringify({export_format_option:exportFormat,segments:!!window.exportData.segments&&segmentsContainerElement.val(),subscriber_fields:subscriberFieldsContainerElement.val()})}).always(function(){MailPoet.Modal.loading(!1)}).done(function(response){var resultMessage=MailPoet.I18n.t("exportMessage").replace("%1$s","<strong>"+parseInt(response.data.totalExported,10).toLocaleString()+"</strong>").replace("[link]",'<a href="'+response.data.exportFileURL+'" target="_blank" >').replace("[/link]","</a>");jQuery("#export_result_notice").html("<p>"+resultMessage+"</p>").show(),window.location.href=response.data.exportFileURL,MailPoet.trackEvent("Subscribers export completed",{"Total exported":response.data.totalExported,"File Format":exportFormat,"MailPoet Free version":window.mailpoet_version})}).fail(function(response){response.errors.length>0&&MailPoet.Notice.error(response.errors.map(function(error){return error.message}),{scroll:!0})}))}))})}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},448:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(11),_reactDom2=_interopRequireDefault(_reactDom),_reactRouterDom=__webpack_require__(7),_steps_controller=__webpack_require__(449),_steps_controller2=_interopRequireDefault(_steps_controller),container=document.getElementById("welcome_wizard_container");container&&_reactDom2.default.render(_react2.default.createElement(_reactRouterDom.HashRouter,null,_react2.default.createElement("div",null,_react2.default.createElement(_reactRouterDom.Route,{exact:!0,path:"/",render:function(){return _react2.default.createElement(_reactRouterDom.Redirect,{to:"/steps/1"})}}),_react2.default.createElement(_reactRouterDom.Route,{path:"/steps/:step",component:_steps_controller2.default}))),container)},449:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_header=__webpack_require__(450),_header2=_interopRequireDefault(_header),_sender_step=__webpack_require__(452),_sender_step2=_interopRequireDefault(_sender_step),_migrated_user_step=__webpack_require__(453),_migrated_user_step2=_interopRequireDefault(_migrated_user_step),_help_info_step=__webpack_require__(454),_help_info_step2=_interopRequireDefault(_help_info_step),_usage_tracking_step=__webpack_require__(455),_usage_tracking_step2=_interopRequireDefault(_usage_tracking_step),_woo_commerce_step=__webpack_require__(456),_woo_commerce_step2=_interopRequireDefault(_woo_commerce_step),WelcomeWizardStepsController=function(_React$Component){function WelcomeWizardStepsController(props){_classCallCheck(this,WelcomeWizardStepsController);var _this=_possibleConstructorReturn(this,(WelcomeWizardStepsController.__proto__||Object.getPrototypeOf(WelcomeWizardStepsController)).call(this,props));return _this.state={stepsCount:window.is_woocommerce_active?4:3,shouldSetSender:!window.is_mp2_migration_complete,loading:!1,sender:window.sender_data},_this.finishWizard=_this.finishWizard.bind(_this),_this.updateSettings=_this.updateSettings.bind(_this),_this.activateTracking=_this.activateTracking.bind(_this),_this.updateSender=_this.updateSender.bind(_this),_this.submitSender=_this.submitSender.bind(_this),_this.showWooCommerceStepOrFinish=_this.showWooCommerceStepOrFinish.bind(_this),_this.componentDidUpdate(),_this}return _inherits(WelcomeWizardStepsController,_React$Component),_createClass(WelcomeWizardStepsController,[{key:"componentDidUpdate",value:function(){var step=parseInt(this.props.match.params.step,10);(step>this.state.stepsCount||step<1)&&this.props.history.push("/steps/1")}},{key:"finishWizard",value:function(){this.setState({loading:!0}),window.location=window.finish_wizard_url}},{key:"showWooCommerceStepOrFinish",value:function(){4===this.state.stepsCount?this.props.history.push("/steps/4"):this.finishWizard()}},{key:"updateSettings",value:function(data){var _this2=this;return this.setState({loading:!0}),_mailpoet2.default.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"settings",action:"set",data:data}).then(function(){return _this2.setState({loading:!1})}).fail(function(response){_this2.setState({loading:!1}),response.errors.length>0&&_mailpoet2.default.Notice.error(response.errors.map(function(error){return error.message}),{scroll:!0})})}},{key:"activateTracking",value:function(){var _this3=this;this.updateSettings({analytics:{enabled:!0}}).then(function(){return _this3.showWooCommerceStepOrFinish()})}},{key:"updateSender",value:function(data){this.setState({sender:Object.assign({},this.state.sender,data)})}},{key:"submitSender",value:function(){var _this4=this;this.updateSettings({sender:this.state.sender}).then(function(){return _this4.props.history.push("/steps/2")})}},{key:"render",value:function(){var _this5=this,step=parseInt(this.props.match.params.step,10);return _react2.default.createElement("div",{className:"mailpoet_welcome_wizard_steps mailpoet_welcome_wizard_centered_column"},_react2.default.createElement(_header2.default,{current_step:step,steps_count:this.state.stepsCount,logo_src:window.mailpoet_logo_url}),1===step&&this.state.shouldSetSender?_react2.default.createElement(_sender_step2.default,{update_sender:this.updateSender,submit_sender:this.submitSender,finish:this.finishWizard,loading:this.state.loading,sender:this.state.sender}):null,1!==step||this.state.shouldSetSender?null:_react2.default.createElement(_migrated_user_step2.default,{next:function(){return _this5.props.history.push("/steps/2")}}),2===step?_react2.default.createElement(_help_info_step2.default,{next:function(){return _this5.props.history.push("/steps/3")}}):null,3===step?_react2.default.createElement(_usage_tracking_step2.default,{skip_action:this.showWooCommerceStepOrFinish,allow_action:this.activateTracking,allow_text:4===this.state.stepsCount?_mailpoet2.default.I18n.t("allowAndContinue"):_mailpoet2.default.I18n.t("allowAndFinish"),loading:this.state.loading}):null,4===step?_react2.default.createElement(_woo_commerce_step2.default,{next:this.finishWizard,screenshot_src:window.woocommerce_screenshot_url,loading:this.state.loading}):null)}}]),WelcomeWizardStepsController}(_react2.default.Component);WelcomeWizardStepsController.propTypes={match:_propTypes2.default.shape({params:_propTypes2.default.shape({step:_propTypes2.default.string}).isRequired}).isRequired,history:_propTypes2.default.shape({push:_propTypes2.default.func.isRequired}).isRequired},module.exports=WelcomeWizardStepsController},450:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_stepped_progess_bar=__webpack_require__(451),_stepped_progess_bar2=_interopRequireDefault(_stepped_progess_bar),WelcomeWizardHeader=function(props){return _react2.default.createElement("div",{className:"mailpoet_welcome_wizard_centered_column mailpoet_welcome_wizard_header"},_react2.default.createElement("img",{src:props.logo_src,width:"200",alt:"MailPoet logo"}),props.current_step<=props.steps_count?_react2.default.createElement(_stepped_progess_bar2.default,{steps_count:props.steps_count,step:props.current_step}):null)};WelcomeWizardHeader.propTypes={current_step:_propTypes2.default.number.isRequired,steps_count:_propTypes2.default.number.isRequired,logo_src:_propTypes2.default.string.isRequired},module.exports=WelcomeWizardHeader},451:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}var _propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),SteppedProgressBar=function(props){return props.step>props.steps_count?null:_react2.default.createElement("div",{className:"mailpoet_stepped_progress_bar"},[].concat(_toConsumableArray(Array(props.steps_count).keys())).map(function(step){return _react2.default.createElement("div",{className:"mailpoet_stepped_progress_bar_step "+(step<props.step?"active":""),key:"step_"+step,style:{width:Math.floor(100/props.steps_count)+"%"}})}))};SteppedProgressBar.propTypes={steps_count:_propTypes2.default.number.isRequired,step:_propTypes2.default.number.isRequired},module.exports=SteppedProgressBar},452:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_jquery=__webpack_require__(5),_jquery2=_interopRequireDefault(_jquery),WelcomeWizardSenderStep=function(props){return _react2.default.createElement("div",{className:"mailpoet_welcome_wizard_step_content mailpoet_welcome_wizard_centered_column"},_react2.default.createElement("h1",null,_mailpoet2.default.I18n.t("welcomeWizardLetsStartTitle")),_react2.default.createElement("p",null,_mailpoet2.default.I18n.t("welcomeWizardSenderText")),_react2.default.createElement("form",{id:"mailpoet_sender_form",className:"mailpoet_welcome_wizard_centered_column "+(props.loading?"mailpoet_sender_form_loading":""),onSubmit:function(e){e.preventDefault(),(0,_jquery2.default)("#mailpoet_sender_form").parsley().validate()&&props.submit_sender()}},_react2.default.createElement("label",{htmlFor:"senderName"},_mailpoet2.default.I18n.t("senderName"),":",_react2.default.createElement("input",{name:"senderName",type:"text",placeholder:"John Doe",value:props.sender?props.sender.name:"","data-parsley-required":!0,onChange:function(e){return props.update_sender({name:e.target.value})}})),_react2.default.createElement("label",{htmlFor:"senderAddress"},_mailpoet2.default.I18n.t("senderAddress"),":",_react2.default.createElement("input",{name:"senderAddress",type:"text",placeholder:"john@doe.com",value:props.sender?props.sender.address:"","data-parsley-required":!0,"data-parsley-type":"email",onChange:function(e){return props.update_sender({address:e.target.value})}})),_react2.default.createElement("input",{className:"button button-primary",type:"submit",value:_mailpoet2.default.I18n.t("next")}),_react2.default.createElement("a",{onClick:props.finish,href:"#finish"},_mailpoet2.default.I18n.t("noThanksSkip"))))};WelcomeWizardSenderStep.propTypes={finish:_propTypes2.default.func.isRequired,loading:_propTypes2.default.bool.isRequired,update_sender:_propTypes2.default.func.isRequired,submit_sender:_propTypes2.default.func.isRequired,sender:_propTypes2.default.shape({name:_propTypes2.default.string,address:_propTypes2.default.string})},WelcomeWizardSenderStep.defaultProps={sender:null},module.exports=WelcomeWizardSenderStep},453:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),WelcomeWizardMigratedUserStep=function(props){return _react2.default.createElement("div",{className:"mailpoet_welcome_wizard_step_content mailpoet_welcome_wizard_centered_column"},_react2.default.createElement("h1",null,_mailpoet2.default.I18n.t("welcomeWizardLetsStartTitle")),_react2.default.createElement("p",null,_mailpoet2.default.I18n.t("welcomeWizardSenderMigratedUserText")),_react2.default.createElement("div",{className:"mailpoet_welcome_wizard_step_controls"},_react2.default.createElement("button",{className:"button button-primary",onClick:props.next},_mailpoet2.default.I18n.t("next"))))};WelcomeWizardMigratedUserStep.propTypes={next:_propTypes2.default.func.isRequired},module.exports=WelcomeWizardMigratedUserStep},454:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_reactStringReplace=__webpack_require__(22),_reactStringReplace2=_interopRequireDefault(_reactStringReplace),WelcomeWizardHelpInfoStep=function(props){return _react2.default.createElement("div",{className:"mailpoet_welcome_wizard_step_content mailpoet_welcome_wizard_centered_column"},_react2.default.createElement("div",{className:"mailpoet_welcome_wizard_help_info_block"},_react2.default.createElement("span",{className:"mailpoet_welcome_wizard_support_button"}),_react2.default.createElement("p",null,(0,_reactStringReplace2.default)(_mailpoet2.default.I18n.t("welcomeWizardYouCanContactText"),/\[strong\](.*?)\[\/strong\]/g,function(match){return _react2.default.createElement("strong",{key:match},match)}))),_react2.default.createElement("div",{className:"mailpoet_welcome_wizard_help_info_block"},_react2.default.createElement("span",{className:"mailpoet_badge mailpoet_badge_video mailpoet_welcome_wizard_video_badge"},_react2.default.createElement("span",{className:"dashicons dashicons-format-video"}),_mailpoet2.default.I18n.t("seeVideoGuide")),_react2.default.createElement("p",null,(0,_reactStringReplace2.default)(_mailpoet2.default.I18n.t("welcomeWizardAboutVideosText"),/\[strong\](.*?)\[\/strong\]/g,function(match){return _react2.default.createElement("strong",{key:match},match)}))),_react2.default.createElement("div",{className:"mailpoet_welcome_wizard_help_info_block"},_react2.default.createElement("span",{className:"mailpoet_welcome_wizard_mail_icon"}),_react2.default.createElement("p",null,(0,_reactStringReplace2.default)(_mailpoet2.default.I18n.t("welcomeWizardAboutCourseText"),/\[strong\](.*?)\[\/strong\]/g,function(match){return _react2.default.createElement("strong",{key:match},match)})),_react2.default.createElement("iframe",{id:"mailpoet_form_iframe",width:"100%",scrolling:"no",frameBorder:"0",title:"Apply to course",src:"https://newsletters.mailpoet.com?mailpoet_form_iframe=13",className:"mailpoet_form_iframe",marginWidth:"0",marginHeight:"0",allowtransparency:"true"})),_react2.default.createElement("button",{className:"button button-primary",onClick:props.next},_mailpoet2.default.I18n.t("next")))};module.exports=WelcomeWizardHelpInfoStep,WelcomeWizardHelpInfoStep.propTypes={next:_propTypes2.default.func.isRequired},module.exports=WelcomeWizardHelpInfoStep},455:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_reactStringReplace=__webpack_require__(22),_reactStringReplace2=_interopRequireDefault(_reactStringReplace),WelcomeWizardUsageTrackingStep=function(props){return _react2.default.createElement("div",{className:"mailpoet_welcome_wizard_step_content mailpoet_welcome_wizard_centered_column"},_react2.default.createElement("h1",null,_mailpoet2.default.I18n.t("welcomeWizardUsageTrackingStepTitle")),_react2.default.createElement("p",null,(0,_reactStringReplace2.default)(_mailpoet2.default.I18n.t("welcomeWizardTrackingText"),/\[link\](.*?)\[\/link\]/g,function(match){return _react2.default.createElement("a",{key:"docs_link",href:"https://beta.docs.mailpoet.com/article/130-sharing-your-data-with-us",target:"_blank",rel:"noopener noreferrer"},match)})),_react2.default.createElement("div",{className:"mailpoet_welcome_wizard_step_controls\n        "+(props.loading?"mailpoet_welcome_wizard_step_controls_loading":"")},_react2.default.createElement("button",{className:"button",onClick:props.skip_action,disabled:props.loading},_mailpoet2.default.I18n.t("skip")),_react2.default.createElement("button",{className:"button button-primary",onClick:props.allow_action,disabled:props.loading},props.allow_text)))};module.exports=WelcomeWizardUsageTrackingStep,WelcomeWizardUsageTrackingStep.propTypes={allow_action:_propTypes2.default.func.isRequired,allow_text:_propTypes2.default.string.isRequired,skip_action:_propTypes2.default.func.isRequired,loading:_propTypes2.default.bool.isRequired}},456:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),WelcomeWizardWooCommerceStep=function(props){return _react2.default.createElement("div",{className:"mailpoet_welcome_wizard_step_content mailpoet_welcome_wizard_centered_column"},_react2.default.createElement("h1",null,_mailpoet2.default.I18n.t("welcomeWizardWooCommerceStepTitle")),_react2.default.createElement("p",null,_mailpoet2.default.I18n.t("welcomeWizardHelpingShopOwnersText")),_react2.default.createElement("p",null,_mailpoet2.default.I18n.t("welcomeWizardWooCommerceEmailsText")),_react2.default.createElement("img",{src:props.screenshot_src,className:"mailpoet_welcome_wizard_woo_screenshot",alt:"WooCommerce email"}),_react2.default.createElement("div",{className:"mailpoet_welcome_wizard_step_controls\n        "+(props.loading?"mailpoet_welcome_wizard_step_controls_loading":"")},_react2.default.createElement("button",{className:"button button-primary",onClick:props.next,disabled:props.loading},_mailpoet2.default.I18n.t("gotIt"))))};module.exports=WelcomeWizardWooCommerceStep,WelcomeWizardWooCommerceStep.propTypes={next:_propTypes2.default.func.isRequired,screenshot_src:_propTypes2.default.string.isRequired,loading:_propTypes2.default.bool.isRequired}},457:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _reactDom=__webpack_require__(11),_reactDom2=_interopRequireDefault(_reactDom),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_new_subscriber_announcement=__webpack_require__(458),_new_subscriber_announcement2=_interopRequireDefault(_new_subscriber_announcement),container=document.getElementById("new_subscriber_announcement");container&&_reactDom2.default.render(_react2.default.createElement(_new_subscriber_announcement2.default,{installedAt:window.mailpoet_installed_at,imageUrl:window.mailpoet_new_subscriber_announcement_image}),container)},458:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_propTypes=__webpack_require__(3),_propTypes2=_interopRequireDefault(_propTypes),_mailpoet=__webpack_require__(2),_mailpoet2=_interopRequireDefault(_mailpoet),_moment=__webpack_require__(0),_moment2=_interopRequireDefault(_moment),_in_app_announcement=__webpack_require__(267),_in_app_announcement2=_interopRequireDefault(_in_app_announcement),NewSubscriberNotificationAnnouncement=function(props){return _react2.default.createElement(_in_app_announcement2.default,{validUntil:(0,_moment2.default)(props.installedAt).add(3,"months").toDate(),height:"700px",showOnlyOnceSlug:"new_subscriber_notification",showToNewUser:!1},_react2.default.createElement("div",{className:"new_subscriber_notification_announcement"},_react2.default.createElement("h1",null,_mailpoet2.default.I18n.t("announcementHeader")),_react2.default.createElement("img",{src:props.imageUrl,width:"600px",height:"460px",alt:""}),_react2.default.createElement("p",null,_mailpoet2.default.I18n.t("announcementParagraph1"),_react2.default.createElement("br",null),_mailpoet2.default.I18n.t("announcementParagraph2"))))};NewSubscriberNotificationAnnouncement.propTypes={installedAt:_propTypes2.default.string.isRequired,imageUrl:_propTypes2.default.string.isRequired},module.exports=NewSubscriberNotificationAnnouncement},459:function(module,exports,__webpack_require__){"use strict";(function(setImmediate){function displayPoll(){window.mailpoet_display_nps_poll&&window.satismeter&&window.mailpoet_installed_at_isoFormat&&(window.satismeter({writeKey:"6L479eVPXk7pBn6S",userId:window.mailpoet_current_wp_user.ID+window.mailpoet_site_url,traits:{name:window.mailpoet_current_wp_user.user_nicename,email:window.mailpoet_current_wp_user.user_email,createdAt:window.mailpoet_installed_at_isoFormat}}),window.satismeter({writeKey:"k0aJAsQAWI2ERyGv",userId:window.mailpoet_current_wp_user.ID+window.mailpoet_site_url,traits:{name:window.mailpoet_current_wp_user.user_nicename,email:window.mailpoet_current_wp_user.user_email,createdAt:window.mailpoet_installed_at_isoFormat}}))}setImmediate(displayPoll)}).call(exports,__webpack_require__(281).setImmediate)}},[390]);